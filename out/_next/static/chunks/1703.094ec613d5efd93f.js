"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1703],{41703:function(e,t,a){a.d(t,{Z:function(){return Q}});var n=a(85893),s=a(11163),o=a.n(s),i=a(67294),r=a(83830),l=a(66136),d=a(60664),c=a(21609),u=a(49837),m=a(91359),x=a(79072),p=a(17575),h=a(80562),v=a(55343),g=a(44731),f=a(59742),j=a(54225),Z=a(87536),y=a(86501),D=a(86887),C=a(64165),I=a(40039),P=a(50287),w=a(29308);a(88475);let b=e=>{let{data:t,getValues:a,control:s,register:o,name:i,errors:r,removeItem:l}=e;return a("cargosFuncoes").map((e,t)=>{var a,i,d,u,m,p,v,g;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.Z,{xs:12,md:2,title:"Data",type:"date",required:!0,name:"cargosFuncoes.".concat([t],".data"),register:o,control:s,value:e.data,typeValidation:"dataPassado",daysValidation:999999,errors:null==r?void 0:null===(a=r.cargosFuncoes)||void 0===a?void 0:null===(i=a[t])||void 0===i?void 0:i.data,opacity:0===e.status}),(0,n.jsx)(w.Z,{xs:12,md:4,required:!0,title:"Forma\xe7\xe3o / Cargo",name:"cargosFuncoes.".concat([t],".formacaoCargo"),control:s,errors:null==r?void 0:null===(d=r.cargosFuncoes)||void 0===d?void 0:null===(u=d[t])||void 0===u?void 0:u.formacaoCargo,opacity:0===e.status}),(0,n.jsx)(w.Z,{xs:12,md:3,title:"Conselho",name:"cargosFuncoes.".concat([t],".conselho"),control:s,errors:null==r?void 0:null===(m=r.cargosFuncoes)||void 0===m?void 0:null===(p=m[t])||void 0===p?void 0:p.conselho,opacity:0===e.status}),(0,n.jsx)(P.Z,{xs:12,md:2,title:"Data Inativa\xe7\xe3o",name:"cargosFuncoes.".concat([t],".dataInativacao"),type:"date",value:e.dataInativacao,control:s,errors:null==r?void 0:null===(v=r.cargosFuncoes)||void 0===v?void 0:null===(g=v[t])||void 0===g?void 0:g.dataInativacao,opacity:0===e.status}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:1,className:"flex items-center",children:(0,n.jsx)(h.Z,{color:"error",size:"small",onClick(){l(e,t)},children:(0,n.jsx)(c.Z,{icon:"tabler:trash-filled"})})})]})})};var S=a(29630),F=a(9041),V=a(3893),N=a(82747),k=a(19604),E=a(67836),M=a(16590);let A=e=>{var t,a,s,o,r,l,u;let{control:m,setError:p,errors:g,data:f,register:Z,watch:y,getValues:D,setValue:C,userNewVerifyCPF:I,setUserNewVerifyCPF:b,userExistVerifyCPF:A,setUserExistVerifyCPF:T,resetFields:O,routeVeryfyCNP:q,userExistDefault:z,type:U}=e,[_,L]=(0,i.useState)(null),[W,J]=(0,i.useState)(!1),[Y,R]=(0,i.useState)({showPassword:!1,showConfirmPassword:!1}),G=()=>{R({...Y,showPassword:!Y.showPassword})},H=e=>{e.preventDefault()},Q=()=>{R({...Y,showConfirmPassword:!Y.showConfirmPassword})},X=e=>{e.preventDefault()},B=()=>{let e=D("fields").cpf;e&&e.length<14&&(C("isUsuario",!1),O()),(0,N.sw)(e)?(p("fields.cpf",null),y()):p("fields.cpf",{type:"manual",message:"CPF inv\xe1lido"}),y()},K=async()=>{O();let e=D("isUsuario");if(!e){let t={cpf:D("fields").cpf};try{await d.h.post(q,t),b(!0)}catch(a){409==a.response.status?T(!0):console.log(a)}}},$=()=>{K()};return f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.Z,{md:12,title:"Nome",name:"fields.nome",required:!0,control:m,errors:null==g?void 0:null===(t=g.fields)||void 0===t?void 0:t.nome}),(0,n.jsx)(w.Z,{xs:12,md:4,title:"CPF",mask:"cpf",name:"fields.cpf",required:!0,control:m,errors:null==g?void 0:null===(a=g.fields)||void 0===a?void 0:a.cpf,onChange:B}),(0,n.jsx)(P.Z,{xs:12,md:4,title:"Data de Nascimento",name:"fields.dataNascimento",type:"date",required:!0,value:null==f?void 0:null===(s=f.fields)||void 0===s?void 0:s.dataNascimento,register:Z,control:m,errors:null==g?void 0:null===(o=g.fields)||void 0===o?void 0:o.dataNascimento,typeValidation:"dataPassado"}),(0,n.jsx)(w.Z,{xs:12,md:4,title:"Email",type:"email",required:null!=A&&A,name:"fields.email",control:m,errors:null==g?void 0:null===(r=g.fields)||void 0===r?void 0:r.email,onChange:B}),(0,n.jsx)(w.Z,{xs:12,md:I?2:4,title:"Matricula",name:"fields.matricula",control:m,errors:null==g?void 0:null===(l=g.fields)||void 0===l?void 0:l.matricula}),(0,n.jsx)(V.Z,{xs:12,md:2,onClick:$,title:"Usu\xe1rio do sistema",name:"isUsuario",value:f.fields.usuarioID>0,register:Z,disabled:!(D("fields").email&&(0,N.sw)(D("fields").cpf)),helpText:"Preencha com um CPF e email v\xe1lidos para habilitar esta fun\xe7\xe3o"}),A&&(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(k.Z,{severity:"warning",sx:{mt:2},children:(0,n.jsx)(S.Z,{variant:"body2",children:"Esse profissional j\xe1 possui acesso ao sistema. A senha n\xe3o ser\xe1 alterada!"})})}),I&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,sm:4,children:(0,n.jsx)(E.Z,{fullWidth:!0,label:"Senha",id:"input-password",variant:"outlined",size:"small",type:Y.showPassword?"text":"password",name:"senha",error:!!g.senha,helperText:g.senha&&g.senha.message,InputProps:{endAdornment:(0,n.jsx)(F.Z,{position:"end",children:(0,n.jsx)(h.Z,{edge:"end",onClick:G,onMouseDown:H,children:(0,n.jsx)(c.Z,{icon:Y.showPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})})},...Z("senha",{minLength:{value:4,message:"Senha deve ter pelo menos 4 caracteres"}})})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,sm:4,children:(0,n.jsx)(E.Z,{fullWidth:!0,label:"Confirme a senha",id:"input-confirm-password",variant:"outlined",size:"small",type:Y.showConfirmPassword?"text":"password",name:"confirmaSenha",error:!!g.confirmaSenha,helperText:g.confirmaSenha&&g.confirmaSenha.message,InputProps:{endAdornment:(0,n.jsx)(F.Z,{position:"end",children:(0,n.jsx)(h.Z,{edge:"end",onClick:Q,onMouseDown:X,children:(0,n.jsx)(c.Z,{icon:Y.showConfirmPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})})},onChange(e){L(e.target.value)},...Z("confirmaSenha",{validate:e=>e===y("senha")||"As senhas n\xe3o coincidem"})})})]}),(z||I)&&"new"!=U&&(0,n.jsx)(x.ZP,{item:!0,xs:12,sm:2,children:(0,n.jsx)(v.Z,{fullWidth:!0,children:(0,n.jsx)(j.Z,{variant:"outlined",color:"primary",size:"medium",startIcon:(0,n.jsx)(c.Z,{icon:"uil:padlock"}),onClick:()=>J(!0),children:"Alterar senha"})})}),(0,n.jsx)(M.Z,{openModal:W,handleClose:()=>J(!1),setOpenModalNewPassword:J,usuarioID:null===(u=f.fields)||void 0===u?void 0:u.usuarioID})]})};var T=a(76992),O=a(29618),q=a(47028),z=a(67569);let U=e=>{let{submenu:t,indexMenuGroup:a,indexMenu:s,indexSubmenu:o,register:i,setValue:r}=e;return(0,n.jsxs)(x.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,n.jsx)(x.ZP,{item:!0,xs:4,md:8,children:(0,n.jsx)(S.Z,{variant:"subtitle1",children:t.nome})}),(0,n.jsx)("input",{type:"hidden",value:t.rota,name:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].rota"),...i("menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].rota"))}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].ler"),value:t.ler,register:i,setValue:r,edit:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].edit")}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].inserir"),value:t.inserir,register:i,setValue:r,edit:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].edit")}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].editar"),value:t.editar,register:i,setValue:r,edit:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].edit")}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].excluir"),value:t.excluir,register:i,setValue:r,edit:"menu[".concat(a,"].menu[").concat(s,"].submenu[").concat(o,"].edit")})]})},_=e=>{let{menu:t,indexMenuGroup:a,indexMenu:s,expandedItem:o,handleChangeItem:i,register:r,setValue:l,getValues:d}=e;return t.rota?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,n.jsx)(x.ZP,{item:!0,xs:4,md:8,children:(0,n.jsx)(S.Z,{variant:"subtitle1",children:t.nome})}),(0,n.jsx)("input",{type:"hidden",value:t.rota,name:"menu[".concat(a,"].menu[").concat(s,"].rota"),...r("menu[".concat(a,"].menu[").concat(s,"].rota"))}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].ler"),value:t.ler,register:r,setValue:l,edit:"menu[".concat(a,"].menu[").concat(s,"].edit")}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].inserir"),value:t.inserir,register:r,setValue:l,edit:"menu[".concat(a,"].menu[").concat(s,"].edit")}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].editar"),value:t.editar,register:r,setValue:l,edit:"menu[".concat(a,"].menu[").concat(s,"].edit")}),(0,n.jsx)(z.Z,{xs:2,md:1,name:"menu[".concat(a,"].menu[").concat(s,"].excluir"),value:t.excluir,register:r,setValue:l,edit:"menu[".concat(a,"].menu[").concat(s,"].edit")})]})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(T.Z,{expanded:o==="item-".concat(a,"-").concat(s),onChange:i("item-".concat(a,"-").concat(s)),sx:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[(0,n.jsx)(O.Z,{id:"controlled-panel-header-1","aria-controls":"controlled-panel-content-1",expandIcon:(0,n.jsx)(c.Z,{icon:"mdi:chevron-down"}),sx:{display:"flex",alignItems:"center"},children:(0,n.jsx)(S.Z,{children:t.nome})}),(0,n.jsx)(q.Z,{children:t.submenu&&t.submenu.map((e,t)=>(0,n.jsx)(U,{submenu:e,indexMenuGroup:a,indexMenu:s,indexSubmenu:t,register:r,setValue:l},t))})]})})},L=e=>{let{register:t,setValue:a,menu:s,control:o,getValues:r}=e,{settings:d}=(0,i.useContext)(l.J6),[u,m]=(0,i.useState)("panel"),[p,h]=(0,i.useState)(!1),v=e=>(t,a)=>{h(!!a&&e)},g=d.mode;return(0,n.jsxs)(T.Z,{expanded:"panel"===u,onChange(e,t){m(!!t&&"panel")},sx:{border:"".concat("dark"===g?"1px solid #65656E":"1px solid #C5C6CD"),boxShadow:"none"},children:[(0,n.jsx)(O.Z,{id:"controlled-panel-header-1","aria-controls":"controlled-panel-content-1",expandIcon:(0,n.jsx)(c.Z,{icon:"mdi:chevron-down"}),sx:{display:"flex",alignItems:"center"},children:(0,n.jsx)(S.Z,{children:"Permiss\xf5es de Acesso"})}),(0,n.jsx)(q.Z,{children:s&&s.map((e,s)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x.ZP,{container:!0,spacing:4,sx:{my:2},children:[(0,n.jsx)(x.ZP,{item:!0,xs:4,md:8,children:(0,n.jsx)(S.Z,{variant:"body2",children:e.nome})}),(0,n.jsx)(x.ZP,{item:!0,xs:2,md:1,children:(0,n.jsx)(S.Z,{variant:"body2",sx:{textAlign:"center"},children:"Ler"})}),(0,n.jsx)(x.ZP,{item:!0,xs:2,md:1,children:(0,n.jsx)(S.Z,{variant:"body2",sx:{textAlign:"center"},children:"Inserir"})}),(0,n.jsx)(x.ZP,{item:!0,xs:2,md:1,children:(0,n.jsx)(S.Z,{variant:"body2",sx:{textAlign:"center"},children:"Editar"})}),(0,n.jsx)(x.ZP,{item:!0,xs:2,md:1,children:(0,n.jsx)(S.Z,{variant:"body2",sx:{textAlign:"center"},children:"Excluir"})})]}),e.menu&&e.menu.map((e,o)=>(0,n.jsx)(_,{getValues:r,menu:e,indexMenuGroup:s,expandedItem:p,handleChangeItem:v,indexMenu:o,register:t,setValue:a},o))]}))})]})};var W=a(45061),J=a(60565),Y=a(41088),R=a(84220);let G=e=>{var t;let{data:a,getValues:s,setValue:o,control:r,register:l,errors:p,removeItem:v,key:g,trigger:Z,fields:y,append:D,remove:C}=e,{loggedUnity:w}=(0,i.useContext)(I.V),[b,S]=(0,i.useState)([]),F=new Date().toISOString().substring(0,10),V=async()=>{try{if(!w)return;let e=await d.h.post("/cadastros/setor",{unidadeID:w.unidadeID});S(e.data)}catch(t){console.log(t)}};return(0,i.useEffect)(()=>{V()},[]),(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(f.Z,{title:"Setores"}),(0,n.jsx)(m.Z,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:5,children:[y.map((e,s)=>{var d,u,m,v,g,f,j,Z,y,D,I,w,S,V,N;return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"fields.setores[".concat(s,"].id"),value:e.id}),(0,n.jsx)(R.Z,{xs:12,md:7,title:"Setor",name:"fields.setores[".concat(s,"].setor"),value:null==a?void 0:null===(d=a.fields)||void 0===d?void 0:null===(u=d.setores)||void 0===u?void 0:null===(m=u[s])||void 0===m?void 0:m.setor,required:!0,options:null!=b?b:[],register:l,setValue:o,control:r,errors:null==p?void 0:null===(v=p.fields)||void 0===v?void 0:null===(g=v.setores)||void 0===g?void 0:null===(f=g[s])||void 0===f?void 0:f.setor,opacity:0===e.status}),(0,n.jsx)(P.Z,{xs:12,md:2,title:"Data In\xedcio",name:"fields.setores[".concat(s,"].dataInicio"),value:null!==(t=null==a?void 0:null===(j=a.fields)||void 0===j?void 0:null===(Z=j.setores)||void 0===Z?void 0:null===(y=Z[s])||void 0===y?void 0:y.dataInicio)&&void 0!==t?t:F,required:!0,register:l,control:r,errors:null==p?void 0:null===(D=p.fields)||void 0===D?void 0:null===(I=D.setores)||void 0===I?void 0:null===(w=I[s])||void 0===w?void 0:w.dataInicio,opacity:0===e.status}),(0,n.jsx)(P.Z,{xs:12,md:2,title:"Data Fim",name:"fields.setores[".concat(s,"].dataFim"),value:null==a?void 0:null===(S=a.fields)||void 0===S?void 0:null===(V=S.setores)||void 0===V?void 0:null===(N=V[s])||void 0===N?void 0:N.dataFim,register:l,control:r,opacity:0===e.status}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:1,className:"flex items-center",children:(0,n.jsx)(h.Z,{color:"error",size:"small",onClick:()=>C(s),children:(0,n.jsx)(c.Z,{icon:"tabler:trash-filled"})})})]},e.id)}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(j.Z,{variant:"outlined",color:"primary",onClick(){D({id:null,dataInicio:F}),Z()},startIcon:(0,n.jsx)(c.Z,{icon:"material-symbols:add-circle-outline-rounded"}),children:"Inserir Setor"})})]})})]})},H=e=>{let{id:t}=e,a=(0,i.useRef)(null),[s,P]=(0,i.useState)(!1),{setId:w}=(0,i.useContext)(r.X),{user:S,setUser:F,loggedUnity:V,routes:N}=(0,i.useContext)(I.V),{title:k}=(0,i.useContext)(J.f),[E,M]=(0,i.useState)(null),[T,O]=(0,i.useState)(!1),[q,z]=(0,i.useState)([]),[U,_]=(0,i.useState)(!1),[H,Q]=(0,i.useState)(null),{settings:X}=(0,i.useContext)(l.J6),B=X.mode,{startLoading:K,stopLoading:$}=(0,Y.Z)(),[ee,et]=(0,i.useState)(!1),[ea,en]=(0,i.useState)(!1),[es,eo]=(0,i.useState)(!1),ei=o(),er=t&&t>0?"edit":"new",el=ei.pathname,ed="edit"==er?"".concat(el,"/verifyCPF"):"".concat((0,C.g_)(el),"/verifyCPF"),{control:ec,handleSubmit:eu,reset:em,setError:ex,setValue:ep,getValues:eh,watch:ev,trigger:eg,register:ef,formState:{errors:ej}}=(0,Z.cI)({mode:"onChange"}),eZ=()=>{en(!1),et(!1),eo(!1)},ey=async e=>{K();let a={...e,admin:S.admin,usualioLogado:S.usuarioID,unidadeID:V.unidadeID,fields:{...e.fields,dataNascimento:e.fields.dataNascimento.startsWith("0")?"1"+e.fields.dataNascimento.substring(1,10):e.fields.dataNascimento.substring(0,10),unidadeID:V.unidadeID},cargosFuncoes:e.cargosFuncoes.map(e=>({...e,data:e.data.substring(0,10),dataInativacao:e.dataInativacao?e.dataInativacao.substring(0,10):null})),removedItems:q};if(console.log("\uD83D\uDE80 ~ onSubmit:",a),!eD(a)){y.ZP.error("N\xe3o \xe9 permitido repetir setor ativo em um profissional!");return}try{if("new"===er){let n=await d.h.post("".concat((0,C.g_)(el),"/new/insertData"),a);ei.push("".concat((0,C.g_)(el))),w(n.data),y.ZP.success(C.OD.successNew)}else"edit"===er&&(await d.h.post("".concat(el,"/updateData/").concat(t),a),y.ZP.success(C.OD.successUpdate));eZ(),eC()}catch(s){s.response&&409===s.response.status?y.ZP.error(C.OD.errorRepeated):console.log(s)}finally{$()}},eD=e=>{let t=!0;return e.fields.setores&&e.fields.setores.length>1&&e.fields.setores.map((a,n)=>{e.fields.setores.map((e,s)=>{n===s||a.setor.id!==e.setor.id||a.dataFim||e.dataFim||(t=!1)})}),t},eC=async()=>{let e="new"===er?"".concat((0,C.g_)(el),"/new/getData"):"".concat(el,"/getData/").concat(t,"?unidadeID=").concat(V.unidadeID,"&papelID=").concat(V.papelID,"&admin=").concat(S.admin);try{let a=await d.h.post(e);console.log("\uD83D\uDE80 ~ getData:",a.data),em(a.data),Q(a.data.imagem),M(a.data)}catch(n){console.log(n)}},eI=async()=>{try{await d.h.delete("".concat(el,"/").concat(t,"/").concat(S.usuarioID,"/").concat(V.unidadeID)),w(null),P(!1),y.ZP.success(C.OD.successDelete)}catch(e){e.response&&409===e.response.status?(y.ZP.error(C.OD.pendingDelete),P(!1)):console.log(e)}},eP=()=>{let e=new Date,t="".concat(String(e.getMonth()+1).padStart(2,"0"),"/").concat(String(e.getDate()).padStart(2,"0"),"/").concat(e.getFullYear()),a=[...eh("cargosFuncoes"),{conselho:"",data:t,dataInativacao:"",formacaoCargo:"",status:!0}];ep("cargosFuncoes",a),O(!T)},ew=(e,t)=>{if(1===E.cargosFuncoes.length){y.ZP.error("\xc9 necess\xe1rio ter pelo menos um Cargo/Fun\xe7\xe3o!");return}e.id&&z([...q,e.id]);let a=eh("cargosFuncoes").filter((e,a)=>a!==t);ep("cargosFuncoes",a),O(!T)},eb=async e=>{let a=e.target.files[0];if(a){let n=new FormData;n.append("files[]",a),n.append("usuarioID",S.usuarioID);let s=a.type.includes("image");if(!s){y.ZP.error("O arquivo selecionado n\xe3o \xe9 uma imagem!");return}await d.h.post("".concat(el,"/photo-profile/").concat(t,"/").concat(V.unidadeID,"/").concat(S.usuarioID),n).then(e=>{Q(e.data),y.ZP.success("Foto atualizada com sucesso!");let t=JSON.parse(localStorage.getItem("userData"));t.imagem=e.data,localStorage.setItem("userData",JSON.stringify(t)),F(t)}).catch(e=>{var t,a,n;y.ZP.error(null!==(n=null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)&&void 0!==n?n:"Erro ao atualizar foto de perfil, tente novamente!")})}},eS=async()=>{try{await d.h.delete("".concat(el,"/photo-profile/").concat(t,"/").concat(V.unidadeID,"/").concat(S.usuarioID)),Q(null),y.ZP.success("Foto removida com sucesso!")}catch(e){console.log(e),y.ZP.error("Erro ao remover foto, tente novamente!")}},eF=()=>{a.current.click()},eV=e=>{let t=e.map(e=>({...e,menu:e.menu.map(e=>({...e,edit:!!e.rota}))}));return t},eN=async e=>{let t={usuarioID:e.usuarioID,unidadeID:V.unidadeID,papelID:1};try{let a=await d.h.post("".concat(el,"/copyPermissions/"),t),n=eV(a.data);ep("menu",n),M({...E,menu:n}),_(!U),y.ZP.success("Permiss\xf5es copiadas com sucesso!")}catch(s){console.log(s)}};(0,i.useEffect)(()=>{eC(),setTimeout(()=>{eg()},300)},[t]),(0,i.useEffect)(()=>{E&&E.fields.usuarioID>0&&eo(!0)},[E]);let{fields:ek,append:eE,remove:eM}=(0,Z.Dq)({control:ec,name:"fields.setores"});return E&&(0,n.jsxs)("form",{onSubmit:eu(ey),children:[(0,n.jsx)(D.Z,{btnCancel:!0,btnSave:!0,btnNew:!0,handleSubmit:()=>eu(ey),btnDelete:"edit"===er,onclickDelete:()=>P(!0),type:er}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(u.Z,{children:(0,n.jsx)(m.Z,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:5,children:["edit"==er&&(0,n.jsx)(x.ZP,{item:!0,xs:12,md:2,children:(0,n.jsxs)(x.ZP,{item:!0,xs:12,md:12,sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"140px",position:"relative",border:"".concat("dark"===B?"1px solid #65656E":"1px solid #C5C6CD"),borderRadius:"8px"},children:[H&&(0,n.jsx)(p.Z,{title:"Apagar foto do perfil",placement:"top",children:(0,n.jsx)(h.Z,{size:"small",sx:{position:"absolute",top:"8px",right:"8px",zIndex:"20",color:"white",opacity:"0.8",backgroundColor:"#FF4D49","&:hover":{backgroundColor:"#FF4D49",opacity:"1"}},onClick:eS,children:(0,n.jsx)(c.Z,{icon:"material-symbols:delete-outline"})})}),(0,n.jsx)(p.Z,{title:H?"Alterar foto":"Inserir foto",placement:"top",children:(0,n.jsxs)(v.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:[(0,n.jsx)("input",{type:"file",ref:a,style:{display:"none"},onChange:eb}),(0,n.jsx)(g.Z,{variant:"rounded",alt:"Imagem do cabe\xe7alho do relat\xf3rio",sx:{width:"100%",height:"100%",cursor:"pointer"},onClick:eF,src:null!=H?H:"https://gedagro.com.br/images/report.png"})]})})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:"edit"==er?10:12,children:(0,n.jsx)(x.ZP,{container:!0,spacing:5,children:(0,n.jsx)(A,{data:E,control:ec,errors:ej,register:ef,watch:ev,getValues:eh,setError:ex,setValue:ep,userNewVerifyCPF:ea,setUserNewVerifyCPF:en,userExistVerifyCPF:ee,setUserExistVerifyCPF:et,resetFields:eZ,routeVeryfyCNP:ed,userExistDefault:es,type:er})})})]})})}),(0,n.jsx)(G,{data:E,getValues:eh,setValue:ep,control:ec,register:ef,errors:ej,removeItem:ew,trigger:eg,fields:ek,append:eE,remove:eM},T),(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(f.Z,{title:"Cargos e Fun\xe7\xf5es"}),(0,n.jsx)(m.Z,{children:(0,n.jsxs)(x.ZP,{container:!0,spacing:5,children:[E&&(0,n.jsx)(b,{data:E,getValues:eh,control:ec,register:ef,errors:ej,removeItem:ew},T),(0,n.jsx)(j.Z,{variant:"outlined",color:"primary",sx:{mt:4,ml:4},startIcon:(0,n.jsx)(c.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){eP()},children:"Inserir cargo"})]})})]}),N.find(e=>e.rota===el&&e.ler)&&(ea||es)&&(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(f.Z,{title:"Permiss\xf5es"}),(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(x.ZP,{container:!0,spacing:4,className:"my-3",children:(0,n.jsx)(R.Z,{xs:12,md:12,title:"Copiar permiss\xf5es do profissional",name:"professional",value:null,options:null==E?void 0:E.professionals,onChange:eN,register:ef,setValue:ep,control:ec})}),(0,n.jsx)(L,{menu:E.menu,control:ec,register:ef,setValue:ep,getValues:eh},U)]})]}),(0,n.jsx)(W.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+k.title,openModal:s,handleClose:()=>P(!1),handleSubmit:eI,btnCancel:!0,btnConfirm:!0})]})]})};var Q=H},50287:function(e,t,a){var n=a(85893),s=a(79072),o=a(55343),i=a(67836),r=a(87536),l=a(62097),d=a(67294),c=a(64165);let u=e=>{let{xs:t,md:a,title:u,required:m,disabled:x,type:p,value:h,name:v,typeValidation:g,errors:f,alertRequired:j,control:Z,opacity:y}=e,D=(0,l.Z)(),[C,I]=(0,d.useState)({}),[P,w]=(0,d.useState)(null);(0,d.useEffect)(()=>{g&&h&&S(g,v,h)},[g,h,v]);let b=e=>{let t=new Date(e+"T00:00:00"),a=t.getUTCDate().toString().padStart(2,"0"),n=(t.getUTCMonth()+1).toString().padStart(2,"0"),s=t.getUTCFullYear();return"".concat(s,"-").concat(n,"-").concat(a)},S=(e,t,a,n)=>{let s=new Date(a+"T00:00:00"),o=(0,c.HD)(e,s,n);I(e=>({...e,[t]:o}))},F=e=>{let t=new Date,a=new Date(e+"T00:00:00");return"dataAtual"===g&&a.toDateString()!==t.toDateString()?(w("A data deve ser a data atual"),!1):"dataPassado"===g&&a>=t?(w("A data deve ser do passado"),!1):"dataFutura"===g&&a<=t?(w("A data deve ser do futuro"),!1):(w(null),!0)};return(0,n.jsx)(s.ZP,{item:!0,xs:t,md:a,sx:{my:1},children:(0,n.jsx)(o.Z,{fullWidth:!0,children:(0,n.jsx)(r.Qr,{name:v,control:Z,rules:{required:m},render(e){let{field:t}=e;return(0,n.jsx)(i.Z,{type:null!=p?p:"date",size:"small",label:u,disabled:!!x,defaultValue:h?b(h):"",error:!!f||!!P,helperText:P,onChange(e){let a=e.target.value;F(a)&&(t.onChange(a),g&&S(g,v,a))},variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{min:"dataFutura"===g?new Date().toISOString().split("T")[0]:void 0,max:"dataPassado"===g?new Date().toISOString().split("T")[0]:new Date(new Date().setFullYear(new Date().getFullYear()+50)).toISOString().split("T")[0]},sx:{opacity:y?.4:1,...j&&!(null==t?void 0:t.value)&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:D.palette.error.main},"&:hover fieldset":{borderColor:D.palette.error.main},"&.Mui-focused fieldset":{borderColor:D.palette.error.main}},"& .MuiInputLabel-root":{color:D.palette.error.main},"& .MuiInputLabel-root.Mui-focused":{color:D.palette.error.main}}}})}})})})};t.Z=u}}]);