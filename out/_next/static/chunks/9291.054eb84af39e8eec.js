"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9291],{59742:function(e,a,t){t.d(a,{Z:function(){return y}});var s=t(63366),o=t(87462),n=t(67294),i=t(86010),r=t(94780),l=t(29630),c=t(78884),d=t(67074),u=t(1588),m=t(34867);function x(e){return(0,m.Z)("MuiCardHeader",e)}let p=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=t(85893);let f=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Z=e=>{let{classes:a}=e;return(0,r.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},x,a)},v=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>(0,o.Z)({[`& .${p.title}`]:a.title,[`& .${p.subheader}`]:a.subheader},a.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,a)=>a.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,a)=>a.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,a)=>a.content})({flex:"1 1 auto"}),D=n.forwardRef(function(e,a){let t=(0,c.Z)({props:e,name:"MuiCardHeader"}),{action:n,avatar:r,className:d,component:u="div",disableTypography:m=!1,subheader:x,subheaderTypographyProps:p,title:D,titleTypographyProps:y}=t,C=(0,s.Z)(t,f),w=(0,o.Z)({},t,{component:u,disableTypography:m}),S=Z(w),P=D;null==P||P.type===l.Z||m||(P=(0,h.jsx)(l.Z,(0,o.Z)({variant:r?"body2":"h5",className:S.title,component:"span",display:"block"},y,{children:P})));let I=x;return null==I||I.type===l.Z||m||(I=(0,h.jsx)(l.Z,(0,o.Z)({variant:r?"body2":"body1",className:S.subheader,color:"text.secondary",component:"span",display:"block"},p,{children:I}))),(0,h.jsxs)(v,(0,o.Z)({className:(0,i.Z)(S.root,d),as:u,ref:a,ownerState:w},C,{children:[r&&(0,h.jsx)(g,{className:S.avatar,ownerState:w,children:r}),(0,h.jsxs)(j,{className:S.content,ownerState:w,children:[P,I]}),n&&(0,h.jsx)(b,{className:S.action,ownerState:w,children:n})]}))});var y=D},88771:function(e,a,t){var s=t(85893),o=t(11163),n=t.n(o),i=t(67294),r=t(60664),l=t(49837),c=t(91359),d=t(79072),u=t(87536),m=t(86501),x=t(45061),p=t(47842),h=t(92477),f=t(71798),Z=t(60565),v=t(83830),g=t(29308),b=t(67569),j=t(41088),D=t(40039);let y=e=>{var a;let{id:t,newChange:o,manualUrl:y,handleModalClose:C,handleConfirmNew:w,btnClose:S,outsideID:P}=e,[I,N]=(0,i.useState)(!1),[M,O]=(0,i.useState)(null),R=n(),T=t&&t>0?"edit":"new",E=R.pathname,{title:V}=(0,i.useContext)(Z.f),{setId:k}=(0,i.useContext)(v.X),{loggedUnity:A,user:q}=(0,i.useContext)(D.V),{startLoading:z,stopLoading:H}=(0,j.Z)(),F=(0,u.cI)({mode:"onChange"}),U=async e=>{let a={...e,usuarioID:q.usuarioID,unidadeID:A.unidadeID};z();try{"new"===T?await r.h.post("/cadastros/classificacao-produto/new/insertData",a).then(e=>{P?w(e.data):(R.push("/cadastros/classificacao-produto"),k(e.data)),m.ZP.success(f.OD.successNew)}):"edit"===T&&(await r.h.post("/cadastros/classificacao-produto/updateData/".concat(t),a),m.ZP.success(f.OD.successUpdate))}catch(s){s.response&&409===s.response.status?m.ZP.error(f.OD.errorRepeated):console.log(s)}finally{H()}},_=async()=>{try{await r.h.delete("".concat(E,"/").concat(t,"/").concat(q.usuarioID,"/").concat(A.unidadeID)),k(null),N(!1),m.ZP.success(f.OD.successDelete)}catch(e){e.response&&409===e.response.status?(m.ZP.error(f.OD.pendingDelete),N(!1)):console.log(e)}},L=async()=>{try{"edit"===T?await r.h.post("".concat(E,"/getData/").concat(t),{id:t}).then(e=>{O(e.data),F.reset(e.data)}):O({fields:{nome:"",status:1}})}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{L(),setTimeout(()=>{F.trigger()},300)},[t]),(0,s.jsxs)(s.Fragment,{children:[!M&&(0,s.jsx)(p.Z,{}),M&&(0,s.jsxs)("form",{onSubmit:F.handleSubmit(U),id:"formItem",children:[(0,s.jsx)(h.Z,{btnCancel:!0,btnNew:!0,btnSave:!0,disabled:!1,manualUrl:y,btnClose:S,handleModalClose:C,handleSubmit:()=>F.handleSubmit(U),btnDelete:"edit"===T,onclickDelete:()=>N(!0),type:T,outsideID:P}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(c.Z,{children:(0,s.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(g.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,form:F}),(0,s.jsx)(b.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==M?void 0:null===(a=M.fields)||void 0===a?void 0:a.status,typePage:T,form:F})]})})})]}),(0,s.jsx)(x.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+V.title,openModal:I,handleClose:()=>N(!1),handleSubmit:_,btnCancel:!0,btnConfirm:!0})]})};a.Z=y},69291:function(e,a,t){t.d(a,{Z:function(){return E}});var s=t(85893),o=t(11163),n=t.n(o),i=t(67294),r=t(60565),l=t(83830),c=t(60664),d=t(49837),u=t(91359),m=t(79072),x=t(59742),p=t(54225),h=t(87536),f=t(86501),Z=t(47842),v=t(45061),g=t(92477),b=t(71798),j=t(29308),D=t(84220),y=t(67569),C=t(40039),w=t(21609),S=t(88475),P=t(44373);let I=e=>{let{removeAnexo:a,type:t,form:o}=e,[n,r]=(0,i.useState)([]),l=async()=>{let e=await c.h.post("/cadastros/produto/getFormularios");r(e.data)};return(0,i.useEffect)(()=>{l()},[]),o.getValues("anexos")&&o.getValues("anexos").map((e,r)=>(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(j.Z,{md:6,title:"Nome",name:"anexos[".concat(r,"].nome"),required:!0,form:o}),(0,s.jsx)(D.Z,{xs:12,md:3,title:"Formul\xe1rio",name:"anexos[".concat(r,"].formulario"),value:e.formulario,required:!0,options:null!=n?n:[],form:o,helpText:"Formul\xe1rio em que ser\xe1 solicitado esse anexo para este produto"}),(0,s.jsx)(y.Z,{xs:1,md:1,title:"Obrigat\xf3rio",name:"anexos[".concat(r,"].obrigatorio"),value:1==e.obrigatorio,typePage:t,form:o}),(0,s.jsx)(y.Z,{xs:1,md:1,title:"Ativo",name:"anexos[".concat(r,"].status"),value:1==e.obrigatorio,typePage:t,form:o}),(0,s.jsx)(S.Z,{xs:4,md:1,title:"Remover",index:r,removeItem:a,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"}),(0,s.jsx)(j.Z,{xs:11,md:12,multiline:!0,items:4,title:"Descri\xe7\xe3o (opcional)",name:"anexos[".concat(r,"].descricao"),form:o}),r<o.getValues("anexos").length-1&&(0,s.jsx)(P.Z,{})]},r))};var N=t(41088),M=t(88771),O=t(1322),R=t(3893);let T=e=>{var a;let{id:t,btnClose:o,handleConfirmNew:y,handleModalClose:S,newChange:P,manualUrl:T,outsideID:E}=e,[V,k]=(0,i.useState)(!1),[A,q]=(0,i.useState)(null),z=n(),H=t&&t>0?"edit":"new",F=z.pathname,{title:U}=(0,i.useContext)(r.f),{setId:_}=(0,i.useContext)(l.X),{loggedUnity:L,user:X}=(0,i.useContext)(C.V),[$,B]=(0,i.useState)([]),[G,J]=(0,i.useState)(!1),{startLoading:K,stopLoading:Q}=(0,N.Z)(),[W,Y]=(0,i.useState)(!1),[ee,ea]=(0,i.useState)(!1),et=(0,h.cI)({mode:"onChange"}),es=async e=>{K();let a={...e,unidadeID:L.unidadeID,usuarioID:X.usuarioID,removedItems:$};console.log(a);try{"new"===H?await c.h.post("cadastros/produto/new/insertData",a).then(e=>{y?y(e.data,"produtos"):(z.push("".concat((0,b.g_)(F))),_(e.data.id)),f.ZP.success(b.OD.successNew)}):"edit"===H&&(await c.h.post("".concat(F,"/updateData/").concat(t),a),f.ZP.success(b.OD.successUpdate))}catch(s){s.response&&409===s.response.status?f.ZP.error(b.OD.errorRepeated):console.log(s)}finally{Q()}},eo=async()=>{try{await c.h.delete("".concat(F,"/").concat(t,"/").concat(X.usuarioID,"/").concat(L.unidadeID)),_(null),k(!1),f.ZP.success(b.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(b.OD.pendingDelete),k(!1)):console.log(e)}},en=async()=>{try{let e="new"===H?"cadastros/produto/new/getData/".concat(L.unidadeID):"".concat(F,"/getData/").concat(t,"/").concat(L.unidadeID);await c.h.post(e).then(e=>{q(e.data),et.reset(e.data)})}catch(a){console.log(a)}},ei=(e,a)=>{e.produtoAnexoID&&B([...$,e.produtoAnexoID]);let t=et.getValues("anexos").filter((e,t)=>t!==a);et.setValue("anexos",t),J(!G)},er=()=>{let e=[...et.getValues("anexos"),{nome:"",obrigatorio:1,status:1,descricao:"",observacao:""}];et.setValue("anexos",e),J(!G)},el=()=>{Y(!0)},ec=async()=>{ea(!0)},ed=e=>{Y(!1),et.setValue("classificacao.fields",e),ea(!ee)};return(0,i.useEffect)(()=>{en(),setTimeout(()=>{et.trigger()},300)},[t]),(0,i.useEffect)(()=>{P&&et.handleSubmit(es)()},[P]),(0,s.jsxs)(s.Fragment,{children:[!A&&(0,s.jsx)(Z.Z,{}),A&&(0,s.jsxs)("form",{onSubmit:et.handleSubmit(es),className:"space-y-3",children:[(0,s.jsx)(g.Z,{btnCancel:!0,btnNew:!y,btnSave:!0,btnClose:o,manualUrl:T,handleModalClose:S,handleSubmit:()=>et.handleSubmit(es),btnDelete:"edit"===H,onclickDelete:()=>k(!0),type:H,outsideID:E}),(0,s.jsx)(d.Z,{children:(0,s.jsx)(u.Z,{children:(0,s.jsxs)(m.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(j.Z,{xs:11,md:4,title:"Nome",name:"fields.nome",required:!0,form:et}),(0,s.jsx)(D.Z,{xs:12,md:3,title:"Unidade de medida",name:"unidadeMedida.fields",value:null==A?void 0:A.unidadeMedida.fields,required:!0,options:A.unidadeMedida.options,form:et,helpText:"Selecione a unidade de medida"}),(0,s.jsx)(D.Z,{xs:12,md:3,title:"Classificação",name:"classificacao.fields",value:null==A?void 0:null===(a=A.classificacao)||void 0===a?void 0:a.fields,options:A.classificacao.options,helpText:"Selecione a classificação",createNew:el,form:et}),(0,s.jsx)(R.Z,{xs:"12",md:"2",title:"Limpeza",name:"fields.limpeza",value:A.fields.limpeza,form:et,helpText:"Este produto ser\xe1 listado nos formul\xe1rios do POP2 de Limpeza e Higieniza\xe7\xe3o"})]})})}),(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(x.Z,{title:"Anexos"}),(0,s.jsx)(u.Z,{children:(0,s.jsxs)(m.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(I,{removeAnexo:ei,type:H,form:et},G),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)(p.Z,{variant:"outlined",color:"primary",sx:{mt:1},startIcon:(0,s.jsx)(w.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){er()},children:"Inserir Anexo"})})]})})]})]}),(0,s.jsx)(v.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+U.title,openModal:V,handleClose:()=>k(!1),handleSubmit:eo,btnCancel:!0,btnConfirm:!0}),(0,s.jsx)(O.Z,{title:"Nova Classifica\xe7\xe3o de Produto",size:"md",openModal:W,setOpenModal:Y,handleSave:ec,children:(0,s.jsx)(M.Z,{manualUrl:"/cadastros/classificacao-produto",btnClose:!0,handleModalClose:()=>Y(!1),newChange:ee,handleConfirmNew:ed,outsideID:!0})})]})};var E=T}}]);