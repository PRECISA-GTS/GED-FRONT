"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2477],{16247:function(e,n,t){var l=t(85893),i=t(54225),o=t(73812),a=t(86378),s=t(21609),r=t(72819),c=t(67294),d=t(60664);let m=e=>{let{anchorEl:n,open:t,handleClose:m,handleClick:u,actionsData:p}=e,[x,h]=(0,c.useState)(!1),[b,f]=(0,c.useState)(null),j=e=>{if(e.status>=50){let n="".concat(d.Y,"uploads/").concat(e.unidadeID,"/").concat(e.module,"/relatorio/original/").concat(e.usuarioID,"-").concat(e.id,"-").concat(e.module,".pdf");window.open(n,"_blank")}else window.open("/relatorio/".concat(e.route),"_blank")};return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)(i.Z,{type:"button",onClick:u,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,l.jsx)(s.Z,{icon:"octicon:chevron-down-12"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"A\xe7\xf5es"})]}),(0,l.jsx)(o.Z,{id:"basic-menu",anchorEl:n,open:t,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:null==p?void 0:p.map(e=>(0,l.jsxs)(a.Z,{onClick(){m()},disabled:!!e.disabled,style:{textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[e.identification?(0,l.jsxs)("span",{style:{padding:"0 7px"},children:[(0,l.jsx)("span",{children:e.identification})," -"]}):(0,l.jsx)(s.Z,{icon:e.icon}),"report"==e.type?(0,l.jsx)("a",{onClick:()=>j(e),children:e.name}):(0,l.jsx)("p",{onClick:e.modal?()=>{h(!0),f(e)}:e.action,children:e.name})]},e.id))}),b&&(0,l.jsx)(r.Z,{title:b.name,handleConclusion:b.action,size:b.size,setOpenModal:h,openModal:x,fullHeight:b.fullHeight,children:b.component})]})};n.Z=m},92477:function(e,n,t){t.d(n,{Z:function(){return z}});var l=t(85893),i=t(11163),o=t.n(i),a=t(67294),s=t(21609),r=t(71798),c=t(40039),d=t(83830);t(7071);var m=t(61225),u=t(16247),p=t(54225),x=t(41664),h=t.n(x),b=t(41088),f=t(82555);let j=e=>{let{btnSend:n,btnSave:t,btnNew:i,btnNext:r,disabled:d,disabledSend:m,disabledSubmit:u,handleSubmit:x,handleSend:j,iconConclusion:g,titleConclusion:v,btnNewModal:Z,handleNewModal:y}=e,C=o(),{isLoading:N}=(0,b.Z)(),{data:k}=(0,f.O)(),{hasPermission:w}=(0,a.useContext)(c.V);return(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[i&&w(C.pathname,"inserir")&&(0,l.jsx)(h(),{href:"".concat(C.pathname,"/novo"),children:(0,l.jsxs)(p.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,l.jsx)(s.Z,{icon:"ic:outline-plus"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"Novo"})]})}),Z&&w(C.pathname,"inserir")&&(0,l.jsxs)(p.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},onClick:y,children:[(0,l.jsx)(s.Z,{icon:"ic:outline-plus"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"Novo"})]}),n&&k&&w(C.pathname,"editar")&&(0,l.jsxs)(p.Z,{onClick:j,type:"button",variant:"contained",size:"medium",color:"primary",readOnly:!0,disabled:d||m,sx:{display:"flex",gap:2},children:[(0,l.jsx)(s.Z,{icon:null!=g?g:"carbon:send-filled"}),(0,l.jsx)("span",{className:"hidden sm:block",children:v})]}),t&&w(C.pathname,"editar")&&(0,l.jsxs)(p.Z,{onClick:x,type:"submit",variant:"contained",size:"medium",disabled:d||u,sx:{display:"flex",gap:2},children:[(0,l.jsx)(s.Z,{icon:"mdi:check-bold"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"Salvar"})]}),r&&(0,l.jsxs)(p.Z,{onClick:x,type:"submit",variant:"outlined",size:"medium",color:N?"secondary":"primary",disabled:d||N,children:[(0,l.jsx)(s.Z,{icon:"grommet-icons:form-next-link"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"Avan\xe7ar"})]})]})};var g=t(17575);let v=e=>{let{routes:n,currentUrl:t,btnCancel:i,btnDelete:o,btnStatus:r,btnClose:d,handleModalClose:m,handleBtnStatus:u,status:x,setId:h,router:b,type:f,onclickDelete:j}=e,{hasPermission:v}=(0,a.useContext)(c.V);return(0,l.jsxs)("div",{className:"flex gap-2",children:[i&&!d&&v(b.pathname,"ler")&&(0,l.jsx)(g.Z,{title:"Voltar p\xe1gina",placement:"top",children:(0,l.jsx)(p.Z,{onClick(){h(null),"new"==f&&b.push(b.pathname)},type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,l.jsx)(s.Z,{icon:"grommet-icons:form-previous-link"})})}),o&&v(b.pathname,"excluir")&&(0,l.jsx)(g.Z,{title:"Excluir formul\xe1rio",placement:"top",children:(0,l.jsx)(p.Z,{type:"button",onClick:j,variant:"outlined",color:"error",size:"medium",sx:{display:"flex",gap:2},children:(0,l.jsx)(s.Z,{icon:"solar:trash-bin-minimalistic-2-outline"})})}),d&&(0,l.jsx)(p.Z,{type:"button",onClick:m,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:(0,l.jsx)("span",{className:"hidden sm:block",children:"Fechar"})})]})};var Z=t(66136),y=t(73812),C=t(86378),N=t(72819),k=t(60664);let w=e=>{let{anchorEl:n,open:t,handleClose:i,handleClick:o,actionsData:r}=e,[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),x=e=>{if(e.status>=50){let n="".concat(k.Y,"uploads/").concat(e.unidadeID,"/").concat(e.module,"/relatorio/original/").concat(e.usuarioID,"-").concat(e.id,"-").concat(e.module,".pdf");window.open(n,"_blank")}else window.open("/relatorio/".concat(e.route),"_blank")};return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)(p.Z,{type:"button",onClick:o,variant:"outlined",color:"warning",size:"medium",sx:{display:"flex",alignItems:"end",gap:2},children:[(0,l.jsx)(s.Z,{icon:"octicon:chevron-down-12"}),(0,l.jsx)("span",{className:"hidden sm:block",children:"N\xe3o Conformidade"})]}),(0,l.jsx)(y.Z,{id:"basic-menu",anchorEl:n,open:t,onClose:i,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:r&&r.length>0&&(null==r?void 0:r.map(e=>e?(0,l.jsxs)(C.Z,{onClick(){i()},disabled:!!e.disabled,sx:{textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(null==e?void 0:e.identification)?(0,l.jsxs)("span",{style:{padding:"0 7px"},children:[(0,l.jsx)("span",{children:e.identification})," -"]}):(0,l.jsx)(s.Z,{icon:e.icon,className:e.iconClass}),"report"==e.type?(0,l.jsx)("a",{onClick:()=>x(e),children:e.name}):(0,l.jsx)("p",{onClick:e.modal?()=>{d(!0),u(e)}:e.action,children:e.name})]},e.id):null))}),m&&(0,l.jsx)(N.Z,{title:m.name,handleConclusion:m.action,size:m.size,setOpenModal:d,openModal:c,fullHeight:m.fullHeight,children:m.component})]})};var M=t(78432),P=t(87536);let S=e=>{let{id:n,btnCancel:t,btnSave:i,btnSend:p,btnNext:x,btnStatus:h,handleSubmit:f,manualUrl:g,btnNew:y,btnClose:C,handleModalClose:N,disabledSubmit:S,handleSend:z,componentSaveReport:I,iconConclusion:D,titleConclusion:R,disabledSend:E,handleBtnStatus:O,onclickDelete:V,btnDelete:_,btnPrint:A,disabledPrint:L,disabled:T,actions:F,actionsData:B,type:H,module:U,status:X,partialRoute:Y,outsideID:q,btnNewModal:J,handleNewModal:Q,actionsNC:W}=e,G=o(),{routes:K,user:$}=(0,a.useContext)(c.V),{setId:ee,setModelID:en,setRecebimentoMpID:et}=(0,a.useContext)(d.X),[el,ei]=(0,a.useState)(!1),[eo,ea]=(0,a.useState)(null),[es,er]=(0,a.useState)(null),{isLoading:ec}=(0,b.Z)(),{settings:ed}=(0,a.useContext)(Z.J6),[em,eu]=(0,a.useState)(null),ep=(0,P.cI)({mode:"onChange"}),ex=(0,m.Z)("(min-width:640px)"),eh=Boolean(eo),eb=Boolean(es),ef=e=>{ea(e.currentTarget)},ej=e=>{er(e.currentTarget)},eg=()=>{ea(null)},ev=()=>{er(null)},eZ="new"===H&&Y?(0,r.g_)((0,r.g_)(G.pathname)):"new"===H||Y?(0,r.g_)(G.pathname):G.pathname;Object.keys(G.query).length>0&&(eZ+="?".concat(new URLSearchParams(G.query).toString())),s.Z,s.Z,s.Z;//! NÃ£o Conformidades
let ey=()=>{if("recebimentoMp"===U){let e=ep.getValues("new");et(n),en(e.modelo.id),G.push("/formularios/recebimento-mp/novo/?aba=nao-conformidade")}},eC=(e,n)=>{ee(e),G.push(n)},eN=async()=>{try{let e=null;"recebimentoMp"===U&&(e={endpoint:"formularios/recebimento-mp/nao-conformidade/getNCRecebimentoMp",route:"/formularios/recebimento-mp/?aba=nao-conformidade",componentNewNC:(0,l.jsx)(M.Z,{type:"form",data:null,form:ep})});let t=await k.h.post(e.endpoint,{id:n}),i={icon:"icons8:plus",name:"Nova N\xe3o Conformidade",modal:!0,component:e.componentNewNC,action:ey,size:"sm",disabled:!1},o=t.data.map(n=>{if(1===$.papelID||n.fornecedorPreenche)return{icon:"typcn:warning-outline",name:n.nome,iconClass:"text-yellow-600",action:()=>eC(n.id,e.route),disabled:!1}}),a=1===$.papelID?[i,...o]:o;eu(a)}catch(s){console.log(s)}};return(0,a.useEffect)(()=>{let e=()=>{ei(!1),window.scrollY>0?ei(!0):ei(!1)};return eN(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"sticky ".concat(q?"-top-[4.5rem] px-4 bg-transparent":"top-[4.5rem]","  pb-2 mb-2 z-50 ").concat("dark"==ed.mode?"bg-[#161c24]":"bg-[#F7F7F9]"),children:(0,l.jsxs)("div",{className:"flex items-center justify-between w-full ",style:{zIndex:1e3},children:[(0,l.jsx)(v,{routes:K,currentUrl:eZ,btnCancel:t,btnDelete:_,btnStatus:h,btnClose:C,handleModalClose:N,status:X,handleBtnStatus:O,onclickDelete:V,setId:ee,router:G,type:H}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[W&&em&&(0,l.jsx)(w,{anchorEl:es,open:eb,handleClose:ev,handleClick:ej,disabled:T,disabledPrint:L,btnPrint:A,actionsData:em,matches:ex}),F&&(0,l.jsx)(u.Z,{anchorEl:eo,open:eh,handleClose:eg,handleClick:ef,disabled:T,disabledPrint:L,btnPrint:A,actionsData:B,matches:ex}),(0,l.jsx)(j,{btnSave:i,btnNew:y,btnSend:p,btnNext:x,manualUrl:g,routes:K,currentUrl:eZ,handleSubmit:f,disabled:T,disabledSend:E,disabledSubmit:S,handleSend:z,iconConclusion:D,titleConclusion:R,btnNewModal:J,handleNewModal:Q})]})]})})})};var z=S},84220:function(e,n,t){var l=t(85893),i=t(79072),o=t(55343),a=t(35966),s=t(67836),r=t(70918),c=t(87536),d=t(53934),m=t(62097),u=t(51514);let p=e=>{var n;let{xs:t,md:p,title:x,options:h,name:b,type:f,limitTags:j,value:g,required:v,control:Z,disabled:y,multiple:C,setValue:N,errors:k,onChange:w,className:M,createNew:P,handleRegistroEstabelecimento:S,helpText:z,alertRequired:I,helpTextPosition:D,opacity:R}=e,E=(0,m.Z)(),{settings:O}=(0,u.r)(),{mode:V}=O,_=P?[{nome:"-- Novo --"},...null!=h?h:[]]:h;return(0,l.jsx)(i.ZP,{item:!0,xs:t,md:p,sx:{my:1},className:M,children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(o.Z,{fullWidth:!0,children:(0,l.jsx)(c.Qr,{name:b,control:Z,defaultValue:g,rules:{required:v},render(e){let{field:t}=e;return(0,l.jsx)(a.Z,{...t,multiple:C,limitTags:j,size:"small",options:_,getOptionLabel:e=>null==e?void 0:e.nome,value:C&&t.value&&t.value.length>0?t.value.map(e=>h.find(n=>n.id===e.id)):null!==(n=t.value)&&void 0!==n?n:{nome:""},disabled:y,onChange(e,n){n&&"-- Novo --"==e.target.innerText?P():(w&&w(n),N(b,n))},renderInput:e=>(0,l.jsx)(s.Z,{...e,label:x,placeholder:x,error:!!k,sx:{opacity:R?.4:1,"& .MuiInputBase-input":{padding:"4px 14px !important"},...I&&!(null==t?void 0:t.value)&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:E.palette.error.main},"&:hover fieldset":{borderColor:E.palette.error.main},"&.Mui-focused fieldset":{borderColor:E.palette.error.main}},"& .MuiInputLabel-root":{color:E.palette.error.main},"& .MuiInputLabel-root.Mui-focused":{color:E.palette.error.main}}}}),PaperComponent(e){let{children:n}=e;return(0,l.jsx)(r.Z,{sx:{"& ul":{border:"dark"==O.mode?"1px solid rgba(".concat(E.palette.customColors.main,", 0.32)"):"null",borderRadius:"8px"}},children:n})},noOptionsText:"Sem op\xe7\xf5es"})}})}),z&&(0,l.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,l.jsx)(d.Z,{text:z,position:null!=D?D:"top"})})]})})};n.Z=p},78432:function(e,n,t){var l=t(85893),i=t(79072),o=t(18194),a=t(67294),s=t(60664),r=t(40039),c=t(84220);let d=e=>{let{type:n,data:t,form:d}=e,{loggedUnity:m}=(0,a.useContext)(r.V),[u,p]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),b=async()=>{try{let e=await s.h.post("/formularios/recebimento-mp/nao-conformidade/getModels",{unidadeID:m.unidadeID});console.log("\uD83D\uDE80 ~ response:",e.data),p(e.data)}catch(n){console.log(n)}},f=async()=>{try{let e=await s.h.post("/formularios/recebimento-mp/nao-conformidade/getRecebimentoMPNC",{unidadeID:m.unidadeID});h(e.data)}catch(n){console.log(n)}};return(0,a.useEffect)(()=>{b(),f()},[t]),(0,l.jsxs)("div",{className:"flex flex-col gap-8",children:["form"===n&&(0,l.jsx)(o.Z,{data:t}),(0,l.jsxs)(i.ZP,{container:!0,spacing:4,children:["list"===n&&(0,l.jsx)(c.Z,{xs:12,md:6,title:"Recebimento de MP",name:"new.recebimento",options:null!=x?x:[],register:d.register,setValue:d.setValue,control:d.control,helpText:"Selecione o Recebimento de MP para lan\xe7ar uma nova n\xe3o conformidade"}),u&&(0,l.jsx)(c.Z,{xs:12,md:"form"===n?12:6,title:"Modelo de formul\xe1rio",name:"new.modelo",options:null!=u?u:[],value:(null==t?void 0:t.modelo)||(null==u?void 0:u.length)===1?u[0]:{nome:""},register:d.register,setValue:d.setValue,control:d.control,helpText:"Selecione um modelo de formul\xe1rio para o preenchimento desta n\xe3o conformidade para este Recebimento de MP"})]})]})};n.Z=d},18194:function(e,n,t){var l=t(85893),i=t(79072),o=t(17575),a=t(11163),s=t(67294),r=t(21609),c=t(7071),d=t(40039),m=t(83830);let u=e=>{let{data:n}=e;if(!n)return;let t=(0,a.useRouter)(),{user:u}=(0,s.useContext)(d.V),{setId:p}=(0,s.useContext)(m.X),x=()=>{p(n.recebimento.id),t.push("/formularios/recebimento-mp/")};return(0,l.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,l.jsxs)(i.ZP,{item:!0,xs:12,md:4,children:[(0,l.jsx)("label",{className:"opacity-60",children:"Fornecedor"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.Z,{icon:"mdi:truck-fast-outline"}),(0,l.jsx)("p",{children:n.recebimento.fornecedor})]})]}),(0,l.jsxs)(i.ZP,{item:!0,xs:12,md:3,children:[(0,l.jsx)("label",{className:"opacity-60",children:"Data e hora do recebimento"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(r.Z,{icon:"tabler:calendar-check"}),(0,l.jsx)("p",{children:"".concat(n.recebimento.dataRecebimentoMp," ").concat(n.recebimento.horaRecebimentoMp)})]})]}),(0,l.jsxs)(i.ZP,{item:!0,xs:12,md:3,children:[(0,l.jsx)("label",{className:"opacity-60",children:"NF"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,l.jsx)(r.Z,{icon:"ion:document-text-outline"}),(0,l.jsx)("p",{children:n.recebimento.nfRecebimentoMp})]})]}),(0,l.jsxs)(i.ZP,{item:!0,xs:12,md:2,children:[(0,l.jsx)("label",{className:"opacity-60",children:"Recebimento"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.Z,{skin:"light",label:n.recebimento.status.label,color:n.recebimento.status.color,sx:{height:28,fontSize:"0.75rem"}}),(2!=u.papelID||n.fornecedorAcessaRecebimento)&&(0,l.jsx)(o.Z,{title:"Acessar Recebimento de MP",placement:"top",children:(0,l.jsx)("div",{className:"cursor-pointer",children:(0,l.jsx)(r.Z,{icon:"ci:external-link",onClick:x})})})]})]})]})};n.Z=u},41088:function(e,n,t){var l=t(67294),i=t(83830);let o=()=>{let{isLoading:e,setIsLoading:n}=(0,l.useContext)(i.X),t=()=>{n(!0)},o=()=>{setTimeout(()=>{n(!1)},500)};return{isLoading:e,startLoading:t,stopLoading:o}};n.Z=o}}]);