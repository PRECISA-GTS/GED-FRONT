(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{50594:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var s=r(t(64938)),i=t(85893),a=(0,s.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");n.Z=a},64938:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=t(15227)},15227:function(e,n,t){"use strict";t.r(n),t.d(n,{capitalize:function(){return s.Z},createChainedFunction:function(){return i.Z},createSvgIcon:function(){return a.Z},debounce:function(){return l.Z},deprecatedPropType:function(){return o},isMuiElement:function(){return c.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return m},setRef:function(){return x},unstable_ClassNameGenerator:function(){return b},unstable_useEnhancedEffect:function(){return f.Z},unstable_useId:function(){return p.Z},unsupportedProp:function(){return h},useControlled:function(){return g.Z},useEventCallback:function(){return Z.Z},useForkRef:function(){return j.Z},useIsFocusVisible:function(){return v.Z}});var r=t(37078),s=t(36622),i=t(46207),a=t(54235),l=t(75400),o=function(e,n){return()=>null},c=t(7335),u=t(47505),d=t(57577);t(87462);var m=function(e,n){return()=>null},x=t(7960).Z,f=t(63289),p=t(49669),h=function(e,n,t,r,s){return null},g=t(42293),Z=t(26432),j=t(84771),v=t(51625);let b={configure(e){console.warn("MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.\n\nYou should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead\n\nThe detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401\n\nThe updated documentation: https://mui.com/guides/classname-generator/"),r.Z.configure(e)}}},24527:function(e,n,t){"use strict";var r=t(85893),s=t(79072),i=t(49837),a=t(91359),l=t(61953),o=t(29630),c=t(21609),u=t(62097);let d=e=>{let{xs:n,md:t,icon:d,id:m,title:x,subtitle:f,action:p,handleClick:h,linkedsForms:g}=e,Z=(0,u.Z)();return(0,r.jsx)(s.ZP,{item:!0,xs:n,md:t,children:(0,r.jsx)(i.Z,{sx:{"&:hover":{backgroundColor:"".concat(Z.palette.action.hover)},height:"100%",display:"flex",flexDirection:"column"},onClick:h,className:"cursor-pointer shadow-xl transition-all",children:(0,r.jsx)(a.Z,{className:"text-center",sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,r.jsxs)(l.Z,{display:"flex",flexDirection:"column",alignItems:"center",sx:{gap:3,padding:6},children:[(0,r.jsx)(c.Z,{icon:d,width:38,className:"text-[#F8D552]"}),(0,r.jsx)(o.Z,{variant:"h6",className:"!font-extrabold",children:x}),(0,r.jsx)(o.Z,{variant:"subtitle2",children:f}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c.Z,{icon:"new"==p?"icon-park-solid:add-one":"edit"==p?"grommet-icons:form-next-link":"tabler:select",width:16}),(0,r.jsx)(o.Z,{variant:"body2",color:"primary",children:"new"==p?"Criar novo":"edit"==p?"Acessar":"Selecionar"})]}),(e=>{if(!g)return;let n=g.find(n=>n===e);return!n})(m)&&(0,r.jsx)(o.Z,{variant:"body2",color:"error",children:"Formul\xe1rio n\xe3o vinculado"})]})})})})};n.Z=d},55148:function(e,n,t){"use strict";var r=t(85893),s=t(79072),i=t(55343),a=t(35966),l=t(67836),o=t(87536),c=t(53934),u=t(30944);let d=e=>{let{xs:n,md:t,title:d,options:m,form:x,name:f,limitTags:p,value:h,required:g,disabled:Z,multiple:j,onChange:v,className:b,keyProps:y,createNew:C,helpText:N,helpTextPosition:w}=e,k=C?[{id:null,name:"-- Novo --"},...null!=m?m:[]]:m,{key:D}=(0,u.L0)();return(0,r.jsx)(s.ZP,{item:!0,xs:n,md:t,sx:{my:1},className:b,children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.Z,{fullWidth:!0,children:(0,r.jsx)(o.Qr,{name:f,control:x.control,rules:{required:g},render(e){var n;let{field:t}=e;return(0,r.jsx)(a.Z,{options:k.map(e=>e.name),value:null!=h?h:null===(n=x.getValues(f))||void 0===n?void 0:n.name,onChange(e,n){let t=k.find(e=>e.name===n);x.setValue(f,null!=t?t:null),v&&v(n)},renderInput(e){var n;return(0,r.jsx)(l.Z,{...e,id:"customSelect",size:"small",label:d,placeholder:d,error:!!x.formState.errors[f],helperText:null===(n=x.formState.errors[f])||void 0===n?void 0:n.message})}},y||D)}})}),N&&(0,r.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,r.jsx)(c.Z,{text:N,position:null!=w?w:"top"})})]})})};n.Z=d},39178:function(e,n,t){"use strict";t.r(n);var r=t(85893),s=t(67294),i=t(11163),a=t.n(i),l=t(60664),o=t(79072),c=t(55148),u=t(40039),d=t(21609);let m=e=>{let{form:n,onSubmit:t}=e,{loggedUnity:i}=(0,s.useContext)(u.V),m=a(),x=m.pathname,[f,p]=(0,s.useState)(null),[h,g]=(0,s.useState)([]),Z=async()=>{try{let e=await l.h.post("".concat(x,"/getCategories"),{unidadeID:i.unidadeID,allRisks:!0});p(e.data)}catch(n){console.log(n)}},j=async()=>{try{let e=await l.h.post("/formularios/fornecedor/getModels",{unidadeID:i.unidadeID});g(e.data)}catch(n){console.log(n)}};return(0,s.useEffect)(()=>{Z(),j(),setTimeout(()=>{n.trigger()},300)},[]),(0,r.jsx)("div",{className:"flex flex-col gap-6",children:f&&f.map((e,s)=>(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{icon:e.icon,className:"text-yellow-500 text-3xl"}),(0,r.jsx)("p",{className:"font-semibold text-lg",children:e.nome})]}),(0,r.jsx)("div",{className:"flex flex-col gap-2 ml-10 ",children:e.riscos.map((e,i)=>{var a;return(0,r.jsx)("form",{onSubmit:n.handleSubmit(t),children:(0,r.jsxs)(o.ZP,{container:!0,spacing:4,className:"grid grid-cols-2 items-center space-y-2",children:[(0,r.jsx)(o.ZP,{item:!0,xs:12,md:3,children:(0,r.jsx)("p",{children:e.risco})}),(0,r.jsx)(c.Z,{xs:12,md:9,title:"Modelo de formul\xe1rio",name:"fornecedorCategoriaRiscoID".concat(e.fornecedorCategoriaRiscoID),value:null===(a=n.getValues("parFormularioID"))||void 0===a?void 0:a.name,form:n,options:h,required:!0})]},s)})})})]}))})};n.default=m},90226:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var r=t(85893),s=t(79072),i=t(54225),a=t(83830),l=t(87536),o=t(67294),c=t(24527),u=t(43816),d=t(1890),m=t(77745),x=t(95398),f=t(44642),p=t(76779),h=t(80562),g=t(50594);let Z=e=>{let{title:n,onClose:t,open:s,children:i,fullWidth:a,size:l,dividers:o,DialogActionsChildren:c}=e;return(0,r.jsxs)(d.Z,{open:s,onClose:t,fullWidth:!!a,maxWidth:l,children:[(0,r.jsx)(m.Z,{className:"!px-8 !py-6",children:n}),(0,r.jsx)(h.Z,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,r.jsx)(g.Z,{})}),(0,r.jsx)(x.Z,{className:"min-w-[400px] !px-8 !py-6",dividers:o,children:(0,r.jsx)(f.Z,{children:i})}),(0,r.jsx)(p.Z,{className:"!px-8 !py-6 !pb-8",children:(0,r.jsx)("div",{className:"w-full flex justify-end",children:c})})]})};var j=t(39178),v=t(11163),b=t.n(v),y=t(60664),C=t(17288),N=t(86501);let w=e=>{let{values:n}=e,[t,d]=(0,o.useState)(!1),{setId:m}=(0,o.useContext)(a.X),{loggedUnity:x}=(0,C.a)(),f=b(),p=f.pathname,h=(0,l.cI)({mode:"onChange"}),[g,v]=(0,o.useState)([]),w=e=>{m(e)},k=async()=>{try{let e=await y.h.post("".concat(p,"/getLinkingForms"),{unidadeID:x.unidadeID});console.log("\uD83D\uDE80 ~ getLinkingForms: ",e.data),h.reset(e.data.result),v(e.data.arrLinkedsForm)}catch(n){console.log(n)}},D=async e=>{let n={riscos:e,unidadeID:x.unidadeID};try{let t=await y.h.post("".concat(p,"/updateLinkingForms"),n);200===t.status&&(N.ZP.success("Formul\xe1rios vinculados com sucesso!"),await k())}catch(r){N.ZP.error("Erro ao vincular formul\xe1rios!")}finally{d(!1)}};return(0,o.useEffect)(()=>{k()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{btnConfig:!0,btnBack:!0,btnNew:!0,type:"new",partialRoute:!1,handleOpenConfig:()=>d(!0)}),(0,r.jsx)(s.ZP,{container:!0,spacing:4,children:n&&n.map((e,n)=>(0,r.jsx)(c.Z,{xs:12,md:3,icon:"fluent:form-multiple-48-regular",id:e.id,title:e.nome,subtitle:"Ciclo de ".concat(e.ciclo," dias"),action:"edit",handleClick:()=>w(e.id),linkedsForms:g},n))}),t&&(0,r.jsx)(Z,{open:t,onClose:()=>d(!1),size:"sm",fullWidth:!0,title:"Vincular Formul\xe1rios",DialogActionsChildren:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{onClick:()=>d(!1),children:"Fechar"}),(0,r.jsx)(i.Z,{variant:"contained",color:"primary",onClick:h.handleSubmit(D),disabled:h.formState.isSubmitting,children:"Salvar"})]}),children:(0,r.jsx)(j.default,{form:h,onSubmit:D})})]})};var k=w},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);