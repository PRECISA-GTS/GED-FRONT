"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8996],{82747:function(e,n,o){function i(e){if(!e||14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let n=e.length-2,o=e.substring(0,n),i=e.substring(n),s=0,r=n-7;for(let l=n;l>=1;l--)s+=o.charAt(n-l)*r--,r<2&&(r=9);let a=s%11<2?0:11-s%11;if(a!=i.charAt(0))return!1;n+=1,o=e.substring(0,n),s=0,r=n-7;for(let t=n;t>=1;t--)s+=o.charAt(n-t)*r--,r<2&&(r=9);return(a=s%11<2?0:11-s%11)==i.charAt(1)}function s(e){let n;if(!e||11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let o=0;for(let i=1;i<=9;i++)o+=parseInt(e.substring(i-1,i))*(11-i);if((10==(n=10*o%11)||11===n)&&(n=0),n!==parseInt(e.substring(9,10)))return!1;o=0;for(let s=1;s<=10;s++)o+=parseInt(e.substring(s-1,s))*(12-s);return(10==(n=10*o%11)||11===n)&&(n=0),n===parseInt(e.substring(10,11))}function r(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}o.d(n,{dI:function(){return r},sw:function(){return s},zk:function(){return i}})},48996:function(e,n,o){o.r(n);var i=o(85893),s=o(87536),r=o(67294),l=o(60664),a=o(61953),t=o(79072),d=o(54225),c=o(29630),u=o(82747),m=o(11163),x=o.n(m),h=o(58316),f=o(55343),v=o(9041),p=o(19604),j=o(39063),Z=o(80562),g=o(21609),w=o(41664),y=o.n(w),S=o(29308);let C=e=>{var n,o,m,w,C,P,b,z,F,A,D,I,k,O,V,q,N,T,E,U,J,W,M;let{handleNext:_,setDataGlobal:H,dataGlobal:L}=e,R=x(),[$,B]=(0,r.useState)(null),[G,K]=(0,r.useState)(null),[Q,X]=(0,r.useState)(),[Y,ee]=(0,r.useState)(!1),[en,eo]=(0,r.useState)(null),ei=(0,r.useRef)(null),[es,er]=(0,r.useState)({showPassword:!1,showConfirmPassword:!1}),el=()=>{er({...es,showPassword:!es.showPassword})},ea=e=>{e.preventDefault()},et=()=>{er({...es,showConfirmPassword:!es.showConfirmPassword})},ed=e=>{e.preventDefault()},ec=(0,s.cI)(),eu=e=>{18===e.length?(eo((0,u.zk)(e)),(0,u.zk)(e)&&l.h.post("/registro-fornecedor/getData",{cnpj:e}).then(n=>{X(e),H({...n.data,...L,sectionOne:{cnpj:e,nomeFantasia:"",razaoSocial:"",email:""}})})):(H(null),X(null),eo(null))},em=R.query.u,ex=R.query.c,eh=R.query.e,ef=R.query.n,ev=async(e,n)=>{if(e&&n){let o={unidadeID:e,cnpj:n,nome:ef,email:eh};await l.h.post("/login-fornecedor/setAcessLink",{data:o}).then((e,n)=>{if(K(e.data[0].unidadeID),e.data&&e.data[0]&&e.data[0].cnpj){var i;eu(e.data[0].cnpj),ec.setValue("cnpj",null===(i=o.response)||void 0===i?void 0:i.data[0].cnpj),ec.setValue("email",o.email),ec.setValue("nomeFantasia",o.nome),ec.setValue("razaoSocial",o.nome),ee(!0)}})}},ep=e=>{var n,o,i,s,r,l,a,t;H({...L,unidadeID:G,sectionOne:{...null==L?void 0:L.sectionOne,nomeFantasia:e.nomeFantasia,razaoSocial:e.razaoSocial,email:e.email,senha:e.senha},sectionTwo:{...null==L?void 0:L.sectionTwo,logradouro:null!==(r=null==L?void 0:null===(n=L.sectionTwo)||void 0===n?void 0:n.logradouro)&&void 0!==r?r:"--",bairro:null!==(l=null==L?void 0:null===(o=L.sectionTwo)||void 0===o?void 0:o.bairro)&&void 0!==l?l:"--",cidade:null!==(a=null==L?void 0:null===(i=L.sectionTwo)||void 0===i?void 0:i.cidade)&&void 0!==a?a:"--",uf:null!==(t=null==L?void 0:null===(s=L.sectionTwo)||void 0===s?void 0:s.uf)&&void 0!==t?t:"--"}}),_(e)};return(0,r.useEffect)(()=>{em&&ex&&(ev(em,ex),setTimeout(()=>{var e;null==ei||null===(e=ei.current)||void 0===e||e.focus()},500))},[em,ex]),(0,r.useEffect)(()=>{var e,n,o,i,s,r;X(null==L?void 0:null===(e=L.sectionOne)||void 0===e?void 0:e.cnpj),ec.setValue("cnpj",null==L?void 0:null===(n=L.sectionOne)||void 0===n?void 0:n.cnpj),ec.setValue("nomeFantasia",null==L?void 0:null===(o=L.sectionOne)||void 0===o?void 0:o.nomeFantasia),ec.setValue("razaoSocial",null==L?void 0:null===(i=L.sectionOne)||void 0===i?void 0:i.razaoSocial),ec.setValue("email",null==L?void 0:null===(s=L.sectionOne)||void 0===s?void 0:s.email),X(null==L?void 0:null===(r=L.sectionOne)||void 0===r?void 0:r.cnpj)},[]),(!Y||L)&&(0,i.jsxs)("form",{onSubmit:ec.handleSubmit(ep),children:[(0,i.jsxs)(a.Z,{sx:{mb:4},children:[(0,i.jsx)(c.Z,{variant:"h5",children:"Informa\xe7\xf5es obrigat\xf3rios"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:"Insira as informa\xe7\xf5es obrigat\xf3rias"})]}),(0,i.jsxs)(t.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(S.Z,{xs:12,md:6,title:"CNPJ",name:"cnpj",defaultValue:null==L?void 0:null===(n=L.sectionOne)||void 0===n?void 0:n.cnpj,mask:"cnpj",form:ec,onChange:e=>eu(e)}),!en&&null!==en&&(0,i.jsx)(t.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(p.Z,{severity:"warning",children:"CNPJ inv\xe1lido!"})}),L&&(null==L?void 0:L.status)==="notAuthorized"&&(0,i.jsx)(t.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(p.Z,{severity:"warning",children:"Antes de realizar o cadastro, \xe9 necess\xe1rio que uma f\xe1brica habilite o seu CNPJ como um fornecedor."})}),L&&(null==L?void 0:L.status)==="hasUserNotUnity"&&(0,i.jsxs)(t.ZP,{item:!0,xs:12,md:12,children:[(0,i.jsx)("h3",{children:"CNPJ j\xe1 cadastrado"}),(0,i.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:8},children:[(0,i.jsxs)(a.Z,{children:[(0,i.jsxs)(a.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Nome Fantasia:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==L?void 0:null===(o=L.unity)||void 0===o?void 0:o.nomeFantasia})]}),(0,i.jsxs)(a.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Email Institucional:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==L?void 0:null===(m=L.unity)||void 0===m?void 0:m.email})]})]}),(0,i.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{htmlFor:"input-password",color:(null===(w=ec.formState)||void 0===w?void 0:w.errors.senha)?"error":"",children:"Senha"}),(0,i.jsx)(j.Z,{label:"Senha",size:"small",id:"input-password",inputRef:ei,type:es.showPassword?"text":"password",name:"senha",...register("senha"),endAdornment:(0,i.jsx)(v.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:el,onMouseDown:ea,children:(0,i.jsx)(g.Z,{icon:es.showPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:(null===(C=ec.formState)||void 0===C?void 0:C.errors.senha)&&!0,helperText:(null===(P=ec.formState)||void 0===P?void 0:P.errors.senha)&&(null===(b=ec.formState)||void 0===b?void 0:b.errors.senha.message)})]})}),(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{htmlFor:"input-confirm-password",style:{color:(null===(z=ec.formState)||void 0===z?void 0:z.errors.confirmaSenha)&&"red"},children:"Confirme a senha"}),(0,i.jsx)(j.Z,{label:"Confirme a senha",name:"confirmaSenha",size:"small",...register("confirmaSenha"),id:"input-confirm-password",type:es.showConfirmPassword?"text":"password",onChange(e){B(e.target.value)},endAdornment:(0,i.jsx)(v.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:et,onMouseDown:ed,children:(0,i.jsx)(g.Z,{icon:es.showConfirmPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:(null===(F=ec.formState)||void 0===F?void 0:F.errors.confirmaSenha)&&!0}),(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"error.main"},children:(null===(A=ec.formState)||void 0===A?void 0:A.errors.confirmaSenha)&&(null===(D=ec.formState)||void 0===D?void 0:D.errors.confirmaSenha.message)})]})})]})]})]}),L&&(null==L?void 0:L.status)==="hasUserHasUnity"&&(0,i.jsxs)(t.ZP,{item:!0,xs:12,md:12,children:[(0,i.jsx)("h3",{children:"CNPJ j\xe1 cadastrado"}),(0,i.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:8},children:[(0,i.jsxs)(a.Z,{children:[(0,i.jsxs)(a.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Nome Fantasia:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==L?void 0:null===(I=L.unity)||void 0===I?void 0:I.nomeFantasia})]}),(0,i.jsxs)(a.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Email Institucional:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==L?void 0:null===(k=L.unity)||void 0===k?void 0:k.email})]})]}),(0,i.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsx)(c.Z,{href:"/fornecedor",component:y(),sx:{color:"primary.main",textDecoration:"none"},children:"Fazer login"}),(0,i.jsx)(c.Z,{href:"/fornecedor",component:y(),sx:{color:"primary.main",textDecoration:"none"},children:"Esqueceu a senha?"})]})]})]}),L&&(null==L?void 0:L.status)==="isAuthorized"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.Z,{xs:12,md:6,title:"Nome Fantasia",name:"nomeFantasia",defaultValue:(null==L?void 0:L.sectionOne.nomeFantasia)||ef,required:!0,form:ec}),(0,i.jsx)(S.Z,{xs:12,md:6,title:"Raz\xe3o Social",name:"razaoSocial",defaultValue:(null==L?void 0:null===(O=L.sectionOne)||void 0===O?void 0:O.razaoSocial)||ef,required:!0,form:ec}),(0,i.jsx)(S.Z,{xs:12,md:6,title:"Email Institucional",name:"email",defaultValue:(null==L?void 0:null===(V=L.sectionOne)||void 0===V?void 0:V.email)||eh,required:!0,form:ec}),(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{htmlFor:"input-password",color:(null===(q=ec.formState)||void 0===q?void 0:q.errors.senha)?"error":"",children:"Senha"}),(0,i.jsx)(j.Z,{size:"small",label:"Senha",id:"input-password",type:es.showPassword?"text":"password",name:"senha",...register("senha",{required:"Campo obrigat\xf3rio",minLength:{value:4,message:"Senha deve ter pelo menos 4 caracteres"}}),endAdornment:(0,i.jsx)(v.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:el,onMouseDown:ea,children:(0,i.jsx)(g.Z,{icon:es.showPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:!!(null===(N=ec.formState)||void 0===N?void 0:N.errors.senha),helperText:(null===(T=ec.formState)||void 0===T?void 0:T.errors.senha)&&(null===(E=ec.formState)||void 0===E?void 0:E.errors.senha.message)})]})}),(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{htmlFor:"input-confirm-password",style:{color:(null===(U=ec.formState)||void 0===U?void 0:U.errors.confirmaSenha)&&"red"},children:"Confirme a senha"}),(0,i.jsx)(j.Z,{label:"Confirme a senha",name:"confirmaSenha",size:"small",...ec.register("confirmaSenha",{required:"Campo obrigat\xf3rio",validate:e=>e===ec.watch("senha")||"As senhas n\xe3o coincidem"}),id:"input-confirm-password",type:es.showConfirmPassword?"text":"password",onChange(e){B(e.target.value)},endAdornment:(0,i.jsx)(v.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:et,onMouseDown:ed,children:(0,i.jsx)(g.Z,{icon:es.showConfirmPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:!!(null===(J=ec.formState)||void 0===J?void 0:J.errors.confirmaSenha)}),(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"error.main"},children:(null===(W=ec.formState)||void 0===W?void 0:W.errors.confirmaSenha)&&(null===(M=ec.formState)||void 0===M?void 0:M.errors.confirmaSenha.message)})]})})]}),(0,i.jsxs)(t.ZP,{item:!0,xs:12,children:[(0,i.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(d.Z,{disabled:!0,variant:"contained",startIcon:(0,i.jsx)(g.Z,{icon:"mdi:chevron-left",fontSize:20}),children:"Anterior"}),(0,i.jsx)(d.Z,{disabled:(null==L?void 0:L.status)=="hasUserHasUnity"||(null==L?void 0:L.status)=="notAuthorized"||!Q,type:"submit",variant:"contained",onClick:handleSubmit,endIcon:(0,i.jsx)(g.Z,{icon:"mdi:chevron-right",fontSize:20}),children:"Proximo"})]}),(null==L?void 0:L.status)!=="hasUserHasUnity"||(null==L?void 0:L.status)=="notAuthorized"&&(0,i.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",marginTop:10,flexWrap:"wrap",justifyContent:"start"},children:[(0,i.jsx)(c.Z,{sx:{mr:2,color:"text.secondary"},children:"Fazer login?"}),(0,i.jsx)(c.Z,{href:"/fornecedor",component:y(),sx:{color:"primary.main",textDecoration:"none"},children:"Login"})]})]})]})]})};n.default=C}}]);