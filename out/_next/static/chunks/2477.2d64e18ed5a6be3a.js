"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2477],{16247:function(e,n,t){var o=t(85893),i=t(54225),l=t(73812),a=t(86378),s=t(21609),r=t(72819),c=t(67294),d=t(60664);let m=e=>{let{anchorEl:n,open:t,handleClose:m,handleClick:u,actionsData:p}=e,[x,h]=(0,c.useState)(!1),[b,f]=(0,c.useState)(null),j=e=>{if(e.status>=50){let n="".concat(d.Y,"uploads/").concat(e.unidadeID,"/").concat(e.module,"/relatorio/original/").concat(e.usuarioID,"-").concat(e.id,"-").concat(e.module,".pdf");window.open(n,"_blank")}else window.open("/relatorio/".concat(e.route),"_blank")};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)(i.Z,{type:"button",onClick:u,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,o.jsx)(s.Z,{icon:"octicon:chevron-down-12"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"A\xe7\xf5es"})]}),(0,o.jsx)(l.Z,{id:"basic-menu",anchorEl:n,open:t,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:null==p?void 0:p.map(e=>(0,o.jsxs)(a.Z,{onClick(){m()},disabled:!!e.disabled,style:{textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[e.identification?(0,o.jsxs)("span",{style:{padding:"0 7px"},children:[(0,o.jsx)("span",{children:e.identification})," -"]}):(0,o.jsx)(s.Z,{icon:e.icon}),"report"==e.type?(0,o.jsx)("a",{onClick:()=>j(e),children:e.name}):(0,o.jsx)("p",{onClick:e.modal?()=>{h(!0),f(e)}:e.action,children:e.name})]},e.id))}),b&&(0,o.jsx)(r.Z,{title:b.name,handleConclusion:b.action,size:b.size,setOpenModal:h,openModal:x,fullHeight:b.fullHeight,children:b.component})]})};n.Z=m},92477:function(e,n,t){t.d(n,{Z:function(){return P}});var o=t(85893),i=t(11163),l=t.n(i),a=t(67294),s=t(21609),r=t(71798),c=t(40039),d=t(83830);t(7071);var m=t(61225),u=t(16247),p=t(54225),x=t(41664),h=t.n(x),b=t(41088),f=t(82555);let j=e=>{let{btnSend:n,btnSave:t,btnNew:i,btnNext:r,disabled:d,disabledSend:m,disabledSubmit:u,handleSubmit:x,handleSend:j,iconConclusion:g,titleConclusion:v,btnNewModal:Z,handleNewModal:y}=e,C=l(),{isLoading:N}=(0,b.Z)(),{data:k}=(0,f.O)(),{hasPermission:w}=(0,a.useContext)(c.V);return(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[i&&w(C.pathname,"inserir")&&(0,o.jsx)(h(),{href:"".concat(C.pathname,"/novo"),children:(0,o.jsxs)(p.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,o.jsx)(s.Z,{icon:"ic:outline-plus"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"Novo"})]})}),Z&&w(C.pathname,"inserir")&&(0,o.jsxs)(p.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},onClick:y,children:[(0,o.jsx)(s.Z,{icon:"ic:outline-plus"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"Novo"})]}),n&&k&&w(C.pathname,"editar")&&(0,o.jsxs)(p.Z,{onClick:j,type:"button",variant:"contained",size:"medium",color:"primary",readOnly:!0,disabled:d||m,sx:{display:"flex",gap:2},children:[(0,o.jsx)(s.Z,{icon:null!=g?g:"carbon:send-filled"}),(0,o.jsx)("span",{className:"hidden sm:block",children:v})]}),t&&w(C.pathname,"editar")&&(0,o.jsxs)(p.Z,{onClick:x,type:"submit",variant:"contained",size:"medium",disabled:d||u,sx:{display:"flex",gap:2},children:[(0,o.jsx)(s.Z,{icon:"mdi:check-bold"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"Salvar"})]}),r&&(0,o.jsxs)(p.Z,{onClick:x,type:"submit",variant:"outlined",size:"medium",color:N?"secondary":"primary",disabled:d||N,children:[(0,o.jsx)(s.Z,{icon:"grommet-icons:form-next-link"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"Avan\xe7ar"})]})]})},g=e=>{let{routes:n,currentUrl:t,btnCancel:i,btnDelete:l,btnStatus:r,btnClose:d,handleModalClose:m,handleBtnStatus:u,status:x,setId:h,router:b,type:f,onclickDelete:j}=e,{hasPermission:g}=(0,a.useContext)(c.V);return(0,o.jsxs)("div",{className:"flex gap-2",children:[i&&!d&&g(b.pathname,"ler")&&(0,o.jsx)(p.Z,{onClick(){h(null),"new"==f&&b.push(b.pathname)},type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,o.jsx)(s.Z,{icon:"grommet-icons:form-previous-link"})}),l&&g(b.pathname,"excluir")&&(0,o.jsx)(p.Z,{type:"button",onClick:j,variant:"outlined",color:"error",size:"medium",sx:{display:"flex",gap:2},children:(0,o.jsx)(s.Z,{icon:"material-symbols:delete-outline"})}),d&&(0,o.jsx)(p.Z,{type:"button",onClick:m,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:(0,o.jsx)("span",{className:"hidden sm:block",children:"Fechar"})})]})};var v=t(66136),Z=t(73812),y=t(86378),C=t(72819),N=t(60664);let k=e=>{let{anchorEl:n,open:t,handleClose:i,handleClick:l,actionsData:r}=e,[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),x=e=>{if(e.status>=50){let n="".concat(N.Y,"uploads/").concat(e.unidadeID,"/").concat(e.module,"/relatorio/original/").concat(e.usuarioID,"-").concat(e.id,"-").concat(e.module,".pdf");window.open(n,"_blank")}else window.open("/relatorio/".concat(e.route),"_blank")};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)(p.Z,{type:"button",onClick:l,variant:"outlined",color:"warning",size:"medium",sx:{display:"flex",alignItems:"end",gap:2},children:[(0,o.jsx)(s.Z,{icon:"octicon:chevron-down-12"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"N\xe3o Conformidade"})]}),(0,o.jsx)(Z.Z,{id:"basic-menu",anchorEl:n,open:t,onClose:i,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:null==r?void 0:r.map(e=>(0,o.jsxs)(y.Z,{onClick(){i()},disabled:!!e.disabled,sx:{textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[e.identification?(0,o.jsxs)("span",{style:{padding:"0 7px"},children:[(0,o.jsx)("span",{children:e.identification})," -"]}):(0,o.jsx)(s.Z,{icon:e.icon,className:e.iconClass}),"report"==e.type?(0,o.jsx)("a",{onClick:()=>x(e),children:e.name}):(0,o.jsx)("p",{onClick:e.modal?()=>{d(!0),u(e)}:e.action,children:e.name})]},e.id))}),m&&(0,o.jsx)(C.Z,{title:m.name,handleConclusion:m.action,size:m.size,setOpenModal:d,openModal:c,fullHeight:m.fullHeight,children:m.component})]})};var w=t(78432),M=t(87536);let S=e=>{let{id:n,btnCancel:t,btnSave:i,btnSend:p,btnNext:x,btnStatus:h,handleSubmit:f,manualUrl:Z,btnNew:y,btnClose:C,handleModalClose:S,disabledSubmit:P,handleSend:z,componentSaveReport:I,iconConclusion:D,titleConclusion:R,disabledSend:O,handleBtnStatus:E,onclickDelete:_,btnDelete:V,btnPrint:L,disabledPrint:T,disabled:A,actions:F,actionsData:B,type:H,module:U,status:X,partialRoute:Y,outsideID:q,btnNewModal:J,handleNewModal:Q,actionsNC:W}=e,G=l(),{routes:K}=(0,a.useContext)(c.V),{setId:$,setModelID:ee,setRecebimentoMpID:en}=(0,a.useContext)(d.X),[et,eo]=(0,a.useState)(!1),[ei,el]=(0,a.useState)(null),[ea,es]=(0,a.useState)(null),{isLoading:er}=(0,b.Z)(),{settings:ec}=(0,a.useContext)(v.J6),[ed,em]=(0,a.useState)(null),eu=(0,M.cI)({mode:"onChange"}),ep=(0,m.Z)("(min-width:640px)"),ex=Boolean(ei),eh=Boolean(ea),eb=e=>{el(e.currentTarget)},ef=e=>{es(e.currentTarget)},ej=()=>{el(null)},eg=()=>{es(null)},ev="new"===H&&Y?(0,r.g_)((0,r.g_)(G.pathname)):"new"===H||Y?(0,r.g_)(G.pathname):G.pathname;Object.keys(G.query).length>0&&(ev+="?".concat(new URLSearchParams(G.query).toString())),s.Z,s.Z,s.Z;//! NÃ£o Conformidades
let eZ=()=>{if("recebimentoMp"===U){let e=eu.getValues("new");en(n),ee(e.modelo.id),G.push("/formularios/recebimento-mp/novo/?aba=nao-conformidade")}},ey=(e,n)=>{$(e),G.push(n)},eC=async()=>{try{let e=null;"recebimentoMp"===U&&(e={endpoint:"formularios/recebimento-mp/nao-conformidade/getNCRecebimentoMp",route:"/formularios/recebimento-mp/?aba=nao-conformidade",componentNewNC:(0,o.jsx)(w.Z,{type:"form",data:null,form:eu})});let t=await N.h.post(e.endpoint,{id:n}),i={icon:"icons8:plus",name:"Nova N\xe3o Conformidade",modal:!0,component:e.componentNewNC,action:eZ,size:"sm",disabled:!1},l=t.data.map(n=>({icon:"typcn:warning-outline",name:n.nome,iconClass:"text-yellow-600",action:()=>ey(n.id,e.route),disabled:!1}));em([i,...l])}catch(a){console.log(a)}};return(0,a.useEffect)(()=>{let e=()=>{eo(!1),window.scrollY>0?eo(!0):eo(!1)};return eC(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"sticky ".concat(q?"-top-[4.5rem] px-4 bg-transparent":"top-[4.5rem]","  pb-2 mb-2 z-50 ").concat("dark"==ec.mode?"bg-[#161c24]":"bg-[#F7F7F9]"),children:(0,o.jsxs)("div",{className:"flex items-center justify-between w-full ",style:{zIndex:1e3},children:[(0,o.jsx)(g,{routes:K,currentUrl:ev,btnCancel:t,btnDelete:V,btnStatus:h,btnClose:C,handleModalClose:S,status:X,handleBtnStatus:E,onclickDelete:_,setId:$,router:G,type:H}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[W&&ed&&(0,o.jsx)(k,{anchorEl:ea,open:eh,handleClose:eg,handleClick:ef,disabled:A,disabledPrint:T,btnPrint:L,actionsData:ed,matches:ep}),F&&(0,o.jsx)(u.Z,{anchorEl:ei,open:ex,handleClose:ej,handleClick:eb,disabled:A,disabledPrint:T,btnPrint:L,actionsData:B,matches:ep}),(0,o.jsx)(j,{btnSave:i,btnNew:y,btnSend:p,btnNext:x,manualUrl:Z,routes:K,currentUrl:ev,handleSubmit:f,disabled:A,disabledSend:O,disabledSubmit:P,handleSend:z,iconConclusion:D,titleConclusion:R,btnNewModal:J,handleNewModal:Q})]})]})})})};var P=S},84220:function(e,n,t){var o=t(85893),i=t(79072),l=t(55343),a=t(35966),s=t(67836),r=t(70918),c=t(87536),d=t(53934),m=t(62097),u=t(51514);let p=e=>{var n;let{xs:t,md:p,title:x,options:h,name:b,type:f,limitTags:j,value:g,required:v,control:Z,disabled:y,multiple:C,setValue:N,errors:k,onChange:w,className:M,createNew:S,handleRegistroEstabelecimento:P,helpText:z,alertRequired:I,helpTextPosition:D,opacity:R}=e,O=(0,m.Z)(),{settings:E}=(0,u.r)(),{mode:_}=E,V=S?[{nome:"-- Novo --"},...null!=h?h:[]]:h;return(0,o.jsx)(i.ZP,{item:!0,xs:t,md:p,sx:{my:1},className:M,children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(l.Z,{fullWidth:!0,children:(0,o.jsx)(c.Qr,{name:b,control:Z,defaultValue:g,rules:{required:v},render(e){let{field:t}=e;return(0,o.jsx)(a.Z,{...t,multiple:C,limitTags:j,size:"small",options:V,getOptionLabel:e=>null==e?void 0:e.nome,value:C&&t.value&&t.value.length>0?t.value.map(e=>h.find(n=>n.id===e.id)):null!==(n=t.value)&&void 0!==n?n:{nome:""},disabled:y,onChange(e,n){n&&"-- Novo --"==e.target.innerText?S():(w&&w(n),N(b,n))},renderInput:e=>(0,o.jsx)(s.Z,{...e,label:x,placeholder:x,error:!!k,sx:{opacity:R?.4:1,"& .MuiInputBase-input":{padding:"4px 14px !important"},...I&&!(null==t?void 0:t.value)&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:O.palette.error.main},"&:hover fieldset":{borderColor:O.palette.error.main},"&.Mui-focused fieldset":{borderColor:O.palette.error.main}},"& .MuiInputLabel-root":{color:O.palette.error.main},"& .MuiInputLabel-root.Mui-focused":{color:O.palette.error.main}}}}),PaperComponent(e){let{children:n}=e;return(0,o.jsx)(r.Z,{sx:{"& ul":{border:"dark"==E.mode?"1px solid rgba(".concat(O.palette.customColors.main,", 0.32)"):"null",borderRadius:"8px"}},children:n})},noOptionsText:"Sem op\xe7\xf5es"})}})}),z&&(0,o.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,o.jsx)(d.Z,{text:z,position:null!=D?D:"top"})})]})})};n.Z=p},78432:function(e,n,t){var o=t(85893),i=t(79072),l=t(18194),a=t(67294),s=t(60664),r=t(40039),c=t(84220);let d=e=>{let{type:n,data:t,form:d}=e,{loggedUnity:m}=(0,a.useContext)(r.V),[u,p]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),b=async()=>{try{let e=await s.h.post("/formularios/recebimento-mp/nao-conformidade/getModels",{unidadeID:m.unidadeID});console.log("\uD83D\uDE80 ~ response:",e.data),p(e.data)}catch(n){console.log(n)}},f=async()=>{try{let e=await s.h.post("/formularios/recebimento-mp/nao-conformidade/getRecebimentoMPNC",{unidadeID:m.unidadeID});h(e.data)}catch(n){console.log(n)}};return(0,a.useEffect)(()=>{b(),f()},[t]),(0,o.jsxs)("div",{className:"flex flex-col gap-8",children:["form"===n&&(0,o.jsx)(l.Z,{data:t}),(0,o.jsxs)(i.ZP,{container:!0,spacing:4,children:["list"===n&&(0,o.jsx)(c.Z,{xs:12,md:6,title:"Recebimento de MP",name:"new.recebimento",options:null!=x?x:[],register:d.register,setValue:d.setValue,control:d.control,helpText:"Selecione o Recebimento de MP para lan\xe7ar uma nova n\xe3o conformidade"}),u&&(0,o.jsx)(c.Z,{xs:12,md:"form"===n?12:6,title:"Modelo de formul\xe1rio",name:"new.modelo",options:null!=u?u:[],value:(null==t?void 0:t.modelo)||(null==u?void 0:u.length)===1?u[0]:{nome:""},register:d.register,setValue:d.setValue,control:d.control,helpText:"Selecione um modelo de formul\xe1rio para o preenchimento desta n\xe3o conformidade para este Recebimento de MP"})]})]})};n.Z=d},18194:function(e,n,t){var o=t(85893),i=t(79072),l=t(17575),a=t(11163),s=t(67294),r=t(21609),c=t(7071),d=t(83830);let m=e=>{let{data:n}=e;if(!n)return;let t=(0,a.useRouter)(),{setId:m}=(0,s.useContext)(d.X),u=()=>{m(n.recebimento.id),t.push("/formularios/recebimento-mp/")};return(0,o.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,o.jsxs)(i.ZP,{item:!0,xs:12,md:4,children:[(0,o.jsx)("label",{className:"opacity-60",children:"Fornecedor"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(r.Z,{icon:"mdi:truck-fast-outline"}),(0,o.jsx)("p",{children:n.recebimento.fornecedor})]})]}),(0,o.jsxs)(i.ZP,{item:!0,xs:12,md:3,children:[(0,o.jsx)("label",{className:"opacity-60",children:"Data e hora do recebimento"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(r.Z,{icon:"tabler:calendar-check"}),(0,o.jsx)("p",{children:"".concat(n.recebimento.dataRecebimentoMp," ").concat(n.recebimento.horaRecebimentoMp)})]})]}),(0,o.jsxs)(i.ZP,{item:!0,xs:12,md:3,children:[(0,o.jsx)("label",{className:"opacity-60",children:"NF"}),(0,o.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,o.jsx)(r.Z,{icon:"ion:document-text-outline"}),(0,o.jsx)("p",{children:n.recebimento.nfRecebimentoMp})]})]}),(0,o.jsxs)(i.ZP,{item:!0,xs:12,md:2,children:[(0,o.jsx)("label",{className:"opacity-60",children:"Recebimento"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(c.Z,{skin:"light",label:n.recebimento.status.label,color:n.recebimento.status.color,sx:{height:28,fontSize:"0.75rem"}}),(0,o.jsx)(l.Z,{title:"Acessar Recebimento de MP",placement:"top",children:(0,o.jsx)("div",{className:"cursor-pointer",children:(0,o.jsx)(r.Z,{icon:"ci:external-link",onClick:u})})})]})]})]})};n.Z=m},41088:function(e,n,t){var o=t(67294),i=t(83830);let l=()=>{let{isLoading:e,setIsLoading:n}=(0,o.useContext)(i.X),t=()=>{n(!0)},l=()=>{setTimeout(()=>{n(!1)},500)};return{isLoading:e,startLoading:t,stopLoading:l}};n.Z=l}}]);