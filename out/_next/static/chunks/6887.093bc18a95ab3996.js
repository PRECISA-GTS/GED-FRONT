"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6887],{86887:function(e,n,s){s.d(n,{Z:function(){return S}});var t=s(85893),l=s(11163),i=s.n(l),o=s(67294),a=s(21609),r=s(64165),c=s(40039),d=s(83830);s(7071);var u=s(61225),m=s(54225),x=s(73812),p=s(86378),h=s(72819),b=s(60664);let f=e=>{let{anchorEl:n,open:s,handleClose:l,handleClick:i,actionsData:r}=e,[c,d]=(0,o.useState)(!1),[u,f]=(0,o.useState)(null),g=e=>{if(e.status>=50){let n="".concat(b.Y,"uploads/").concat(e.unidadeID,"/").concat(e.module,"/relatorio/original/").concat(e.usuarioID,"-").concat(e.id,"-").concat(e.module,".pdf");window.open(n,"_blank")}else window.open("/relatorio/".concat(e.route),"_blank")};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(m.Z,{type:"button",onClick:i,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,t.jsx)(a.Z,{icon:"octicon:chevron-down-12"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"A\xe7\xf5es"})]}),(0,t.jsx)(x.Z,{id:"basic-menu",anchorEl:n,open:s,onClose:l,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:null==r?void 0:r.map(e=>(0,t.jsxs)(p.Z,{onClick(){l()},disabled:!!e.disabled,style:{textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[e.identification?(0,t.jsxs)("span",{style:{padding:"0 7px"},children:[(0,t.jsx)("span",{children:e.identification})," -"]}):(0,t.jsx)(a.Z,{icon:e.icon}),"report"==e.type?(0,t.jsx)("a",{onClick:()=>g(e),children:e.name}):(0,t.jsx)("p",{onClick:e.modal?()=>{d(!0),f(e)}:e.action,children:e.name})]},e.id))}),u&&(0,t.jsx)(h.Z,{title:u.name,handleConclusion:u.action,size:u.size,setOpenModal:d,openModal:c,fullHeight:u.fullHeight,children:u.component})]})};var g=s(17575),j=s(41664),v=s.n(j),y=s(41088),k=s(82555);let Z=e=>{let{btnSend:n,btnSave:s,btnNew:l,btnNext:r,manualUrl:d,routes:u,currentUrl:x,disabled:p,disabledSend:h,disabledSubmit:b,handleSubmit:f,handleSend:j,iconConclusion:Z,titleConclusion:C,setores:w}=e,{user:N}=(0,o.useContext)(c.V),S=i(),{isLoading:z}=(0,y.Z)(),{data:E}=(0,k.O)(),[D,_]=(0,o.useState)(null);console.log("\uD83D\uDE80 ~ setores profissional:",N.setores);let F=()=>{if(1===N.admin&&!p&&!h){_({status:!0,message:"Todos os setores podem concluir este modelo de formul\xe1rio."});return}if(p||h){_({status:!1,message:"Este formul\xe1rio n\xe3o est\xe1 aberto para conclus\xe3o."});return}if(w&&0===w.length){_({status:!0,message:"Todos os setores podem concluir este modelo de formul\xe1rio."});return}if(w&&w.length>0){let e=w.some(e=>N.setores.some(n=>n.id===e.id));if(e){_({status:!0,message:"Seu setor est\xe1 configurado para concluir este modelo de formul\xe1rio."});return}}_({status:!1,message:"Seu setor n\xe3o est\xe1 configurado para concluir este modelo de formul\xe1rio."})};return(0,o.useEffect)(()=>{F()},[]),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l&&u.find(e=>e.rota===S.pathname&&e.inserir)&&(0,t.jsx)(v(),{href:"".concat(S.pathname,"/novo"),children:(0,t.jsxs)(m.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,t.jsx)(a.Z,{icon:"ic:outline-plus"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Novo"})]})}),n&&E&&(0,t.jsx)(g.Z,{title:null==D?void 0:D.message,placement:"bottom",children:(0,t.jsxs)(m.Z,{onClick(){(null==D?void 0:D.status)===!0&&j()},type:"button",variant:"contained",size:"medium",color:"primary",readOnly:!0,sx:{opacity:(null==D?void 0:D.status)===!1?.5:1,display:"flex",gap:2},children:[(0,t.jsx)(a.Z,{icon:null!=Z?Z:"carbon:send-filled"}),(0,t.jsx)("span",{className:"hidden sm:block",children:C})]})}),s&&(0,t.jsxs)(m.Z,{onClick:f,type:"submit",variant:"contained",size:"medium",disabled:p||b,sx:{display:"flex",gap:2},children:[(0,t.jsx)(a.Z,{icon:"mdi:check-bold"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Salvar"})]}),r&&(0,t.jsxs)(m.Z,{onClick:f,type:"submit",variant:"outlined",size:"medium",color:z?"secondary":"primary",disabled:p||z,children:[(0,t.jsx)(a.Z,{icon:"grommet-icons:form-next-link"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Avan\xe7ar"})]})]})},C=e=>{let{routes:n,currentUrl:s,btnCancel:l,btnDelete:i,btnStatus:o,btnClose:r,handleModalClose:c,handleBtnStatus:d,status:u,setId:x,router:p,type:h,onclickDelete:b}=e;return(0,t.jsxs)("div",{className:"flex gap-2",children:[l&&!r&&n.find(e=>e.rota===s&&e.ler)&&(0,t.jsx)(m.Z,{onClick(){x(null),"new"==h&&p.push(s)},type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,t.jsx)(a.Z,{icon:"grommet-icons:form-previous-link"})}),i&&n.find(e=>e.rota===s&&e.excluir)&&(0,t.jsxs)(m.Z,{type:"button",onClick:b,variant:"outlined",color:"error",size:"medium",sx:{display:"flex",gap:2},children:[(0,t.jsx)(a.Z,{icon:"material-symbols:delete-outline"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Excluir"})]}),r&&(0,t.jsx)(m.Z,{type:"button",onClick:c,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:(0,t.jsx)("span",{className:"hidden sm:block",children:"Fechar"})})]})};var w=s(66136);let N=e=>{let{btnCancel:n,btnSave:s,btnSend:l,btnNext:m,btnStatus:x,handleSubmit:p,manualUrl:h,btnNew:b,btnClose:g,handleModalClose:j,disabledSubmit:v,handleSend:k,componentSaveReport:N,iconConclusion:S,titleConclusion:z,disabledSend:E,handleBtnStatus:D,onclickDelete:_,btnDelete:F,btnPrint:I,disabledPrint:M,disabled:O,actions:P,actionsData:A,type:T,status:L,partialRoute:U,outsideID:B,setores:H}=e;console.log("\uD83D\uDE80 ~ status:",H);let V=i(),{routes:X}=(0,o.useContext)(c.V),{setId:Y}=(0,o.useContext)(d.X),[J,q]=(0,o.useState)(!1),[G,K]=(0,o.useState)(null),{isLoading:Q}=(0,y.Z)(),{settings:R}=(0,o.useContext)(w.J6),W=(0,u.Z)("(min-width:640px)"),$=Boolean(G),ee=e=>{K(e.currentTarget)},en=()=>{K(null)},es="new"===T&&U?(0,r.g_)((0,r.g_)(V.pathname)):"new"===T||U?(0,r.g_)(V.pathname):V.pathname;return a.Z,a.Z,a.Z,(0,o.useEffect)(()=>{let e=()=>{q(!1),window.scrollY>0?q(!0):q(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"sticky ".concat(B?"-top-[4.5rem] px-4 bg-transparent":"top-[4.5rem]","  pb-2 mb-2 z-50 ").concat("dark"==R.mode?"bg-[#161c24]":"bg-[#F7F7F9]"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full ",style:{zIndex:1e3},children:[(0,t.jsx)(C,{routes:X,currentUrl:es,btnCancel:n,btnDelete:F,btnStatus:x,btnClose:g,handleModalClose:j,status:L,handleBtnStatus:D,onclickDelete:_,setId:Y,router:V,type:T}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[P&&(0,t.jsx)(f,{anchorEl:G,open:$,handleClose:en,handleClick:ee,disabled:O,disabledPrint:M,btnPrint:I,actionsData:A,matches:W}),(0,t.jsx)(Z,{btnSave:s,btnNew:b,btnSend:l,btnNext:m,manualUrl:h,routes:X,currentUrl:es,handleSubmit:p,disabled:O,disabledSend:E,disabledSubmit:v,handleSend:k,iconConclusion:S,titleConclusion:z,setores:H})]})]})})})};var S=N},41088:function(e,n,s){var t=s(67294),l=s(83830);let i=()=>{let{isLoading:e,setIsLoading:n}=(0,t.useContext)(l.X),s=()=>{n(!0)},i=()=>{setTimeout(()=>{n(!1)},500)};return{isLoading:e,startLoading:s,stopLoading:i}};n.Z=i}}]);