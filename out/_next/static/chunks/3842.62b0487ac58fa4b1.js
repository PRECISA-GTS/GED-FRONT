"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3842],{53842:function(e,t,a){a.d(t,{Z:function(){return M}});var l=a(85893),s=a(11163),r=a.n(s),i=a(67294),n=a(60664),o=a(49837),d=a(91359),c=a(79072),u=a(87536),x=a(86501),m=a(45061),p=a(65698),h=a(71798),f=a(60565),j=a(83830),g=a(40039),Z=a(29308),v=a(21609),b=a(41088),D=a(50287),C=a(3893),y=a(84220),I=a(17575),z=a(80562),w=a(55343),P=a(44731);let S=e=>{let{id:t,photo:a,change:s,setChange:r}=e;console.log("\uD83D\uDE80 ~ photo:",a);let{user:o,loggedUnity:d}=(0,i.useContext)(g.V),u=(0,i.useRef)(null),m=()=>{u.current.click()},p=async e=>{let a=e.target.files[0];if(a){let l=new FormData;l.append("files[]",a),l.append("usuarioID",o.usuarioID);let i=a.type.includes("image");if(!i){x.ZP.error("O arquivo selecionado n\xe3o \xe9 uma imagem!");return}await n.h.post("/cadastros/equipamento/photo/".concat(t,"/").concat(d.unidadeID,"/").concat(o.usuarioID),l).then(e=>{x.ZP.success("Foto atualizada com sucesso!")}).catch(e=>{var t,a,l;x.ZP.error(null!==(l=null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)&&void 0!==l?l:"Erro ao atualizar foto!")}).finally(()=>{r(!s)})}},h=async()=>{try{await n.h.delete("/cadastros/equipamento/photo/".concat(t,"/").concat(d.unidadeID,"/").concat(o.usuarioID)),x.ZP.success("Foto removida com sucesso!")}catch(e){console.log(e),x.ZP.error("Erro ao remover foto, tente novamente!")}finally{r(!s)}};return(0,l.jsxs)(c.ZP,{item:!0,xs:12,md:12,sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"180px",position:"relative",borderRadius:"8px"},children:[a&&(0,l.jsx)(I.Z,{title:"Apagar foto do perfil",placement:"top",children:(0,l.jsx)(z.Z,{size:"small",sx:{position:"absolute",top:"20px",right:"8px",zIndex:"20",color:"white",opacity:"0.8",backgroundColor:"#FF4D49","&:hover":{backgroundColor:"#FF4D49",opacity:"1"}},onClick:h,children:(0,l.jsx)(v.Z,{icon:"material-symbols:delete-outline"})})}),(0,l.jsx)(I.Z,{title:a?"Alterar foto":"Inserir foto",placement:"top",children:(0,l.jsxs)(w.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:[(0,l.jsx)("input",{type:"file",ref:u,style:{display:"none"},onChange:p}),(0,l.jsx)(P.Z,{variant:"rounded",alt:"Imagem do cabe\xe7alho do relat\xf3rio",sx:{width:"100%",height:"100%",cursor:"pointer"},onClick:m,src:null!=a?a:"https://gedagro.com.br/images/report.png"})]})})]})};var k=a(47842),F=a(54225);let N=e=>{let{form:t}=e,{loggedUnity:a}=(0,i.useContext)(g.V),[s,r]=(0,i.useState)(null),{fields:m,append:p,remove:h}=(0,u.Dq)({control:t.control,name:"fields.limpeza"}),f=async()=>{try{if(!a)return;let e=await n.h.post("/cadastros/item/getItems",{parFormularioID:4,unidadeID:a.unidadeID});r(e.data)}catch(t){console.log(t)}};return(0,i.useEffect)(()=>{f()},[t]),(0,i.useEffect)(()=>{t.watch("fields.realizaLimpeza")&&0===m.length&&p({item:null})},[t.watch("fields.realizaLimpeza")]),t.watch("fields.realizaLimpeza")&&(0,l.jsx)(o.Z,{children:(0,l.jsx)(d.Z,{children:(0,l.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsxs)("div",{className:"flex items-center gap-2 pb-1 pt-2",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)(v.Z,{icon:"carbon:clean",className:"text-3xl"})}),(0,l.jsx)("div",{className:"flex flex-col gap-0",children:(0,l.jsx)("p",{className:"text-xl",children:"Limpeza"})})]})}),(0,l.jsx)(Z.Z,{xs:12,md:4,title:"Frequ\xeancia (dias)",name:"fields.frequenciaLimpeza",form:t,helpText:"Prazo para notifica\xe7\xe3o da pr\xf3xima limpeza do equipamento (calend\xe1rio)"}),(0,l.jsx)(Z.Z,{xs:12,md:12,title:"Orienta\xe7\xf5es da limpeza",name:"fields.orientacoesLimpeza",form:t,multiline:!0,rows:3}),(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsxs)("div",{className:"flex items-center gap-2 pb-1 pt-2",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)(v.Z,{icon:"material-symbols:format-list-bulleted-rounded",className:"text-3xl"})}),(0,l.jsx)("div",{className:"flex flex-col gap-0",children:(0,l.jsx)("p",{className:"text-xl",children:"Itens"})})]})}),m.map((e,a)=>(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(y.Z,{xs:12,md:11,title:"Item",name:"fields.limpeza[".concat(a,"]"),required:!0,options:null!=s?s:[],form:t}),(0,l.jsx)(c.ZP,{item:!0,xs:12,md:1,className:"flex items-center",children:(0,l.jsx)(z.Z,{color:"error",size:"small",onClick(){if(1==m.length){x.ZP.error("\xc9 necess\xe1rio possuir pelo menos um item!");return}h(a)},children:(0,l.jsx)(v.Z,{icon:"tabler:trash-filled"})})})]},e.id)),(0,l.jsx)(c.ZP,{item:!0,xs:12,children:(0,l.jsx)(F.Z,{variant:"outlined",color:"primary",onClick:()=>p({item:null}),startIcon:(0,l.jsx)(v.Z,{icon:"material-symbols:add-circle-outline-rounded"}),children:"Inserir"})})]})})})},E=e=>{var t,a,s;let{id:v,btnClose:I,handleModalClose:z,setNewChange:w,newChange:P,outsideID:F,handleConfirmNew:E,manualUrl:M}=e,[T,q]=(0,i.useState)(!1),[L,O]=(0,i.useState)(null),[A,V]=(0,i.useState)(null),[R,_]=(0,i.useState)(!1),{setId:U}=(0,i.useContext)(j.X),W=r(),Y=v&&v>0?"edit":"new",$=W.pathname,{title:B}=(0,i.useContext)(f.f),{loggedUnity:H,user:X}=(0,i.useContext)(g.V),{startLoading:K,stopLoading:G}=(0,b.Z)(),J=(0,u.cI)({mode:"onChange",defaultValues:{fields:{limpeza:{itens:[{}]}}}}),Q=async e=>{let t={...e,usuarioID:X.usuarioID,unidadeID:H.unidadeID};try{"new"===Y?await n.h.post("cadastros/equipamento/new/insertData",t).then(e=>{F?(U(F),E(e.data.value)):(W.push("".concat((0,h.g_)($))),U(e.data.id)),x.ZP.success(h.OD.successNew)}):"edit"===Y&&(await n.h.post("".concat($,"/updateData/").concat(v),t),x.ZP.success(h.OD.successUpdate))}catch(a){a.response&&409===a.response.status?x.ZP.error(h.OD.errorRepeated):console.log(a)}finally{G()}},ee=async()=>{try{await n.h.delete("".concat($,"/").concat(v,"/").concat(X.usuarioID,"/").concat(H.unidadeID)),U(null),q(!1),x.ZP.success(h.OD.successDelete)}catch(e){e.response&&409===e.response.status?(x.ZP.error(h.OD.pendingDelete),q(!1)):console.log(e)}},et=async()=>{try{"edit"===Y?await n.h.post("".concat($,"/getData/").concat(v),{id:v}).then(e=>{console.log("\uD83D\uDE80 ~ getData: ",e.data),O(e.data),J.reset(e.data)}):O({fields:{nome:"",status:1}})}catch(e){console.log(e)}},ea=async()=>{try{if(!H)return;let e=await n.h.post("/cadastros/setor/getSetores",{unidadeID:H.unidadeID});V(e.data)}catch(t){console.log(t)}};return(0,i.useEffect)(()=>{et(),ea(),setTimeout(()=>{J.trigger()},300)},[v,H,R]),console.log("\uD83D\uDE80 ~ data?.fields?.dataCompra:",null==L?void 0:null===(t=L.fields)||void 0===t?void 0:t.dataCompra),(0,l.jsxs)(l.Fragment,{children:[!L&&(0,l.jsx)(k.Z,{}),L&&(0,l.jsxs)("form",{onSubmit:J.handleSubmit(Q),children:[(0,l.jsx)(p.Z,{btnCancel:!0,btnNew:!E,btnSave:!0,manualUrl:M,btnClose:I,handleModalClose:z,handleSubmit:()=>J.handleSubmit(Q),btnDelete:"edit"===Y,onclickDelete:()=>q(!0),type:Y,outsideID:F}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsx)(o.Z,{children:(0,l.jsx)(d.Z,{children:(0,l.jsxs)(c.ZP,{container:!0,spacing:5,children:["edit"===Y&&(0,l.jsx)(c.ZP,{item:!0,xs:12,md:2,children:(0,l.jsx)(c.ZP,{container:!0,spacing:5,children:(0,l.jsx)(S,{id:v,photo:L.fields.foto,change:R,setChange:_})})}),(0,l.jsx)(c.ZP,{item:!0,xs:12,md:"edit"==Y?10:12,children:(0,l.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,l.jsx)(Z.Z,{xs:11,md:4,title:"Nome",name:"fields.nome",required:!0,form:J}),(0,l.jsx)(Z.Z,{xs:11,md:4,title:"Tipo de material (inox, metal, pl\xe1stico, vidro, etc)",name:"fields.tipo",form:J}),(0,l.jsx)(Z.Z,{xs:11,md:4,title:"N\xba S\xe9rie",name:"fields.numeroSerie",form:J}),(0,l.jsx)(Z.Z,{xs:11,md:4,title:"C\xf3d. Invent\xe1rio",name:"fields.codigoInventario",form:J}),(0,l.jsx)(Z.Z,{xs:11,md:4,title:"Marca",name:"fields.marca",form:J}),(0,l.jsx)(Z.Z,{xs:11,md:4,title:"Modelo",name:"fields.modelo",form:J}),(0,l.jsx)(D.Z,{xs:12,md:4,title:"Data compra",name:"fields.dataCompra",value:null==L?void 0:null===(a=L.fields)||void 0===a?void 0:a.dataCompra,form:J}),(0,l.jsx)(Z.Z,{xs:11,md:4,title:"Fornecedor",name:"fields.fornecedor",form:J}),(0,l.jsx)(y.Z,{xs:12,md:4,title:"Setor",name:"fields.setor",value:null==L?void 0:null===(s=L.fields)||void 0===s?void 0:s.setor,options:null!=A?A:[],form:J,link:"/cadastros/setor"}),(0,l.jsx)(c.ZP,{item:!0,xs:12,md:8,children:(0,l.jsx)("p",{children:"ANEXOS"})}),(0,l.jsx)(c.ZP,{item:!0,xs:12,md:4}),(0,l.jsx)(C.Z,{xs:6,md:2,title:"Realiza Limpeza",name:"fields.realizaLimpeza",value:L.fields.realizaLimpeza,form:J,helpText:"Este equipamento ser\xe1 listado no formul\xe1rio de limpeza e higieniza\xe7\xe3o"}),(0,l.jsx)(C.Z,{xs:6,md:3,title:"Realiza Manuten\xe7\xe3o e Calibra\xe7\xe3o",name:"fields.realizaManutencao",value:L.fields.realizaManutencao,form:J,helpText:"Este equipamento ser\xe1 listado no formul\xe1rio de Manuten\xe7\xe3o e Calibra\xe7\xe3o"})]})})]})})}),(0,l.jsx)(N,{form:J})]})]}),(0,l.jsx)(m.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+B.title,openModal:T,handleClose:()=>q(!1),handleSubmit:ee,btnCancel:!0,btnConfirm:!0})]})};var M=E},45061:function(e,t,a){var l=a(85893),s=a(54225),r=a(1890),i=a(77745),n=a(95398),o=a(76779),d=a(44642);a(21609);var c=a(19604),u=a(29630),x=a(55343),m=a(67836),p=a(67294),h=a(82747);a(84220),a(29308),a(67569),a(3893),a(88475);let f=e=>{let{title:t,text:a,handleClose:f,openModal:j,handleSubmit:g,cnpj:Z,nomeFornecedor:v,gruposAnexo:b,email:D,setEmail:C,inputEmail:y,btnCancel:I,btnConfirm:z,grupoAnexosFornecedor:w,btnCancelColor:P,btnConfirmColor:S,closeAfterSave:k,listErrors:F}=e,[N,E]=(0,p.useState)(!1);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.Z,{open:j,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,t){"backdropClick"!==t&&f()},children:[(0,l.jsx)(i.Z,{id:"form-dialog-title",children:t}),(0,l.jsxs)(n.Z,{children:[(0,l.jsxs)(d.Z,{sx:{mb:3},children:[(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:a}}),F&&F.status&&(0,l.jsxs)(c.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,l.jsx)(u.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:F.errors.map((e,t)=>(0,l.jsxs)(u.Z,{variant:"body2",color:"error",children:["- ",e]},t))})]})]}),y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(x.Z,{sx:{mt:2},fullWidth:!0,children:[(0,l.jsx)(m.Z,{defaultValue:"",type:"email",label:"E-mail do Fornecedor (opcional)",placeholder:"E-mail do Fornecedor (opcional)","aria-describedby":"validation-schema-nome",name:"email",error:(null==D?void 0:D.length)>0&&N,inputProps:{onChange(e){C(e.target.value),E(!(0,h.dI)(e.target.value))}}}),(null==D?void 0:D.length)>0&&N&&(0,l.jsx)(u.Z,{variant:"body2",color:"error",children:"Por favor, insira um e-mail v\xe1lido!"})]}),(0,l.jsx)(c.Z,{severity:"info",sx:{mt:2},children:"Se o e-mail for preenchido, o mesmo receber\xe1 as instru\xe7\xf5es de cadastro e preenchimento do formul\xe1rio no e-mail."})]})]}),(0,l.jsxs)(o.Z,{className:"dialog-actions-dense",children:[I&&(0,l.jsx)(s.Z,{variant:"outlined",color:"primary",onClick:f,children:"Cancelar"}),z&&(0,l.jsx)(s.Z,{variant:"contained",disabled:y&&(null==D?void 0:D.length)>0&&N||F&&F.status,color:S||"error",onClick:y&&Z?()=>{g(Z,v,b,D),k&&f()}:y&&!Z?()=>{g(D),k&&f()}:()=>{g(),k&&f()},children:"Confirmar"})]})]})})};t.Z=f},67569:function(e,t,a){var l=a(85893),s=a(79072),r=a(61953),i=a(29630),n=a(22841),o=a(75158),d=a(53934);let c=e=>{let{form:t,xs:a,md:c,title:u,index:x,name:m,typePage:p,value:h,edit:f,className:j,helpText:g}=e;return(0,l.jsxs)(s.ZP,{item:!0,xs:a,md:c,className:j,children:[(0,l.jsxs)(r.Z,{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(i.Z,{variant:"caption",children:x&&0!=x?"":u}),(0,l.jsx)(n.Z,{control:(0,l.jsx)(o.Z,{size:"small",sx:{ml:4},...t.register(m),defaultChecked:!0==h||1==h||"new"==p,onChange(e){f&&t.setValue(f,!0)}})})]}),g&&(0,l.jsx)("div",{children:(0,l.jsx)(d.Z,{text:g,position:"top"})})]})};t.Z=c},3893:function(e,t,a){var l=a(85893),s=a(79072),r=a(61953),i=a(22841),n=a(75158),o=a(53934),d=a(67294);let c=e=>{let{form:t,xs:a,md:c,title:u,name:x,value:m,disabled:p,onClick:h,helpText:f,helpTextPosition:j}=e;return(0,d.useEffect)(()=>{p&&t.setValue(x,m)},[p,m,t,x]),(0,l.jsx)(s.ZP,{item:!0,xs:null!=a?a:"12",md:null!=c?c:"12",children:(0,l.jsx)(r.Z,{display:"flex",alignItems:"center",justifyContent:"start",sx:{gap:0},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{control:(0,l.jsx)(n.Z,{name:x,onClick:h,...t.register(x),defaultChecked:m,disabled:p}),label:u,size:"small",sx:{marginRight:"4px","&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}}),f&&(0,l.jsx)(o.Z,{text:f,position:null!=j?j:"top",className:"relative top-[2px]"})]})})})};t.Z=c},50287:function(e,t,a){var l=a(85893),s=a(79072),r=a(55343),i=a(67836),n=a(62097),o=a(67294),d=a(87536),c=a(71798);let u=e=>{let{form:t,xs:a,md:u,title:x,required:m,disabled:p,type:h,value:f,name:j,multiline:g,typeValidation:Z,alertRequired:v,opacity:b,className:D}=e,C=(0,n.Z)(),[y,I]=(0,o.useState)({}),[z,w]=(0,o.useState)(null),P=Boolean((0,d.U2)(t.formState.errors,j));(0,o.useEffect)(()=>{Z&&f&&S(Z,j,f)},[Z,f,j]);let S=(e,t,a,l)=>{let s=new Date(a+"T00:00:00"),r=(0,c.HD)(e,s,l);I(e=>({...e,[t]:r}))},k=e=>{let t=new Date,a=new Date(e+"T00:00:00");return"dataAtual"===Z&&a.toDateString()!==t.toDateString()?"A data deve ser a data atual":"dataPassado"===Z&&a>=t?"A data deve ser do passado":"dataFutura"===Z&&a<=t?"A data deve ser do futuro":null},F=async e=>{let a=e.target.value,l=k(a);w(l),!l&&(t.setValue(j,a),Z&&S(Z,j,a)),await t.trigger(j)};return(0,l.jsx)(s.ZP,{item:!0,xs:a,md:u,sx:{my:1},children:(0,l.jsx)("div",{className:D,children:(0,l.jsx)(r.Z,{fullWidth:!0,sx:{position:"relative"},children:(0,l.jsx)(i.Z,{type:null!=h?h:"date",size:"small",label:x,disabled:p,defaultValue:f?(e=>{let t=new Date(e+"T00:00:00"),a=t.getUTCDate().toString().padStart(2,"0"),l=(t.getUTCMonth()+1).toString().padStart(2,"0"),s=t.getUTCFullYear();return"".concat(s,"-").concat(l,"-").concat(a)})(f):"",error:P||!!z,helperText:z,onChange:F,variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{min:"dataFutura"===Z?new Date().toISOString().split("T")[0]:void 0,max:"dataPassado"===Z?new Date().toISOString().split("T")[0]:new Date(new Date().setFullYear(new Date().getFullYear()+50)).toISOString().split("T")[0]},sx:{opacity:b?.4:1,"& .MuiInputBase-input":{padding:g?"18px 14px":"10px 14px"},...(m||v)&&(P||!!z)&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:C.palette.error.main},"&:hover fieldset":{borderColor:C.palette.error.main},"&.Mui-focused fieldset":{borderColor:C.palette.error.main}},"& .MuiInputLabel-root":{color:C.palette.error.main},"& .MuiInputLabel-root.Mui-focused":{color:C.palette.error.main}}},...t.register(j,{required:m})})})})})};t.Z=u},88475:function(e,t,a){var l=a(85893),s=a(79072),r=a(61953),i=a(29630),n=a(17575),o=a(80562),d=a(21609);let c=e=>{let{xs:t,md:a,icon:c,color:u,title:x,removeItem:m,item:p,pending:h,index:f,textSuccess:j,textError:g}=e;return j=j||"Remover este item",g=g||"Este item n\xe3o pode ser removido pois possui cadastros vinculados a ele",(0,l.jsx)(s.ZP,{item:!0,xs:t,md:a,children:(0,l.jsxs)(r.Z,{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(i.Z,{variant:"caption",children:x}),(0,l.jsx)(n.Z,{title:1==h?g:j,children:(0,l.jsx)(o.Z,{color:null!=u?u:"error",size:"small",onClick(){1!=h&&m(p,f)},sx:{opacity:1==h?.5:1,cursor:1==h?"default":"pointer"},children:(0,l.jsx)(d.Z,{icon:null!=c?c:"tabler:trash-filled"})})})]})})};t.Z=c},82747:function(e,t,a){function l(e){if(!e||14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let t=e.length-2,a=e.substring(0,t),l=e.substring(t),s=0,r=t-7;for(let i=t;i>=1;i--)s+=a.charAt(t-i)*r--,r<2&&(r=9);let n=s%11<2?0:11-s%11;if(n!=l.charAt(0))return!1;t+=1,a=e.substring(0,t),s=0,r=t-7;for(let o=t;o>=1;o--)s+=a.charAt(t-o)*r--,r<2&&(r=9);return(n=s%11<2?0:11-s%11)==l.charAt(1)}function s(e){let t;if(!e||11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let a=0;for(let l=1;l<=9;l++)a+=parseInt(e.substring(l-1,l))*(11-l);if((10==(t=10*a%11)||11===t)&&(t=0),t!==parseInt(e.substring(9,10)))return!1;a=0;for(let s=1;s<=10;s++)a+=parseInt(e.substring(s-1,s))*(12-s);return(10==(t=10*a%11)||11===t)&&(t=0),t===parseInt(e.substring(10,11))}function r(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}a.d(t,{dI:function(){return r},sw:function(){return s},zk:function(){return l}})}}]);