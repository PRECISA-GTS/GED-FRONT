(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5230],{52203:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/relatorio/formularios/fornecedor",function(){return i(90794)}])},47842:function(e,t,i){"use strict";var o=i(85893),l=i(70754);let n=e=>{let{show:t,title:i,customTextProps:n,...r}=e;return t&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center rounded-lg z-50",children:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2 ",children:[(0,o.jsx)(l.Z,{color:"primary",...r}),(0,o.jsx)("p",{className:"opacity-80 text-sm ".concat(n),children:null!=i?i:"Carregando..."})]})})};t.Z=n},62813:function(e,t,i){"use strict";var o=i(85893),l=i(99070);let n=()=>{let e=l.mM.create({footer:{position:"absolute",bottom:20,color:"grey",width:"100vw",display:"flex",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:25,fontSize:10}});return(0,o.jsxs)(l.G7,{fixed:!0,style:e.footer,children:[(0,o.jsxs)(l.xv,{children:["Gerado em"," ",new Date().toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,o.jsx)(l.xv,{render(e){let{pageNumber:t,totalPages:i}=e;return"".concat(t,"/").concat(i)}})]})};t.Z=n},74811:function(e,t,i){"use strict";var o=i(85893),l=i(99070),n=i(67294),r=i(60664);let d={header:{position:"fixed",top:5,left:0,right:0,margin:"0 auto",fontSize:12,height:50,width:"92%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},title:{textAlign:"center"},imageContainer:{width:"100%",height:"100%",display:"flex",justifyContent:"flex-end"},image:{aspectRatio:1,objectFit:"contain",height:"100%",marginLeft:"auto"}},s=e=>{var t,i;let{data:s}=e,[a,c]=(0,n.useState)(null),x=async()=>{try{let e=await r.hi.post("/relatorio/getHeader",{unidadeID:s.user.unidadeID});c(e.data),console.log("\uD83D\uDE80 ~ Header data:: ",e.data)}catch(t){console.error("Erro ao buscar os dados do cabe\xe7alho:",s)}};return(0,n.useEffect)(()=>{x()},[]),a&&(0,o.jsxs)(l.G7,{style:d.header,children:[(0,o.jsx)(l.G7,{style:{width:"10%"},children:(0,o.jsx)(l.xv,{})}),(0,o.jsxs)(l.G7,{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:5},children:[(0,o.jsx)(l.xv,{style:[d.title,d.content,{width:"100%"}],children:null!==(t=null==a?void 0:a.tituloRelatorio)&&void 0!==t?t:"Cabe\xe7alho n\xe3o definido"}),(0,o.jsx)(l.xv,{style:[d.title,d.content,{width:"60%",fontSize:8}],children:null!==(i=null==a?void 0:a.endereco)&&void 0!==i?i:"Endere\xe7o n\xe3o definido"}),(0,o.jsx)(l.xv,{style:[d.title,d.content,{width:"100%",fontSize:8}],children:"CNPJ: ".concat(null==a?void 0:a.cnpj)})]}),(0,o.jsx)(l.G7,{style:[d.imageContainer,{width:"10%"}],children:(null==a?void 0:a.url)?(0,o.jsx)(l.Ee,{src:r.YZ+(null==a?void 0:a.url),style:d.image}):""})]})};t.Z=s},43776:function(e,t,i){"use strict";i.d(t,{W:function(){return l}});var o=i(99070);let l=o.mM.create({page:{flexDirection:"column",backgroundColor:"#FFF",justifyContent:"start",paddingTop:15,paddingBottom:30},title:{},header:{position:"fixed",top:-10,left:0,right:0,margin:"0 auto",fontSize:12,height:50,width:"92%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},content:{marginHorizontal:10,fontSize:11,padding:15,flex:1},footer:{position:"absolute",bottom:20,color:"grey",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:25,fontSize:10},blockTitle:{paddingVertical:5},containerFields:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",paddingTop:2},fields:{display:"flex",flexDirection:"column",gap:"2px",paddingBottom:4,paddingTop:4},fieldTitle:{fontSize:8,opacity:"0.8"},fieldValue:{fontSize:10},separator:{height:"1px",width:"100%",borderBottom:"1px solid #ddd",clear:"both"},table:{width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ddd",borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd",borderTopLeftRadius:3,borderTopRightRadius:3,borderBottomLeftRadius:3,borderBottomRightRadius:3},tableRed:{width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ff625d",borderTop:"1px solid #ff625d",borderLeft:"1px solid #ff625d",borderBottom:"1px solid #ff625d",borderTopLeftRadius:3,borderTopRightRadius:3,borderBottomLeftRadius:3,borderBottomRightRadius:3},tableTitle:{display:"flex",flexDirection:"row",width:"100%",fontSize:8,backgroundColor:"#EEE",borderTopLeftRadius:2,borderTopRightRadius:2,borderLeft:"1px solid #ddd"},tableTitleRed:{display:"flex",flexDirection:"row",width:"100%",fontSize:8,backgroundColor:"#f8e2e2",borderTopLeftRadius:2,borderTopRightRadius:2,borderLeft:"1px solid #f8e2e2"},tableTitlecolumn:{padding:8},tableContainer:{display:"flex",flexDirection:"row",width:"100%"},tableContent:{padding:8,borderLeft:"1px solid #ddd",borderTop:"1px solid #ddd"},tableContentRed:{paddingHorizontal:8,paddingVertical:0,borderLeft:"1px solid #f8e2e2",borderTop:"1px solid #f8e2e2"},tableContentcolumn:{fontSize:9}})},55334:function(e,t,i){"use strict";i.r(t);var o=i(85893),l=i(99070),n=i(67294),r=i(43776),d=i(60664);let s=e=>{var t,i,s,a,c,x,u,h;let{values:f}=e;if(!f)return;let[p,m]=(0,n.useState)(null),g=async()=>{let e=await d.hi.post("relatorio/formularios/fornecedor/getContent",f);m(e.data)};return(0,n.useEffect)(()=>{g()},[]),p&&(0,o.jsxs)(l.G7,{style:{width:"100%"},children:[(0,o.jsx)(l.G7,{style:{padding:3,backgroundColor:"#eee",marginTop:20,border:"1px solid #ddd"},children:(0,o.jsx)(l.xv,{style:{width:"100%",textAlign:"center",fontSize:12},children:"QUALIFICA\xc7\xc3O DE FORNECEDORES"})}),(0,o.jsx)(l.G7,{style:{marginTop:20},children:(0,o.jsxs)(l.xv,{style:{fontSize:10},children:["A empresa ",(0,o.jsx)(l.xv,{children:null==p?void 0:p.unidade})," possui como norma de BPF a avalia\xe7\xe3o de seus fornecedores quanto as mat\xe9rias primas e ingredientes por estes fornecidos."]})}),"Fornecedor",(0,o.jsx)(l.G7,{style:{marginTop:20},children:(0,o.jsxs)(l.xv,{style:{fontSize:10},children:["Fornecedor: ",(0,o.jsx)(l.xv,{style:{fontWeight:"bold",fontSize:10},children:p.fornecedor})]})}),(0,o.jsx)(l.G7,{style:{marginTop:20},children:(0,o.jsxs)(l.xv,{style:{fontSize:10},children:[(null==p?void 0:null===(t=p.produtos)||void 0===t?void 0:t.length)>1?"Produtos fornecidos: ":"Produto fornecido: ",null==p?void 0:null===(i=p.produtos)||void 0===i?void 0:i.map((e,t)=>(0,o.jsxs)(l.xv,{children:[(0,o.jsx)(l.xv,{style:{fontWeight:"bold",fontSize:10},children:e.produtos}),t!==p.produtos.length-1&&", "]},t))]})}),(0,o.jsx)(l.G7,{style:{marginTop:20},children:(0,o.jsx)(l.G7,{style:r.W.containerFields,children:null===(s=p.header)||void 0===s?void 0:s.map((e,t)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.G7,{style:[r.W.fields,{width:"33%"}],children:[(0,o.jsx)(l.xv,{style:r.W.fieldTitle,children:null!==(c=e.name)&&void 0!==c?c:""}),(0,o.jsx)(l.xv,{style:r.W.fieldValue,children:null!==(x=e.value)&&void 0!==x?x:""})]}),(t+1)%3==0&&(0,o.jsx)(l.G7,{style:r.W.separator})]}))})}),null===(a=p.blocks)||void 0===a?void 0:a.map((e,t)=>(0,o.jsx)(l.G7,{style:[e,{marginTop:30}],children:(0,o.jsxs)(l.G7,{style:r.W.table,children:[(0,o.jsxs)(l.G7,{style:r.W.tableTitle,children:[(0,o.jsx)(l.xv,{style:[r.W.tableTitlecolumn,{width:"60%"}],children:e.nome}),(0,o.jsx)(l.xv,{style:[r.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Resposta"}),(0,o.jsx)(l.xv,{style:[r.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Observa\xe7\xe3o"})]}),e.itens.map((e,t)=>(0,o.jsxs)(l.G7,{style:r.W.tableContainer,children:[(0,o.jsx)(l.G7,{style:[r.W.tableContent,{width:"60%"}],children:(0,o.jsx)(l.xv,{style:r.W.tableContentcolumn,children:e.nome})}),(0,o.jsx)(l.G7,{style:[r.W.tableContent,{width:"20%"}],children:(0,o.jsx)(l.xv,{style:r.W.tableContentcolumn,children:null!==(u=e.resposta)&&void 0!==u?u:""})}),(0,o.jsx)(l.G7,{style:[r.W.tableContent,{width:"20%"}],children:(0,o.jsx)(l.xv,{style:r.W.tableContentcolumn,children:null!==(h=e.obsResposta)&&void 0!==h?h:""})})]}))]})},t))]})};t.default=s},90794:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return R}});var o=i(85893),l=i(82555),n=i(88942),r=i(99070),d=i(62097),s=i(67294),a=i(10160),c=i(21609),x=i(62813),u=i(74811);i(43776);var h=i(54225),f=i(1890),p=i(77745),m=i(95398),g=i(76779),j=i(29630),y=i(60664),b=i(80562),v=i(47842),w=i(86501);let C=e=>{let{title:t,description:i,open:l,handleClose:n}=e,[r,d]=(0,s.useState)(!1),[a,x]=(0,s.useState)(null),u=localStorage.getItem("report"),C=JSON.parse(u),S=async()=>{d(!r),r?(d(!1),x(null),n()):await D()},D=async()=>{try{let e=await y.hi.post("/formularios/fornecedor/createDocumentAutentique/".concat(C.id,"/").concat(C.usuarioID,"/").concat(C.unidadeID));x(e.data),localStorage.setItem("hashSignedDocument",JSON.stringify(e.data))}catch(t){console.log(t)}},T=async()=>{let e=localStorage.getItem("hashSignedDocument"),t=JSON.parse(e);if(t)try{let i=await y.hi.post("/formularios/fornecedor/saveSignedDocument",{id:C.id,usuarioID:C.usuarioID,unidadeID:C.unidadeID,hashSignedDocument:t});console.log("\uD83D\uDE80 ~ response:",i),w.ZP.success(i.data.message)}catch(o){console.log(o)}},z=()=>{n(),d(!1),x(null),localStorage.removeItem("hashSignedDocument")};return(0,s.useEffect)(()=>{l||(T(),z())},[n]),(0,o.jsxs)(f.Z,{open:l,maxWidth:"xl",fullWidth:!0,scroll:a?"paper":"body",children:[(0,o.jsxs)(p.Z,{id:"form-dialog-title",children:[t,(0,o.jsx)(b.Z,{onClick(){n(),d(!1)},className:"!absolute !right-2 !top-2",children:(0,o.jsx)(c.Z,{icon:"mdi:close"})})]}),(0,o.jsx)(m.Z,{children:r?(0,o.jsx)("div",{className:"h-[80vh]",children:a?(0,o.jsxs)("div",{className:"h-[80vh]",children:[(0,o.jsx)(j.Z,{variant:"body1",children:i}),(0,o.jsx)("iframe",{src:"https://painel.autentique.com.br/documentos/".concat(a),frameborder:"0",width:"100%",height:"100%"})]}):(0,o.jsx)(v.Z,{title:"Preparando documento para assinatura...",show:!0,customTextProps:"text-xl font-bold",size:60,thickness:4})}):(0,o.jsxs)("div",{className:"h-[80vh]",children:[(0,o.jsx)(j.Z,{variant:"body1",children:i}),(0,o.jsx)("iframe",{src:"https://painel.autentique.com.br/entrar",frameBorder:"0",width:"100%",height:"100%"})]})}),(0,o.jsxs)(g.Z,{className:"dialog-actions-dense",children:[r&&(0,o.jsxs)(h.Z,{variant:"outlined",color:"primary",onClick(){d(!1),x(null)},className:"flex gap-1",children:[(0,o.jsx)(c.Z,{icon:"fe:login"}),"Fazer login"]}),(0,o.jsxs)(h.Z,{variant:r?"outlined":"contained",color:"primary",onClick:S,className:"flex gap-1",children:[(0,o.jsx)(c.Z,{icon:r?"":"fluent:signature-24-filled"}),r?"Fechar":"Confirmar e assinar"]})]})]})};var S=i(17575);let D=e=>{let{FileComponent:t,FileName:i}=e,[l,n]=(0,s.useState)(!1),d=localStorage.getItem("report");JSON.parse(d);let x=()=>{n(!0)},u=()=>{window.close()},h=[{id:1,title:"Fechar",color:"primary",size:"large",variant:"outlined",disable:!1,icon:"ooui:close",function:u},{id:2,title:"Assinar digitalmente",color:"primary",size:"large",variant:"outlined",disable:!1,icon:"fluent:signature-24-filled",function:x}];return(0,o.jsxs)("div",{className:"fixed bottom-4 right-12 flex flex-col gap-2",children:[h&&h.map(e=>(0,o.jsx)("div",{onClick:e.disable?null:e.function,children:(0,o.jsx)(S.Z,{title:e.title,placement:"left",children:(0,o.jsx)(a.Z,{color:e.color,size:e.size,variant:e.variant,className:e.disable?"hover:opacity-20 opacity-20":"",children:(0,o.jsx)(c.Z,{icon:e.icon,className:e.disable?"cursor-default":""})})})},e.id)),(0,o.jsx)(S.Z,{title:"Baixar relat\xf3rio",placement:"left",children:(0,o.jsx)("div",{children:(0,o.jsx)(r.WD,{document:t,fileName:i,children(e){let{blob:t,url:i,loading:l,error:n}=e;return(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)(a.Z,{color:"primary",size:"large",variant:"outlined",children:(0,o.jsx)(c.Z,{icon:"basil:download-solid"})})})}})})}),(0,o.jsx)(C,{open:l,handleClose:()=>n(!1),title:"Assinatura do relat\xf3rio"})]})};var T=i(55334);let z=()=>{let{data:e}=(0,l.O)(),t=()=>(0,o.jsx)(r.BB,{children:(0,o.jsx)(r.T3,{size:"A4",style:{paddingHorizontal:25},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Z,{data:e}),(0,o.jsx)(T.default,{values:e},e),(0,o.jsx)(x.Z,{})]})})});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Z$,{style:{width:"100%",height:"100vh"},children:(0,o.jsx)(t,{})}),(0,o.jsx)(D,{FileComponent:(0,o.jsx)(t,{}),FileName:"Qualifica\xe7\xe3o de Fornecedor #".concat(e.report.id)})]})};z.getLayout=e=>(0,o.jsx)(n.Z,{children:e}),z.setConfig=()=>{let{palette:e}=(0,d.Z)();return{mode:e.mode}};var R=z}},function(e){e.O(0,[4186,1445,1111,5999,2187,9774,2888,179],function(){return e(e.s=52203)}),_N_E=e.O()}]);