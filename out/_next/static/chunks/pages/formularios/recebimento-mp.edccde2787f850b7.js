(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2752],{85390:function(e,o,a){"use strict";a.d(o,{Z:function(){return D}});var t=a(63366),n=a(87462),l=a(67294);a(59864);var s=a(86010),r=a(94780),i=a(67074),d=a(78884),c=a(36622),u=a(1588),p=a(34867);function m(e){return(0,p.Z)("MuiToggleButtonGroup",e)}let x=(0,u.Z)("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]);var f=a(85893);let h=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],v=e=>{let{classes:o,orientation:a,fullWidth:t,disabled:n}=e,l={root:["root","vertical"===a&&"vertical",t&&"fullWidth"],grouped:["grouped",`grouped${(0,c.Z)(a)}`,n&&"disabled"]};return(0,r.Z)(l,m,o)},g=(0,i.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver(e,o){let{ownerState:a}=e;return[{[`& .${x.grouped}`]:o.grouped},{[`& .${x.grouped}`]:o[`grouped${(0,c.Z)(a.orientation)}`]},o.root,"vertical"===a.orientation&&o.vertical,a.fullWidth&&o.fullWidth]}})(({ownerState:e,theme:o})=>(0,n.Z)({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius},"vertical"===e.orientation&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${x.grouped}`]:(0,n.Z)({},"horizontal"===e.orientation?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${x.selected} + .${x.grouped}.${x.selected}`]:{borderTop:0,marginTop:0}})})),b=l.forwardRef(function(e,o){let a=(0,d.Z)({props:e,name:"MuiToggleButtonGroup"}),{children:r,className:i,color:c="standard",disabled:u=!1,exclusive:p=!1,fullWidth:m=!1,onChange:x,orientation:b="horizontal",size:D="medium",value:Z}=a,j=(0,t.Z)(a,h),I=(0,n.Z)({},a,{disabled:u,fullWidth:m,orientation:b,size:D}),y=v(I),C=(e,o)=>{let a;if(!x)return;let t=Z&&Z.indexOf(o);Z&&t>=0?(a=Z.slice()).splice(t,1):a=Z?Z.concat(o):[o],x(e,a)},S=(e,o)=>{x&&x(e,Z===o?null:o)};return(0,f.jsx)(g,(0,n.Z)({role:"group",className:(0,s.Z)(y.root,i),ref:o,ownerState:I},j,{children:l.Children.map(r,e=>{var o;return l.isValidElement(e)?l.cloneElement(e,{className:(0,s.Z)(y.grouped,e.props.className),onChange:p?S:C,selected:void 0===e.props.selected?(o=e.props.value,void 0!==Z&&void 0!==o&&(Array.isArray(Z)?Z.indexOf(o)>=0:o===Z)):e.props.selected,size:e.props.size||D,fullWidth:m,color:e.props.color||c,disabled:e.props.disabled||u}):null})}))});var D=b},87054:function(e,o,a){"use strict";a.d(o,{Z:function(){return j}});var t=a(63366),n=a(87462),l=a(67294),s=a(86010),r=a(94780),i=a(41796),d=a(50522),c=a(36622),u=a(78884),p=a(67074),m=a(1588),x=a(34867);function f(e){return(0,x.Z)("MuiToggleButton",e)}let h=(0,m.Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]);var v=a(85893);let g=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],b=e=>{let{classes:o,fullWidth:a,selected:t,disabled:n,size:l,color:s}=e,i={root:["root",t&&"selected",n&&"disabled",a&&"fullWidth",`size${(0,c.Z)(l)}`,s]};return(0,r.Z)(i,f,o)},D=(0,p.ZP)(d.Z,{name:"MuiToggleButton",slot:"Root",overridesResolver(e,o){let{ownerState:a}=e;return[o.root,o[`size${(0,c.Z)(a.size)}`]]}})(({theme:e,ownerState:o})=>{let a,t="standard"===o.color?e.palette.text.primary:e.palette[o.color].main;return e.vars&&(t="standard"===o.color?e.vars.palette.text.primary:e.vars.palette[o.color].main,a="standard"===o.color?e.vars.palette.text.primaryChannel:e.vars.palette[o.color].mainChannel),(0,n.Z)({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},o.fullWidth&&{width:"100%"},{[`&.${h.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,i.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.selected}`]:{color:t,backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:(0,i.Fq)(t,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${a} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,i.Fq)(t,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:(0,i.Fq)(t,e.palette.action.selectedOpacity)}}}},"small"===o.size&&{padding:7,fontSize:e.typography.pxToRem(13)},"large"===o.size&&{padding:15,fontSize:e.typography.pxToRem(15)})}),Z=l.forwardRef(function(e,o){let a=(0,u.Z)({props:e,name:"MuiToggleButton"}),{children:l,className:r,color:i="standard",disabled:d=!1,disableFocusRipple:c=!1,fullWidth:p=!1,onChange:m,onClick:x,selected:f,size:h="medium",value:Z}=a,j=(0,t.Z)(a,g),I=(0,n.Z)({},a,{color:i,disabled:d,disableFocusRipple:c,fullWidth:p,size:h}),y=b(I),C=e=>{x&&(x(e,Z),e.defaultPrevented)||!m||m(e,Z)};return(0,v.jsx)(D,(0,n.Z)({className:(0,s.Z)(y.root,r),disabled:d,focusRipple:!c,ref:o,onClick:C,onChange:m,value:Z,ownerState:I,"aria-pressed":f},j,{children:l}))});var j=Z},68374:function(e,o,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/formularios/recebimento-mp",function(){return a(37265)}])},62094:function(e,o,a){"use strict";var t=a(85893),n=a(11163),l=a.n(n),s=a(67294),r=a(60664),i=a(49837),d=a(91359),c=a(79072),u=a(87536),p=a(86501),m=a(45061),x=a(64165),f=a(86887),h=a(47842),v=a(60565),g=a(83830),b=a(29308),D=a(67569),Z=a(41088),j=a(40039);let I=e=>{var o;let{id:a,btnClose:n,handleModalClose:I,setNewChange:y,newChange:C,outsideID:S,handleConfirmNew:w,manualUrl:P}=e,[N,F]=(0,s.useState)(!1),[R,M]=(0,s.useState)(null),{setId:E}=(0,s.useContext)(g.X),z=l(),O=a&&a>0?"edit":"new",k=z.pathname,{title:V}=(0,s.useContext)(v.f),{startLoading:A,stopLoading:T}=(0,Z.Z)(),{user:$,loggedUnity:H}=(0,s.useContext)(j.V),{trigger:_,handleSubmit:q,reset:B,control:L,formState:{errors:W},register:G}=(0,u.cI)({mode:"onChange"}),U=async e=>{let o={...e,usuarioID:$.usuarioID,unidadeID:H.unidadeID};A();try{"new"===O?await r.h.post("cadastros/tipo-veiculo/new/insertData",o).then(e=>{S?(E(S),w(e.data.value)):(z.push("".concat((0,x.g_)(k))),E(e.data.id)),p.ZP.success(x.OD.successNew)}):"edit"===O&&(await r.h.post("".concat(k,"/updateData/").concat(a),o),p.ZP.success(x.OD.successUpdate))}catch(t){t.response&&409===t.response.status?p.ZP.error(x.OD.errorRepeated):console.log(t)}finally{T()}},X=async()=>{try{await r.h.delete("".concat(k,"/").concat(a,"/").concat($.usuarioID,"/").concat(H.unidadeID)),E(null),F(!1),p.ZP.success(x.OD.successDelete)}catch(e){e.response&&409===e.response.status?(p.ZP.error(x.OD.pendingDelete),F(!1)):console.log(e)}},Q=async()=>{try{"edit"===O?await r.h.post("".concat(k,"/getData/").concat(a),{id:a}).then(e=>{M(e.data),B(e.data)}):M({fields:{nome:"",status:1}})}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{Q(),setTimeout(()=>{_()},300)},[a]),(0,t.jsxs)(t.Fragment,{children:[!R&&(0,t.jsx)(h.Z,{}),R&&(0,t.jsxs)("form",{onSubmit:q(U),children:[(0,t.jsx)(f.Z,{btnCancel:!0,btnNew:!w,btnSave:!0,manualUrl:P,btnClose:n,handleModalClose:I,handleSubmit:()=>q(U),btnDelete:"edit"===O,onclickDelete:()=>setOpenDelete(!0),type:O,outsideID:S}),(0,t.jsx)(i.Z,{children:(0,t.jsx)(d.Z,{children:(0,t.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(b.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:L,errors:null==W?void 0:null===(o=W.fields)||void 0===o?void 0:o.nome}),(0,t.jsx)(D.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==R?void 0:R.fields.status,typePage:O,register:G})]})})})]}),(0,t.jsx)(m.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+V.title,openModal:N,handleClose:()=>F(!1),handleSubmit:X,btnCancel:!0,btnConfirm:!0})]})};o.Z=I},76904:function(e,o,a){"use strict";var t=a(85893),n=a(11163),l=a.n(n),s=a(67294),r=a(60664),i=a(49837),d=a(91359),c=a(79072),u=a(87536),p=a(86501),m=a(45061),x=a(86887),f=a(64165),h=a(60565),v=a(83830),g=a(40039),b=a(29308),D=a(67569),Z=a(41088);let j=e=>{var o;let{id:a,btnClose:n,handleModalClose:j,setNewChange:I,newChange:y,outsideID:C,handleConfirmNew:S,manualUrl:w}=e,[P,N]=(0,s.useState)(!1),[F,R]=(0,s.useState)(null),{setId:M}=(0,s.useContext)(v.X),E=l(),z=a&&a>0?"edit":"new",O=E.pathname,{title:k}=(0,s.useContext)(h.f),{loggedUnity:V,user:A}=(0,s.useContext)(g.V),{startLoading:T,stopLoading:$}=(0,Z.Z)(),{trigger:H,handleSubmit:_,reset:q,control:B,formState:{errors:L},register:W}=(0,u.cI)({mode:"onChange"}),G=async e=>{let o={...e,usuarioID:A.usuarioID,unidadeID:V.unidadeID};try{"new"===z?await r.h.post("cadastros/transportador/new/insertData",o).then(e=>{C?(M(C),S(e.data.value)):(E.push("".concat((0,f.g_)(O))),M(e.data.id)),p.ZP.success(f.OD.successNew)}):"edit"===z&&(await r.h.post("".concat(O,"/updateData/").concat(a),o),p.ZP.success(f.OD.successUpdate))}catch(t){t.response&&409===t.response.status?p.ZP.error(f.OD.errorRepeated):console.log(t)}finally{$()}},U=async()=>{try{await r.h.delete("".concat(O,"/").concat(a,"/").concat(A.usuarioID,"/").concat(V.unidadeID)),M(null),N(!1),p.ZP.success(f.OD.successDelete)}catch(e){e.response&&409===e.response.status?(p.ZP.error(f.OD.pendingDelete),N(!1)):console.log(e)}},X=async()=>{try{"edit"===z?await r.h.post("".concat(O,"/getData/").concat(a),{id:a}).then(e=>{R(e.data),q(e.data)}):R({fields:{nome:"",status:1}})}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{X(),setTimeout(()=>{H()},300)},[a]),(0,t.jsxs)(t.Fragment,{children:[F&&(0,t.jsxs)("form",{onSubmit:_(G),children:[(0,t.jsx)(x.Z,{btnCancel:!0,btnNew:!S,btnSave:!0,manualUrl:w,btnClose:n,handleModalClose:j,handleSubmit:()=>_(G),btnDelete:"edit"===z,onclickDelete:()=>setOpenDelete(!0),type:z,outsideID:C}),(0,t.jsx)(i.Z,{children:(0,t.jsx)(d.Z,{children:(0,t.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(b.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:B,errors:null==L?void 0:null===(o=L.fields)||void 0===o?void 0:o.nome}),(0,t.jsx)(D.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==F?void 0:F.fields.status,typePage:z,register:W})]})})})]}),(0,t.jsx)(m.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+k.title,openModal:P,handleClose:()=>N(!1),handleSubmit:U,btnCancel:!0,btnConfirm:!0})]})};o.Z=j},93250:function(e,o,a){"use strict";var t=a(85893),n=a(49837),l=a(91359),s=a(69175);let r=e=>{let{result:o,columns:a,btnNew:r=!0,btnPrint:i=!0,btnBack:d,openModal:c,modalLog:u}=e;return(0,t.jsx)(n.Z,{children:(0,t.jsx)(l.Z,{sx:{pt:"0"},children:(0,t.jsx)(s.Z,{rows:o,columns:a,modalLog:u,buttonsHeader:{btnNew:r,btnPrint:i,btnBack:d,openModal:c}})})})};o.Z=r},46905:function(e,o,a){"use strict";var t=a(85893),n=a(87536),l=a(79072),s=a(55343),r=a(67836);let i=e=>{let{xs:o,md:a,title:i,name:d,disabled:c,required:u,form:p,onChange:m}=e;return(0,t.jsx)(l.ZP,{item:!0,xs:o,md:a,children:(0,t.jsx)("div",{children:(0,t.jsx)(s.Z,{fullWidth:!0,children:(0,t.jsx)(n.Qr,{name:d,control:p.control,rules:{required:u},render(e){let{field:o}=e;return(0,t.jsx)(r.Z,{label:i,value:null==o?void 0:o.value,placeholder:i,type:"date",size:"small","aria-describedby":"validation-schema-nome",disabled:c,error:!!p.formState.errors[d],onChange(e){let a=e.target.value;o.onChange(a),m&&m(a)},InputLabelProps:{shrink:!0},inputProps:{min:"1900-01-01",max:"2100-01-01"}})}})})})})};o.Z=i},55148:function(e,o,a){"use strict";var t=a(85893),n=a(79072),l=a(55343),s=a(35966),r=a(67836),i=a(87536),d=a(53934),c=a(30944);let u=e=>{let{xs:o,md:a,title:u,options:p,form:m,name:x,limitTags:f,value:h,required:v,disabled:g,multiple:b,onChange:D,className:Z,keyProps:j,createNew:I,helpText:y,helpTextPosition:C}=e,S=I?[{id:null,name:"-- Novo --"},...null!=p?p:[]]:p,{key:w}=(0,c.L0)();return(0,t.jsx)(n.ZP,{item:!0,xs:o,md:a,sx:{my:1},className:Z,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.Z,{fullWidth:!0,children:(0,t.jsx)(i.Qr,{name:x,control:m.control,rules:{required:v},render(e){var o;let{field:a}=e;return(0,t.jsx)(s.Z,{options:S.map(e=>e.name),value:null!=h?h:null===(o=m.getValues(x))||void 0===o?void 0:o.name,onChange(e,o){let a=S.find(e=>e.name===o);m.setValue(x,null!=a?a:null),D&&D(o)},renderInput(e){var o;return(0,t.jsx)(r.Z,{...e,id:"customSelect",size:"small",label:u,placeholder:u,error:!!m.formState.errors[x],helperText:null===(o=m.formState.errors[x])||void 0===o?void 0:o.message})}},j||w)}})}),y&&(0,t.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,t.jsx)(d.Z,{text:y,position:null!=C?C:"top"})})]})})};o.Z=u},63067:function(e,o,a){"use strict";a.r(o);var t=a(85893),n=a(67294),l=a(46905),s=a(55148),r=a(51570),i=a(30944);let d=()=>{var e,o;let{form:a,setNames:d,filterDate:c,SelectFilterByName:u,dataRecebimentoMP:p,setFilteredDataRecebimentoMP:m,handleSearch:x,key:f,searchText:h}=(0,i.L0)(),{commonData:v}=(0,r.Lq)(),g=p,b=async()=>{m(g=await u(g=await u(g=await u(g=await c(g=await x(g)),"status"),"profissional"),"modelo"))};return(0,n.useEffect)(()=>{b()},[f]),(0,n.useEffect)(()=>{d(["dataInicio","dataFim","status","profissional","modelo"])},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{xs:12,md:6,title:"Data inicio",name:"dataInicio",form:a}),(0,t.jsx)(l.Z,{xs:12,md:6,title:"Data Fim",name:"dataFim",form:a}),(0,t.jsx)(s.Z,{xs:12,md:6,title:"Status",name:"status",form:a,options:v.status}),(0,t.jsx)(s.Z,{xs:12,md:6,title:"Profissional",name:"profissional",value:null===(e=a.getValues("profissional"))||void 0===e?void 0:e.name,form:a,options:v.professional}),(0,t.jsx)(s.Z,{xs:12,md:6,title:"Modelo",name:"modelo",value:null===(o=a.getValues("modelo"))||void 0===o?void 0:o.name,form:a,options:v.recebimentoModel})]})};o.default=d},37265:function(e,o,a){"use strict";a.r(o),a.d(o,{default:function(){return ea}});var t=a(85893),n=a(67294),l=a(60664),s=a(93250),r=a(87536),i=a(99734),d=a(34282),c=a(29308),u=a(23895),p=a(7071),m=a(61953),x=a(49837),f=a(91359),h=a(29630),v=a(79072),g=a(55343),b=a(11163),D=a.n(b),Z=a(64165),j=a(86887),I=a(83830),y=a(40039),C=a(39976),S=a(86501),w=a(66136),P=a(80377),N=a(44373),F=a(56531),R=a(50287),M=a(84220),E=a(44731);let z=e=>{var o,a,l;let{value:s}=e,{settings:r}=(0,n.useContext)(w.J6);return(0,t.jsx)(x.Z,{style:{height:"100%"},children:(0,t.jsx)(f.Z,{sx:{textAlign:"center"},children:(0,t.jsx)("div",{className:"flex flex-col items-center gap-1",children:(null==s?void 0:s.nome_)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(E.Z,{variant:"rounded",sx:{width:70,height:70},className:"p-1 ".concat("dark"===r.mode?"!bg-[#e0e0e0]":"!bg-[#f5f5f5]"),children:(0,t.jsx)("img",{src:null!==(o=null==s?void 0:s.foto)&&void 0!==o?o:"/imageDefault/factory.svg",alt:"Imagem da logo da f\xe1brica"})})}),(0,t.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:null==s?void 0:s.nome_}),(0,t.jsx)(h.Z,{variant:"subtitle2",children:null==s?void 0:s.cnpj_}),s.email?(0,t.jsx)(h.Z,{variant:"subtitle2",children:null==s?void 0:s.email}):(0,t.jsx)(h.Z,{variant:"subtitle2",color:"error",sx:{textTransform:"italic"},children:"E-mail n\xe3o informado"}),(null==s?void 0:s.telefone)&&(0,t.jsx)(h.Z,{variant:"subtitle2",children:null!==(a=null==s?void 0:s.telefone)&&void 0!==a?a:"--"}),(null==s?void 0:s.cidade)&&(0,t.jsx)(h.Z,{variant:"subtitle2",children:null!==(l=null==s?void 0:s.cidade)&&void 0!==l?l:"--"})]}):(0,t.jsx)(h.Z,{variant:"subtitle1",children:"-- Selecione um fornecedor --"})})})})};var O=a(22841),k=a(75158);a(3893);var V=a(21609);let A=e=>{var o,a,n,l,s,r,i,d,u,p;let{value:m,index:x,apresentacoes:f,setValue:h,register:v,control:g,errors:b,disabled:D}=e;return console.log("\uD83D\uDE80 ~ value:",m),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{xs:12,md:2,title:"Quantidade",name:"produtos[".concat(x,"].quantidade"),register:v,control:g,errors:null==b?void 0:null===(o=b.produtos)||void 0===o?void 0:null===(a=o[x])||void 0===a?void 0:a.quantidade,disabled:D,mask:"fractioned3"}),(0,t.jsx)(R.Z,{xs:12,md:2,title:"Data da fabrica\xe7\xe3o",value:m.dataFabricacao,name:"produtos[".concat(x,"].dataFabricacao"),control:g,errors:null==b?void 0:null===(n=b.produtos)||void 0===n?void 0:null===(l=n[x])||void 0===l?void 0:l.dataFabricacao,disabled:D,typeValidation:"dataPassado"}),(0,t.jsx)(c.Z,{xs:12,md:2,title:"N\xba Lote",name:"produtos[".concat(x,"].lote"),register:v,control:g,errors:null==b?void 0:null===(s=b.produtos)||void 0===s?void 0:null===(r=s[x])||void 0===r?void 0:r.lote,disabled:D}),(0,t.jsx)(M.Z,{xs:12,md:4,title:"Apresenta\xe7\xe3o",name:"produtos[".concat(x,"].apresentacao"),type:"string",options:null!=f?f:[],register:v,setValue:h,control:g,errors:null==b?void 0:null===(i=b.produtos)||void 0===i?void 0:null===(d=i[x])||void 0===d?void 0:d.apresentacao,disabled:D}),(0,t.jsx)(R.Z,{xs:12,md:2,title:"Data de validade",value:m.dataValidade,name:"produtos[".concat(x,"].dataValidade"),control:g,errors:null==b?void 0:null===(u=b.produtos)||void 0===u?void 0:null===(p=u[x])||void 0===p?void 0:p.dataValidade,disabled:D})]})},T=e=>{let{index:o,produto:a,setProdutos:s,handleCheck:r,getValues:i,setValue:d,register:c,control:u,errors:p,disabled:x}=e;console.log("\uD83D\uDE80 ~ produto:",a);let[f,g]=(0,n.useState)([]),b=async()=>{try{let e=await l.h.get("/cadastros/apresentacao");g(e.data)}catch(o){console.log("\uD83D\uDE80 ~ error:",o)}};return(0,n.useEffect)(()=>{b()},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(v.ZP,{container:!0,spacing:4,sx:{pb:2},children:[(0,t.jsx)("input",{type:"hidden",value:a.produtoID,name:"produtos[".concat(o,"].produtoID"),...c("produtos[".concat(o,"].produtoID"))}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(O.Z,{control:(0,t.jsx)(k.Z,{onClick:e=>r(e,o),checked:!!a.checked_,disabled:x}),label:a.nome,size:"small",sx:{marginRight:"4px","&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}})}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:8,children:(0,t.jsx)(m.Z,{display:"flex",alignItems:"center",justifyContent:"end",sx:{gap:4,mt:3},children:(0,t.jsxs)(h.Z,{variant:"body2",children:["\xdaltima avalia\xe7\xe3o: ",a.ultimaAvaliacao]})})}),a.checked_&&(0,t.jsx)(A,{value:a,apresentacoes:f,index:o,setValue:d,register:c,control:u,errors:p,disabled:x},a.produtoID)]})})};var $=a(22991);let H=e=>{var o,a,s,r,i,d,u,p,g;let{recebimentoMpID:b,modelo:D,values:Z,fields:j,disabled:I,register:C,errors:S,getValues:w,setValue:P,control:E,getAddressByCep:O,nameSelected:k,setNameSelected:A,columnSelected:H,setColumnSelected:_,openModalNew:q,setOpenModalNew:B,newChange:L,setNewChange:W,setProdutos:G,produtos:U}=e,{user:X,loggedUnity:Q}=(0,n.useContext)(y.V),[J,K]=(0,n.useState)([]),[Y,ee]=(0,n.useState)([]),[eo,ea]=(0,n.useState)(null),et=async()=>{let e=await l.h.post("/cadastros/setor/getProfissionaisSetoresAssinatura",{formularioID:2,modeloID:D.id,unidadeID:Q.unidadeID});K(e.data.preenche),el(e.data.preenche)},en=async()=>{let e=await l.h.post("/formularios/fornecedor/getFornecedoresAprovados",{unidadeID:Q.unidadeID,recebimentoMpID:b,modelo:D});ee(e.data),es(Z.fornecedor,e.data)},el=e=>{let o=X.profissionalID,a=e.find(e=>e.id===o);a&&a.id>0&&P("fieldsHeader.profissional",a)},es=(e,o)=>{var a,t;if(!e){ea(null),G([]);return}let n=U.filter(e=>!0===e.checked_).map(e=>e.produtoID),l=null===(a=o.find(o=>o.id===e.id))||void 0===a?void 0:null===(t=a.produtos)||void 0===t?void 0:t.map(e=>n.includes(e.produtoID)?{...e,checked_:!0}:e);G(l),P("produtos",l)},er=(e,o)=>{let{checked:a}=e.target;P("produtos[".concat(o,"].checked_"),a);let t=U.map((e,t)=>t===o?{...e,checked_:a}:e);G(t)};return(0,n.useEffect)(()=>{en(),et()},[Z]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(x.Z,{style:{height:"100%"},children:(0,t.jsxs)(f.Z,{children:[(0,t.jsxs)(v.ZP,{container:!0,alignItems:"stretch",spacing:6,children:[(0,t.jsx)(v.ZP,{item:!0,xs:12,sx:{textAlign:"right"},children:(0,t.jsx)($.Z,{data:null!==(p=null==Z?void 0:Z.setores)&&void 0!==p?p:[]})}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:10,children:(0,t.jsxs)(v.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(R.Z,{xs:12,md:2,title:"Data da abertura",name:"fieldsHeader.abertoPor.dataInicio",type:"date",value:null==Z?void 0:null===(o=Z.abertoPor)||void 0===o?void 0:o.dataInicio,disabled:!0,control:E,alertRequired:!0}),(0,t.jsx)(c.Z,{xs:12,md:2,title:"Hora da abertura",name:"fieldsHeader.abertoPor.horaInicio",type:"time",disabled:!0,register:C,control:E,alertRequired:!0}),(0,t.jsx)(c.Z,{xs:12,md:8,title:"Profissional que abriu",name:"fieldsHeader.abertoPor.profissional.nome",value:null==Z?void 0:null===(a=Z.abertoPor)||void 0===a?void 0:null===(s=a.profissional)||void 0===s?void 0:s.nome,disabled:!0,register:C,control:E,alertRequired:!0}),(0,t.jsx)(R.Z,{xs:12,md:2,title:"Data da avalia\xe7\xe3o",name:"fieldsHeader.data",type:"date",value:null!==(g=null==Z?void 0:Z.data)&&void 0!==g?g:new Date,disabled:I,register:C,control:E,typeValidation:"dataPassado",daysValidation:365,errors:null==S?void 0:null===(r=S.fieldsHeader)||void 0===r?void 0:r.data,alertRequired:!0}),(0,t.jsx)(c.Z,{xs:12,md:2,title:"Hora da avalia\xe7\xe3o",name:"fieldsHeader.hora",type:"time",disabled:I,register:C,control:E,errors:null==S?void 0:null===(i=S.fieldsHeader)||void 0===i?void 0:i.hora,alertRequired:!0}),(0,t.jsx)(M.Z,{xs:12,md:4,title:"Profissional preenchimento",name:"fieldsHeader.profissional",type:"string",options:J,disabled:I,register:C,setValue:P,control:E,errors:null==S?void 0:null===(d=S.fieldsHeader)||void 0===d?void 0:d.profissional,alertRequired:!0}),(0,t.jsx)(F.Z,{register:C,errors:S,setValue:P,control:E,fields:j,values:j,getAddressByCep:O,disabled:I,nameSelected:k,setNameSelected:A,getValues:w,columnSelected:H,setColumnSelected:_,openModalNew:q,setOpenModalNew:B,newChange:L,setNewChange:W}),(0,t.jsx)(M.Z,{xs:12,md:12,title:"Fornecedor",name:"fieldsHeader.fornecedor",type:"string",options:null!=Y?Y:[],onChange:e=>es(e,Y),value:null==Z?void 0:Z.fornecedor,disabled:I,register:C,setValue:P,control:E,errors:null==S?void 0:null===(u=S.fieldsHeader)||void 0===u?void 0:u.fornecedor,alertRequired:!0})]})}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:2,children:(0,t.jsx)(z,{value:eo})})]}),(0,t.jsxs)(v.ZP,{container:!0,alignItems:"stretch",spacing:6,sx:{mt:2},children:[(0,t.jsxs)(v.ZP,{item:!0,xs:12,children:[(0,t.jsx)(h.Z,{color:"primary",variant:"subtitle1",sx:{fontWeight:700},children:"Produtos aprovados do fornecedor"}),U&&0==U.length&&(0,t.jsx)(h.Z,{color:"warning",variant:"subtitle1",className:"italic",children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(V.Z,{icon:"typcn:warning",color:"#FFC107"}),(0,t.jsx)("p",{children:"Nenhum fornecedor selecionado!"})]})})]}),(0,t.jsx)(v.ZP,{item:!0,xs:12,children:U&&U.map((e,o)=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T,{index:o,produto:e,setProdutos:G,handleCheck:er,getValues:w,setValue:P,register:C,control:E,errors:S,disabled:I},o),o<U.length-1&&(0,t.jsx)(N.Z,{})]}))})]})]})})})};var _=a(41088),q=a(92629),B=a(1503),L=a(76904),W=a(1322),G=a(62094),U=a(934),X=a(91757);let Q=e=>{var o,a,s;let b;let{id:N,model:F}=e,{menu:R,user:M,loggedUnity:E,hasSectorPermission:z}=(0,n.useContext)(y.V),[O,k]=(0,n.useState)(!1),[V,A]=(0,n.useState)(!1),[T,$]=(0,n.useState)(!1),[Q,J]=(0,n.useState)(!1),[K,Y]=(0,n.useState)(!1),[ee,eo]=(0,n.useState)(!1),[ea,et]=(0,n.useState)(null),[en,el]=(0,n.useState)(!0),[es,er]=(0,n.useState)(null),[ei,ed]=(0,n.useState)([]),[ec,eu]=(0,n.useState)([]),[ep,em]=(0,n.useState)(null),{createNewNotification:ex}=(0,n.useContext)(C.u),[ef,eh]=(0,n.useState)(!1),[ev,eg]=(0,n.useState)([]),[eb,eD]=(0,n.useState)([]),[eZ,ej]=(0,n.useState)([]),[eI,ey]=(0,n.useState)(null),[eC,eS]=(0,n.useState)([]),[ew,eP]=(0,n.useState)(null),[eN,eF]=(0,n.useState)(""),[eR,eM]=(0,n.useState)(!1),[eE,ez]=(0,n.useState)(!1),[eO,ek]=(0,n.useState)({status:!1,errors:[]}),[eV,eA]=(0,n.useState)(null),{settings:eT}=(0,n.useContext)(w.J6),{setId:e$}=(0,n.useContext)(I.X),{isLoading:eH,startLoading:e_,stopLoading:eq}=(0,_.Z)(),[eB,eL]=(0,n.useState)(!1),{setReportParameters:eW,sendPdfToServer:eG}=(0,B.Gc)(),[eU,eX]=(0,n.useState)(!1),[eQ,eJ]=(0,n.useState)(!1),[eK,eY]=(0,n.useState)(null),[e0,e1]=(0,n.useState)(null),[e3,e6]=(0,n.useState)({status:!1,message:"Voc\xea n\xe3o tem permiss\xf5es",messageType:"info"}),e2=D(),e8=N&&N>0?"edit":"new",e7="edit"==e8?e2.pathname:(0,Z.g_)(e2.pathname),{reset:e5,register:e4,getValues:e9,setValue:oe,control:oo,watch:oa,handleSubmit:ot,clearErrors:on,setError:ol,formState:{errors:os}}=(0,r.cI)(),or=()=>{e$(es.modelo.id),e2.push("/configuracoes/formularios/recebimento-mp/")},oi=async e=>{let o={status:30,observacao:null==e?void 0:e.obs,auth:{usuarioID:M.usuarioID,papelID:M.papelID,unidadeID:E.unidadeID}};try{Y(!0),await l.h.post("".concat(e7,"/changeFormStatus/").concat(N),o).then(e=>{S.ZP.success(Z.OD.successUpdate),Y(!1),oZ(ep,null,null)})}catch(a){console.log(a)}finally{k(!O)}},od={id:1,name:"Reabrir formul\xe1rio",description:"Reabrir formul\xe1rio para preenchimento.",component:(0,t.jsx)(X.Z,{}),disabled:!!ee,route:null,type:null,action:oi,modal:!0,size:"sm",icon:"heroicons:lock-open",identification:null},oc=[];1==M.papelID&&eN.status>=40&&oc.push(od),1==M.papelID&&(b=!1,R.map(e=>{e.menu.map(e=>{e.submenu&&e.submenu.length>0&&e.submenu.map(e=>{"/configuracoes/formularios"==e.rota&&(b=!0)})})}),b)&&oc.push({id:2,name:"Configura\xe7\xf5es do formul\xe1rio",description:"Alterar as configura\xe7\xf5es do modelo de formul\xe1rio.",route:null,type:null,action:or,modal:!1,icon:"bi:gear",identification:null});let ou=async()=>{},op=()=>{e_();try{l.h.post("".concat(e7,"/getData"),{id:null!=N?N:0,type:e8,profissionalID:M.profissionalID,unidadeID:E.unidadeID,modeloID:null!=F?F:0}).then(e=>{var o,a,t,n;console.log("getData: ",e.data),eg(e.data.fieldsHeader),eD(e.data.fieldsFooter),ej(e.data.fields),ed(e.data.produtos),eS(e.data.blocos),eu(e.data.grupoAnexo),eF(e.data.info),er(e.data.unidade),ey(e.data.link),eP(e.data.ultimaMovimentacao),ob(e.data.blocos),et(e.data.naoConformidade) //! Seta não conformidades
,e5(e.data);let l=Z.WR[null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(a=o.info)||void 0===a?void 0:a.status];em(l),e6({status:!!(1==M.papelID&&e.data.info.status<40&&z(null!==(n=null===(t=e.data.fieldsHeader)||void 0===t?void 0:t.setores)&&void 0!==n?n:[])),message:e.data.info.status>40?"Esse formul\xe1rio j\xe1 foi conclu\xeddo, n\xe3o \xe9 mais poss\xedvel alterar as informa\xe7\xf5es!":e.data.info.status<40?"Formul\xe1rio aberto para preenchimento!":40==e.data.info.status?"Este formul\xe1rio est\xe1 aguardando aprova\xe7\xe3o!":null,messageType:"info"}),ou()}).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e)})}catch(e){console.log("\uD83D\uDE80 ~ error:",e)}finally{eq()}},om=!1,ox=[],of=(e,o)=>{ol(e,{type:"manual",message:"Campo obrigat\xf3rio"}),ox.push(o),om=!0},oh=()=>{on(),e9("fieldsHeader.data")||of("fieldsHeader.data","Data da avalia\xe7\xe3o"),e9("fieldsHeader.hora")||of("fieldsHeader.hora","Hora da avalia\xe7\xe3o"),null==eZ||eZ.forEach((e,o)=>{let a=e.tabela?"fields[".concat(o,"].").concat(e.tabela):"fields[".concat(o,"].").concat(e.nomeColuna),t=e9(a);1!==e.obrigatorio||t||of(a,null==e?void 0:e.nomeCampo)}),ei&&ei.length>0&&ei.forEach((e,o)=>{e.produtoAnexosDescricao&&e.produtoAnexosDescricao.forEach((a,t)=>{1===a.obrigatorio&&0==a.anexos.length&&(ol("produtos[".concat(o,"].produtoAnexosDescricao[").concat(t,"].anexos"),{type:"manual",message:"Campo obrigat\xf3rio"}),ox.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==a?void 0:a.nome)),om=!0)})}),eC.forEach((e,o)=>{e.itens.forEach((e,a)=>{let t=e9("blocos[".concat(o,"].itens[").concat(a,"].resposta"));(null==e?void 0:e.obrigatorio)!==1||t||(ol("blocos[".concat(o,"].itens[").concat(a,"].resposta"),{type:"manual",message:"Campo obrigat\xe1rio"}),ox.push(null==e?void 0:e.nome),om=!0),e.respostaConfig&&1==e.respostaConfig.anexo&&e.respostaConfig.anexosSolicitados.length>0&&e.respostaConfig.anexosSolicitados.forEach((t,n)=>{1==t.obrigatorio&&t.anexos&&0==t.anexos.length&&(ol("blocos[".concat(o,"].itens[").concat(a,"].respostaConfig.anexosSolicitados[").concat(n,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),ox.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==t?void 0:t.nome)),om=!0)})})}),ec&&ec.length>0&&ec.forEach((e,o)=>{e.itens.forEach((a,t)=>{1===a.obrigatorio&&0==a.anexos.length&&(ol("grupoAnexo[".concat(o,"].itens[").concat(t,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),ox.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==a?void 0:a.nome)),om=!0)})}),ek({status:om,errors:ox})},ov=async e=>{if(9===e.length){let o=e.replace(/[^0-9]/g,"");try{let a=await l.h.get("https://viacep.com.br/ws/".concat(o,"/json/"));a.data.localidade?(eZ.forEach(async(e,o)=>{("logradouro"===e.nomeColuna||"bairro"===e.nomeColuna||"cidade"===e.nomeColuna||"estado"===e.nomeColuna)&&(await oe("fields[".concat(o,"].logradouro"),a.data.logradouro),await oe("fields[".concat(o,"].bairro"),a.data.bairro),await oe("fields[".concat(o,"].cidade"),a.data.localidade),await oe("fields[".concat(o,"].estado"),a.data.uf))}),S.ZP.success("Endere\xe7o encontrado!")):S.ZP.error("Endere\xe7o n\xe3o encontrado!")}catch(t){console.error(t)}}},og=e=>{eA(e),oh(),eM(!0)},ob=e=>{let o=!0;e.forEach(e=>{e.itens.forEach(e=>{e.respostaConfig&&1==e.respostaConfig.bloqueiaFormulario&&(o=!1)})}),el(o)},oD=async e=>{e.conclusion=!0,await ot(oj)(e)},oZ=(e,o,a)=>{let t=30==e?"Em preenchimento":40==e?"Conclu\xeddo":50==e?"Reprovado":60==e?"Aprovado parcialmente":70==e?"Aprovado":"Pendente",n={titulo:"Formul\xe1rio de Fornecedor ".concat(t),descricao:"O formul\xe1rio de Fornecedor #".concat(N," est\xe1 ").concat(t,"."),url:"/formularios/fornecedor/",urlID:N,tipoNotificacaoID:6,usuarioGeradorID:M.usuarioID,usuarioID:0,unidadeID:E.unidadeID,papelID:1};if(n&&(ex(n),o)){let l={titulo:"Fornecedor gerado",descricao:"O formul\xe1rio de Fornecedor #".concat(N," est\xe1 ").concat(t," e gerou uma n\xe3o conformidade."),url:"/formularios/fornecedor/nao-conformidade/",urlID:a,tipoNotificacaoID:5,usuarioGeradorID:M.usuarioID,usuarioID:0,unidadeID:E.unidadeID,papelID:1};ex(l)}},oj=async function(e){var o,a;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===t.conclusion&&(e.concluiForm=!0,e.info.status=null!==(o=t.status)&&void 0!==o?o:eN.status,e.obsConclusao=t.obsConclusao);let n={form:e,auth:{usuarioID:M.usuarioID,profissionalID:null!==(a=M.profissionalID)&&void 0!==a?a:0,papelID:M.papelID,unidadeID:E.unidadeID}};if(!0!=N){eM(!1);try{"edit"==e8?await l.h.post("".concat(e7,"/updateData/").concat(N),n).then(o=>{S.ZP.success(Z.OD.successUpdate),oZ(e.status,e.naoConformidade,null)}):"new"==e8?await l.h.post("".concat(e7,"/insertData"),n).then(e=>{e$(e.data.recebimentoMpID),e2.push("".concat(e7)),S.ZP.success(Z.OD.successNew)}):S.ZP.error(Z.OD.error)}catch(s){console.log("erro da fun\xe7\xe3o update/email",s)}finally{k(!O)}}},oI=async(e,o)=>{A(!0);let a=e.target.files;if(a&&a.length>0){var t;let n=new FormData;for(let s=0;s<a.length;s++)n.append("files[]",a[s]);n.append("usuarioID",M.usuarioID),n.append("unidadeID",E.unidadeID),n.append("grupoAnexoItemID",null!==(t=o.grupoAnexoItemID)&&void 0!==t?t:null),await l.h.post("".concat(e7,"/saveAnexo/").concat(N,"/grupo-anexo/").concat(M.usuarioID,"/").concat(es.unidadeID),n).then(e=>{let o=e9();oj(o)}).catch(e=>{var o,a,t;S.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao atualizar anexo, tente novamente!")}).finally(()=>{A(!1),k(!O)})}},oy=async(e,o)=>{J(!0);let a=e.target.files;if(a&&a.length>0){var t,n;let s=new FormData;for(let r=0;r<a.length;r++)s.append("files[]",a[r]);s.append("usuarioID",M.usuarioID),s.append("unidadeID",E.unidadeID),s.append("parRecebimentoMpModeloBlocoID",null!==(t=o.parRecebimentoMpModeloBlocoID)&&void 0!==t?t:null),s.append("itemOpcaoAnexoID",null!==(n=o.itemOpcaoAnexoID)&&void 0!==n?n:null),await l.h.post("".concat(e7,"/saveAnexo/").concat(N,"/item/").concat(M.usuarioID,"/").concat(es.unidadeID),s).then(e=>{let o=e9();oj(o)}).catch(e=>{var o,a,t;S.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao atualizar anexo, tente novamente!!!!")}).finally(()=>{J(!1),k(!O)})}},oC=async e=>{e&&await l.h.delete("".concat(e7,"/deleteAnexo/").concat(N,"/").concat(e.anexoID,"/").concat(es.unidadeID,"/").concat(M.usuarioID,"/item")).then(e=>{let o=e9();oj(o)}).catch(e=>{var o,a,t;S.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao remover anexo, tente novamente!")}).finally(()=>{op()})},oS=e=>{e.preventDefault();let o=e9();oj(o)};(0,n.useEffect)(()=>{op()},[N,O]),(0,n.useEffect)(()=>{oh()},[eH]);let ow=async e=>{eJ(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{onSubmit:e=>oS(e),children:[(0,t.jsx)(j.Z,{btnCancel:!0,btnSave:!eN.concluido,btnSend:1==M.papelID&&eN.status>=30&&!eN.concluido,btnPrint:"edit"==e8,btnDelete:eN.status<40,onclickDelete:()=>eL(!0),actionsData:oc,actions:!0,handleSubmit:()=>ot(oj),handleSend:og,iconConclusion:"mdi:check-bold",titleConclusion:"Concluir Formul\xe1rio",title:"Recebimento de MP",btnStatus:1==M.papelID&&"edit"==e8,handleBtnStatus:()=>eh(!0),type:e8,status:ep,setores:null!==(s=null==eb?void 0:eb.setores)&&void 0!==s?s:[]}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[ep&&(0,t.jsx)(p.Z,{size:"small",skin:"light",color:ep.color,label:ep.title,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}}),es&&es.modelo&&(0,t.jsx)(p.Z,{size:"small",HeaderFiel:!0,skin:"light",label:es.modelo.nome,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,t.jsxs)(m.Z,{display:"flex",flexDirection:"column",sx:{gap:6},children:[eN&&""!=eN.cabecalhoModelo&&(0,t.jsx)(x.Z,{children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(h.Z,{variant:"subtitle1",children:eN.cabecalhoModelo})})}),es&&(0,t.jsx)(H,{nameSelected:e0,setNameSelected:e1,columnSelected:eK,setColumnSelected:eY,openModalNew:eQ,setOpenModalNew:eJ,newChange:eU,setNewChange:eX,recebimentoMpID:N,modelo:es.modelo,values:ev,fields:eZ,getValues:e9,disabled:!e3.status,register:e4,errors:os,setValue:oe,control:oo,getAddressByCep:ov,setProdutos:ed,produtos:ei},es.unidadeID),eC&&eC.map((e,o)=>(0,t.jsx)(i.Z,{bloco:e,index:o,blockKey:"parRecebimentoMpModeloBlocoID",setBlocos:eS,setValue:oe,blocos:eC,getValues:e9,register:e4,control:oo,disabled:ee,errors:null==os?void 0:os.blocos,handleFileSelect:oy,handleRemoveAnexoItem:oC,status:eN.status})),ec&&ec.map((e,o)=>(0,t.jsx)(u.Z,{values:{grupo:e,loadingFile:V,indexGrupo:o,handleFileSelect:oI,handleRemove:handleRemoveAnexoGroup,folder:"grupo-anexo",disabled:!e3.status,error:os}},o)),eN&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(x.Z,{children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(v.ZP,{container:!0,spacing:4,children:(0,t.jsx)(v.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(g.Z,{fullWidth:!0,children:[(0,t.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Observa\xe7\xf5es (campo de uso exclusivo da validadora)"}),(0,t.jsx)(c.Z,{title:"Observa\xe7\xe3o (opcional)",name:"info.obs",multiline:!0,rows:4,value:eN.obs,disabled:!e3.status,control:oo})]})})})})})}),eb&&eb.concluded&&(null===(o=eb.conclusion)||void 0===o?void 0:o.profissional)&&(0,t.jsx)(h.Z,{variant:"caption",children:"Conclu\xeddo por ".concat(eb.conclusion.profissional.nome," em ").concat(eb.conclusion.dataFim," ").concat(eb.conclusion.horaFim,".")}),(0,t.jsx)(U.Z,{id:N,parFormularioID:2},O),ef&&(0,t.jsx)(d.Z,{title:"Hist\xf3rico do Formul\xe1rio",text:"Listagem do hist\xf3rico das movimenta\xe7\xf5es do formul\xe1rio ".concat(N," do Recebimento de MP."),id:N,parFormularioID:2,formStatus:eN.status,hasFormPending:ee,canChangeStatus:!1,openModal:ef,handleClose:()=>eh(!1),btnCancel:!0,btnConfirm:!0,handleSubmit:!1}),(0,t.jsx)(P.Z,{openModal:eR,handleClose(){eM(!1),oh()},title:"Concluir Formul\xe1rio",text:"Deseja realmente concluir este formul\xe1rio?",info:eN,canChange:!ee,register:e4,setValue:oe,getValues:e9,control:oo,btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",conclusionForm:oD,listErrors:eO,canApprove:en,hasNaoConformidade:!0,type:"recebimentoMp",unity:es,values:eb,formularioID:2,errors:os,modeloID:null==es?void 0:null===(a=es.modelo)||void 0===a?void 0:a.id}),(0,t.jsx)(q.Z,{title:"Excluir Formul\xe1rio",description:"Tem certeza que deseja exluir o formulario?",params:{route:"formularios/recebimento-mp/delete/".concat(N),messageSucceded:"Formul\xe1rio exclu\xeddo com sucesso!",MessageError:"Dado possui pend\xeancia!"},open:eB,handleClose:()=>eL(!1)})]})]})]}),(0,t.jsx)(W.Z,{title:"transportadorID"==eK?"Novo transportador":"tipoVeiculoID"==eK?"Novo tipo de veiculo":"",size:"md",openModal:eQ,setOpenModal:eJ,children:"transportadorID"==eK?(0,t.jsx)(L.Z,{btnClose:!0,handleModalClose:()=>eJ(!1),setNewChange:eX,newChange:eU,outsideID:!0,handleConfirmNew:ow,manualUrl:"/cadastros/transportador"}):"tipoVeiculoID"==eK?(0,t.jsx)(G.Z,{btnClose:!0,handleModalClose:()=>eJ(!1),setNewChange:eX,newChange:eU,outsideID:!0,handleConfirmNew:ow,manualUrl:"/cadastros/tipo-veiculo"}):null})]})};var J=a(60565),K=a(47842),Y=a(30944),ee=a(63067);let eo=()=>{let{user:e,loggedUnity:o}=(0,n.useContext)(y.V),a=(0,b.useRouter)(),r=a.pathname,{setTitle:i}=(0,n.useContext)(J.f),{id:d,setId:c}=(0,n.useContext)(I.X),{startFilter:u,setFilteredDataRecebimentoMP:p,filteredDataRecebimentoMP:m,setDataRecebimentoMP:x}=(0,Y.L0)(),f=async()=>{await l.h.get("".concat(r,"/getList/").concat(o.unidadeID,"/").concat(e.papelID,"/").concat(e.usuarioID)).then(e=>{p(e.data),x(e.data),i({title:"Recebimento de MP",subtitle:{id:d,count:e.data.length,new:!1}})})};(0,n.useEffect)(()=>{f(),u((0,t.jsx)(ee.default,{}),!1)},[d,c,a.query]);let h=2==e.papelID?[{headerName:"ID",field:"id",size:.1},{headerName:"Data",field:"data",size:.1,type:"date",variant:"naoConformidade"},{headerName:"F\xe1brica",field:"fabrica",size:.2},{headerName:"NF",field:"nf",size:1},{headerName:"Produtos",field:"produtos",size:1},{headerName:"Modelo",field:"modelo",size:.2},{headerName:"Status",field:{name:"status",cor:"cor"},size:.2,type:"statusSteps"}]:[{headerName:"ID",field:"id",size:.1},{headerName:"Data",field:"data",size:.7,type:"date",variant:"naoConformidade"},{headerName:"Fornecedor",field:"fornecedor",size:1},{headerName:"NF",field:"nf",size:.6},{headerName:"Produtos",field:"produtos",size:1},{headerName:"Modelo",field:"modelo",size:1},{headerName:"Status",field:{name:"status",cor:"cor"},size:1,type:"statusSteps"}],v=(0,Z.OL)(r,h);return(0,t.jsx)(t.Fragment,{children:m?d&&d>0?(0,t.jsx)(Q,{id:d,model:null}):(0,t.jsx)(s.Z,{result:m,columns:v},m):(0,t.jsx)(K.Z,{show:!0})})};var ea=eo}},function(e){e.O(0,[4738,4186,1445,1111,5999,172,2187,1515,6887,5061,9525,2697,6545,9774,2888,179],function(){return e(e.s=68374)}),_N_E=e.O()}]);