(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2752],{68374:function(e,o,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/formularios/recebimento-mp",function(){return a(87134)}])},62094:function(e,o,a){"use strict";var t=a(85893),n=a(11163),s=a.n(n),i=a(67294),l=a(60664),r=a(49837),d=a(91359),c=a(79072),u=a(87536),m=a(86501),x=a(45061),p=a(64165),f=a(86887),h=a(47842),v=a(60565),g=a(83830),b=a(29308),j=a(67569),D=a(41088),Z=a(40039);let C=e=>{var o;let{id:a,btnClose:n,handleModalClose:C,setNewChange:y,newChange:I,outsideID:S,handleConfirmNew:P,manualUrl:w}=e,[F,N]=(0,i.useState)(!1),[E,V]=(0,i.useState)(null),{setId:M}=(0,i.useContext)(g.X),k=s(),O=a&&a>0?"edit":"new",z=k.pathname,{title:A}=(0,i.useContext)(v.f),{startLoading:H,stopLoading:R}=(0,D.Z)(),{user:_,loggedUnity:q}=(0,i.useContext)(Z.V),{trigger:T,handleSubmit:L,reset:W,control:X,formState:{errors:U},register:B}=(0,u.cI)({mode:"onChange"}),G=async e=>{let o={...e,usuarioID:_.usuarioID,unidadeID:q.unidadeID};H();try{"new"===O?await l.hi.post("cadastros/tipo-veiculo/new/insertData",o).then(e=>{S?(M(S),P(e.data.value)):(k.push("".concat((0,p.g_)(z))),M(e.data.id)),m.ZP.success(p.OD.successNew)}):"edit"===O&&(await l.hi.post("".concat(z,"/updateData/").concat(a),o),m.ZP.success(p.OD.successUpdate))}catch(t){t.response&&409===t.response.status?m.ZP.error(p.OD.errorRepeated):console.log(t)}finally{R()}},J=async()=>{try{await l.hi.delete("".concat(z,"/").concat(a,"/").concat(_.usuarioID,"/").concat(q.unidadeID)),M(null),N(!1),m.ZP.success(p.OD.successDelete)}catch(e){e.response&&409===e.response.status?(m.ZP.error(p.OD.pendingDelete),N(!1)):console.log(e)}},Q=async()=>{try{"edit"===O?await l.hi.post("".concat(z,"/getData/").concat(a),{id:a}).then(e=>{V(e.data),W(e.data)}):V({fields:{nome:"",status:1}})}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{Q(),setTimeout(()=>{T()},300)},[a]),(0,t.jsxs)(t.Fragment,{children:[!E&&(0,t.jsx)(h.Z,{}),E&&(0,t.jsxs)("form",{onSubmit:L(G),children:[(0,t.jsx)(f.Z,{btnCancel:!0,btnNew:!P,btnSave:!0,manualUrl:w,btnClose:n,handleModalClose:C,handleSubmit:()=>L(G),btnDelete:"edit"===O,onclickDelete:()=>setOpenDelete(!0),type:O,outsideID:S}),(0,t.jsx)(r.Z,{children:(0,t.jsx)(d.Z,{children:(0,t.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(b.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:X,errors:null==U?void 0:null===(o=U.fields)||void 0===o?void 0:o.nome}),(0,t.jsx)(j.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==E?void 0:E.fields.status,typePage:O,register:B})]})})})]}),(0,t.jsx)(x.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+A.title,openModal:F,handleClose:()=>N(!1),handleSubmit:J,btnCancel:!0,btnConfirm:!0})]})};o.Z=C},76904:function(e,o,a){"use strict";var t=a(85893),n=a(11163),s=a.n(n),i=a(67294),l=a(60664),r=a(49837),d=a(91359),c=a(79072),u=a(87536),m=a(86501),x=a(45061),p=a(86887),f=a(64165),h=a(60565),v=a(83830),g=a(40039),b=a(29308),j=a(67569),D=a(41088);let Z=e=>{var o;let{id:a,btnClose:n,handleModalClose:Z,setNewChange:C,newChange:y,outsideID:I,handleConfirmNew:S,manualUrl:P}=e,[w,F]=(0,i.useState)(!1),[N,E]=(0,i.useState)(null),{setId:V}=(0,i.useContext)(v.X),M=s(),k=a&&a>0?"edit":"new",O=M.pathname,{title:z}=(0,i.useContext)(h.f),{loggedUnity:A,user:H}=(0,i.useContext)(g.V),{startLoading:R,stopLoading:_}=(0,D.Z)(),{trigger:q,handleSubmit:T,reset:L,control:W,formState:{errors:X},register:U}=(0,u.cI)({mode:"onChange"}),B=async e=>{let o={...e,usuarioID:H.usuarioID,unidadeID:A.unidadeID};try{"new"===k?await l.hi.post("cadastros/transportador/new/insertData",o).then(e=>{I?(V(I),S(e.data.value)):(M.push("".concat((0,f.g_)(O))),V(e.data.id)),m.ZP.success(f.OD.successNew)}):"edit"===k&&(await l.hi.post("".concat(O,"/updateData/").concat(a),o),m.ZP.success(f.OD.successUpdate))}catch(t){t.response&&409===t.response.status?m.ZP.error(f.OD.errorRepeated):console.log(t)}finally{_()}},G=async()=>{try{await l.hi.delete("".concat(O,"/").concat(a,"/").concat(H.usuarioID,"/").concat(A.unidadeID)),V(null),F(!1),m.ZP.success(f.OD.successDelete)}catch(e){e.response&&409===e.response.status?(m.ZP.error(f.OD.pendingDelete),F(!1)):console.log(e)}},J=async()=>{try{"edit"===k?await l.hi.post("".concat(O,"/getData/").concat(a),{id:a}).then(e=>{E(e.data),L(e.data)}):E({fields:{nome:"",status:1}})}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{J(),setTimeout(()=>{q()},300)},[a]),(0,t.jsxs)(t.Fragment,{children:[N&&(0,t.jsxs)("form",{onSubmit:T(B),children:[(0,t.jsx)(p.Z,{btnCancel:!0,btnNew:!S,btnSave:!0,manualUrl:P,btnClose:n,handleModalClose:Z,handleSubmit:()=>T(B),btnDelete:"edit"===k,onclickDelete:()=>setOpenDelete(!0),type:k,outsideID:I}),(0,t.jsx)(r.Z,{children:(0,t.jsx)(d.Z,{children:(0,t.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(b.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:W,errors:null==X?void 0:null===(o=X.fields)||void 0===o?void 0:o.nome}),(0,t.jsx)(j.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==N?void 0:N.fields.status,typePage:k,register:U})]})})})]}),(0,t.jsx)(x.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+z.title,openModal:w,handleClose:()=>F(!1),handleSubmit:G,btnCancel:!0,btnConfirm:!0})]})};o.Z=Z},24527:function(e,o,a){"use strict";var t=a(85893),n=a(79072),s=a(49837),i=a(91359),l=a(61953),r=a(29630),d=a(21609),c=a(62097);let u=e=>{let{xs:o,md:a,icon:u,id:m,title:x,subtitle:p,action:f,handleClick:h,linkedsForms:v}=e,g=(0,c.Z)();return(0,t.jsx)(n.ZP,{item:!0,xs:o,md:a,children:(0,t.jsx)(s.Z,{sx:{"&:hover":{backgroundColor:"".concat(g.palette.action.hover)},height:"100%",display:"flex",flexDirection:"column"},onClick:h,className:"cursor-pointer shadow-xl transition-all",children:(0,t.jsx)(i.Z,{className:"text-center",sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,t.jsxs)(l.Z,{display:"flex",flexDirection:"column",alignItems:"center",sx:{gap:3,padding:6},children:[(0,t.jsx)(d.Z,{icon:u,width:38,className:"text-[#F8D552]"}),(0,t.jsx)(r.Z,{variant:"h6",className:"!font-extrabold",children:x}),(0,t.jsx)(r.Z,{variant:"subtitle2",children:p}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Z,{icon:"new"==f?"icon-park-solid:add-one":"edit"==f?"grommet-icons:form-next-link":"tabler:select",width:16}),(0,t.jsx)(r.Z,{variant:"body2",color:"primary",children:"new"==f?"Criar novo":"edit"==f?"Acessar":"Selecionar"})]}),(e=>{if(!v)return;let o=v.find(o=>o===e);return!o})(m)&&(0,t.jsx)(r.Z,{variant:"body2",color:"error",children:"Formul\xe1rio n\xe3o vinculado"})]})})})})};o.Z=u},93250:function(e,o,a){"use strict";var t=a(85893),n=a(49837),s=a(91359),i=a(69175);let l=e=>{let{result:o,columns:a,btnNew:l=!0,btnPrint:r=!0,btnBack:d,openModal:c,modalLog:u}=e;return(0,t.jsx)(n.Z,{children:(0,t.jsx)(s.Z,{sx:{pt:"0"},children:(0,t.jsx)(i.Z,{rows:o,columns:a,modalLog:u,buttonsHeader:{btnNew:l,btnPrint:r,btnBack:d,openModal:c}})})})};o.Z=l},46905:function(e,o,a){"use strict";var t=a(85893),n=a(87536),s=a(79072),i=a(55343),l=a(67836);let r=e=>{let{xs:o,md:a,title:r,name:d,disabled:c,required:u,form:m,onChange:x}=e;return(0,t.jsx)(s.ZP,{item:!0,xs:o,md:a,children:(0,t.jsx)("div",{children:(0,t.jsx)(i.Z,{fullWidth:!0,children:(0,t.jsx)(n.Qr,{name:d,control:m.control,rules:{required:u},render(e){let{field:o}=e;return(0,t.jsx)(l.Z,{label:r,value:null==o?void 0:o.value,placeholder:r,type:"date",size:"small","aria-describedby":"validation-schema-nome",disabled:c,error:!!m.formState.errors[d],onChange(e){let a=e.target.value;o.onChange(a),x&&x(a)},InputLabelProps:{shrink:!0},inputProps:{min:"1900-01-01",max:"2100-01-01"}})}})})})})};o.Z=r},55148:function(e,o,a){"use strict";var t=a(85893),n=a(79072),s=a(55343),i=a(35966),l=a(67836),r=a(87536),d=a(53934),c=a(30944);let u=e=>{let{xs:o,md:a,title:u,options:m,form:x,name:p,limitTags:f,value:h,required:v,disabled:g,multiple:b,onChange:j,className:D,keyProps:Z,createNew:C,helpText:y,helpTextPosition:I}=e,S=C?[{id:null,name:"-- Novo --"},...null!=m?m:[]]:m,{key:P}=(0,c.L0)();return(0,t.jsx)(n.ZP,{item:!0,xs:o,md:a,sx:{my:1},className:D,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(s.Z,{fullWidth:!0,children:(0,t.jsx)(r.Qr,{name:p,control:x.control,rules:{required:v},render(e){var o;let{field:a}=e;return(0,t.jsx)(i.Z,{options:S.map(e=>e.name),value:null!=h?h:null===(o=x.getValues(p))||void 0===o?void 0:o.name,onChange(e,o){let a=S.find(e=>e.name===o);x.setValue(p,null!=a?a:null),j&&j(o)},renderInput(e){var o;return(0,t.jsx)(l.Z,{...e,id:"customSelect",size:"small",label:u,placeholder:u,error:!!x.formState.errors[p],helperText:null===(o=x.formState.errors[p])||void 0===o?void 0:o.message})}},Z||P)}})}),y&&(0,t.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,t.jsx)(d.Z,{text:y,position:null!=I?I:"top"})})]})})};o.Z=u},63067:function(e,o,a){"use strict";a.r(o);var t=a(85893),n=a(67294),s=a(46905),i=a(55148),l=a(51570),r=a(30944);let d=()=>{var e,o;let{form:a,setNames:d,filterDate:c,SelectFilterByName:u,dataRecebimentoMP:m,setFilteredDataRecebimentoMP:x,handleSearch:p,key:f,searchText:h}=(0,r.L0)(),{commonData:v}=(0,l.Lq)(),g=m,b=async()=>{x(g=await u(g=await u(g=await u(g=await c(g=await p(g)),"status"),"profissional"),"modelo"))};return(0,n.useEffect)(()=>{b()},[f]),(0,n.useEffect)(()=>{d(["dataInicio","dataFim","status","profissional","modelo"])},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{xs:12,md:6,title:"Data inicio",name:"dataInicio",form:a}),(0,t.jsx)(s.Z,{xs:12,md:6,title:"Data Fim",name:"dataFim",form:a}),(0,t.jsx)(i.Z,{xs:12,md:6,title:"Status",name:"status",form:a,options:v.status}),(0,t.jsx)(i.Z,{xs:12,md:6,title:"Profissional",name:"profissional",value:null===(e=a.getValues("profissional"))||void 0===e?void 0:e.name,form:a,options:v.professional}),(0,t.jsx)(i.Z,{xs:12,md:6,title:"Modelo",name:"modelo",value:null===(o=a.getValues("modelo"))||void 0===o?void 0:o.name,form:a,options:v.recebimentoModel})]})};o.default=d},87134:function(e,o,a){"use strict";a.r(o),a.d(o,{default:function(){return ex}});var t=a(85893),n=a(67294),s=a(60664),i=a(93250),l=a(87536),r=a(66841),d=a(34282),c=a(29308),u=a(23895),m=a(7071),x=a(61953),p=a(49837),f=a(91359),h=a(29630),v=a(79072),g=a(55343),b=a(11163),j=a.n(b),D=a(64165),Z=a(86887),C=a(83830),y=a(40039),I=a(39976),S=a(47842),P=a(86501),w=a(66136),F=a(80377),N=a(56531),E=a(50287),V=a(84220),M=a(44731);let k=e=>{var o,a,s;let{value:i}=e,{settings:l}=(0,n.useContext)(w.J6);return(0,t.jsx)(p.Z,{style:{height:"100%"},children:(0,t.jsx)(f.Z,{sx:{textAlign:"center"},children:(0,t.jsx)("div",{className:"flex flex-col items-center gap-1",children:(null==i?void 0:i.nome_)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(M.Z,{variant:"rounded",sx:{width:70,height:70},className:"p-1 ".concat("dark"===l.mode?"!bg-[#e0e0e0]":"!bg-[#f5f5f5]"),children:(0,t.jsx)("img",{src:null!==(o=null==i?void 0:i.foto)&&void 0!==o?o:"/imageDefault/factory.svg",alt:"Imagem da logo da f\xe1brica"})})}),(0,t.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:null==i?void 0:i.nome_}),(0,t.jsx)(h.Z,{variant:"subtitle2",children:null==i?void 0:i.cnpj_}),i.email?(0,t.jsx)(h.Z,{variant:"subtitle2",children:null==i?void 0:i.email}):(0,t.jsx)(h.Z,{variant:"subtitle2",color:"error",sx:{textTransform:"italic"},children:"E-mail n\xe3o informado"}),(null==i?void 0:i.telefone)&&(0,t.jsx)(h.Z,{variant:"subtitle2",children:null!==(a=null==i?void 0:i.telefone)&&void 0!==a?a:"--"}),(null==i?void 0:i.cidade)&&(0,t.jsx)(h.Z,{variant:"subtitle2",children:null!==(s=null==i?void 0:i.cidade)&&void 0!==s?s:"--"})]}):(0,t.jsx)(h.Z,{variant:"subtitle1",children:"-- Selecione um fornecedor --"})})})})};var O=a(22841),z=a(75158),A=a(44373),H=a(3893),R=a(21609);let _=e=>{var o,a,n,s,i,l,r,d,u,m;let{value:x,index:p,apresentacoes:f,setValue:h,register:v,control:g,errors:b,disabled:j}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{xs:12,md:2,title:"Quantidade",name:"produtos[".concat(p,"].quantidade"),register:v,control:g,errors:null==b?void 0:null===(o=b.produtos)||void 0===o?void 0:null===(a=o[p])||void 0===a?void 0:a.quantidade,disabled:j,mask:"fractioned3"}),(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data da fabrica\xe7\xe3o",value:x.dataFabricacao,name:"produtos[".concat(p,"].dataFabricacao"),control:g,errors:null==b?void 0:null===(n=b.produtos)||void 0===n?void 0:null===(s=n[p])||void 0===s?void 0:s.dataFabricacao,disabled:j,typeValidation:"dataPassado"}),(0,t.jsx)(c.Z,{xs:12,md:2,title:"N\xba Lote",name:"produtos[".concat(p,"].lote"),register:v,control:g,errors:null==b?void 0:null===(i=b.produtos)||void 0===i?void 0:null===(l=i[p])||void 0===l?void 0:l.lote,disabled:j}),(0,t.jsx)(V.Z,{xs:12,md:4,title:"Apresenta\xe7\xe3o",name:"produtos[".concat(p,"].apresentacao"),type:"string",options:null!=f?f:[],register:v,setValue:h,control:g,errors:null==b?void 0:null===(r=b.produtos)||void 0===r?void 0:null===(d=r[p])||void 0===d?void 0:d.apresentacao,disabled:j}),(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data de validade",value:x.dataValidade,name:"produtos[".concat(p,"].dataValidade"),control:g,errors:null==b?void 0:null===(u=b.produtos)||void 0===u?void 0:null===(m=u[p])||void 0===m?void 0:m.dataValidade,disabled:j})]})},q=e=>{let{produtos:o,setProdutos:a,getValues:i,setValue:l,register:r,control:d,errors:c,disabled:u}=e,[m,p]=(0,n.useState)([]),f=async()=>{try{let e=await s.hi.get("/cadastros/apresentacao");p(e.data)}catch(o){console.log("\uD83D\uDE80 ~ error:",o)}},g=(e,t)=>{let{checked:n}=e.target;l("produtos[".concat(t,"].checked_"),n);let s=[...o];s[t].checked_=n,a(s)};return(0,n.useEffect)(()=>{f()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{color:"primary",variant:"subtitle1",sx:{fontWeight:700,mb:2},children:"Produtos aprovados do fornecedor"}),o&&0==o.length&&(0,t.jsx)(h.Z,{color:"warning",variant:"subtitle1",className:"italic",children:(0,t.jsxs)(x.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(R.Z,{icon:"typcn:warning",color:"#FFC107"}),(0,t.jsx)("p",{children:"Nenhum fornecedor selecionado!"})]})}),o&&o.length>0&&o.map((e,a)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"hidden",value:e.produtoID,name:"produtos[".concat(a,"].produtoID"),...r("produtos[".concat(a,"].produtoID"))}),(0,t.jsxs)(v.ZP,{container:!0,spacing:4,sx:{pb:2},children:[(0,t.jsx)(v.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(O.Z,{control:(0,t.jsx)(z.Z,{onClick:e=>g(e,a),defaultChecked:e.checked_,disabled:u}),label:e.nome,size:"small",sx:{marginRight:"4px","&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}})}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:8,children:(0,t.jsx)(x.Z,{display:"flex",alignItems:"center",justifyContent:"end",sx:{gap:4,mt:3},children:(0,t.jsxs)(h.Z,{variant:"body2",children:["\xdaltima avalia\xe7\xe3o: ",e.ultimaAvaliacao]})})}),e&&e.checked_&&(0,t.jsx)(_,{value:e,apresentacoes:m,index:a,setValue:l,register:r,control:d,errors:c,disabled:u},a)]}),a<o.length-1&&(0,t.jsx)(A.Z,{})]},a))]})},T=e=>{var o,a,i,l,r,d,u,m;let{recebimentoMpID:x,modelo:h,values:g,produtosRecebimento:b,fields:j,disabled:D,register:Z,errors:C,getValues:I,setValue:S,control:P,getAddressByCep:w,nameSelected:F,setNameSelected:M,columnSelected:O,setColumnSelected:z,openModalNew:A,setOpenModalNew:H,newChange:R,setNewChange:_}=e,{user:T,loggedUnity:L}=(0,n.useContext)(y.V),[W,X]=(0,n.useState)([]),[U,B]=(0,n.useState)([]),[G,J]=(0,n.useState)(null),[Q,K]=(0,n.useState)([]),[Y,$]=(0,n.useState)(!1),ee=async()=>{let e=await s.hi.post("/cadastros/profissional/getProfissionaisAssinatura",{formularioID:2,modeloID:h.id});X(e.data.preenche),ea(e.data.preenche)},eo=async()=>{let e=await s.hi.post("/formularios/fornecedor/getFornecedoresAprovados",{unidadeID:L.unidadeID,recebimentoMpID:x,modelo:h});B(e.data),et(g.fornecedor,e.data,!1)},ea=e=>{let o=T.profissionalID,a=e.find(e=>e.id===o);a&&a.id>0&&S("fieldsHeader.profissional",a)},et=(e,o,a)=>{if($(!Y),!e){J(null),K([]);return}o&&o.forEach(o=>{o.id===e.id&&(!a&&b&&b.length>0&&b.map(e=>{o.produtos.forEach(o=>{o.produtoID===e.produto.id&&(o.checked_=!0)})}),a&&o.produtos.forEach(e=>{e.checked_=!1}),J(o),K(o.produtos))})};return(0,n.useEffect)(()=>{eo(),ee()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(v.ZP,{container:!0,alignItems:"stretch",spacing:6,children:[(0,t.jsx)(v.ZP,{item:!0,xs:12,md:9,children:(0,t.jsx)(p.Z,{style:{height:"100%"},children:(0,t.jsx)(f.Z,{children:(0,t.jsxs)(v.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data da abertura",name:"fieldsHeader.abertoPor.dataInicio",type:"date",value:null==g?void 0:null===(o=g.abertoPor)||void 0===o?void 0:o.dataInicio,disabled:!0,control:P,alertRequired:!0}),(0,t.jsx)(c.Z,{xs:12,md:2,title:"Hora da abertura",name:"fieldsHeader.abertoPor.horaInicio",type:"time",disabled:!0,register:Z,control:P,alertRequired:!0}),(0,t.jsx)(c.Z,{xs:12,md:8,title:"Profissional que abriu",name:"fieldsHeader.abertoPor.profissional.nome",value:null==g?void 0:null===(a=g.abertoPor)||void 0===a?void 0:null===(i=a.profissional)||void 0===i?void 0:i.nome,disabled:!0,register:Z,control:P,alertRequired:!0}),(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data da avalia\xe7\xe3o",name:"fieldsHeader.data",type:"date",value:null!==(m=null==g?void 0:g.data)&&void 0!==m?m:new Date,disabled:D,register:Z,control:P,typeValidation:"dataPassado",daysValidation:365,errors:null==C?void 0:null===(l=C.fieldsHeader)||void 0===l?void 0:l.data,alertRequired:!0}),(0,t.jsx)(c.Z,{xs:12,md:2,title:"Hora da avalia\xe7\xe3o",name:"fieldsHeader.hora",type:"time",disabled:D,register:Z,control:P,errors:null==C?void 0:null===(r=C.fieldsHeader)||void 0===r?void 0:r.hora,alertRequired:!0}),(0,t.jsx)(V.Z,{xs:12,md:4,title:"Profissional preenchimento",name:"fieldsHeader.profissional",type:"string",options:W,disabled:D,register:Z,setValue:S,control:P,errors:null==C?void 0:null===(d=C.fieldsHeader)||void 0===d?void 0:d.profissional,alertRequired:!0}),(0,t.jsx)(N.Z,{register:Z,errors:C,setValue:S,control:P,fields:j,values:j,getAddressByCep:w,disabled:D,nameSelected:F,setNameSelected:M,getValues:I,columnSelected:O,setColumnSelected:z,openModalNew:A,setOpenModalNew:H,newChange:R,setNewChange:_}),(0,t.jsx)(V.Z,{xs:12,md:12,title:"Fornecedor",name:"fieldsHeader.fornecedor",type:"string",options:U,onChange:e=>et(e,U,!0),value:null==g?void 0:g.fornecedor,disabled:D,register:Z,setValue:S,control:P,errors:null==C?void 0:null===(u=C.fieldsHeader)||void 0===u?void 0:u.fornecedor,alertRequired:!0})]})})})}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(k,{value:G})})]}),(0,t.jsx)(p.Z,{children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(q,{produtos:Q,setProdutos:K,getValues:I,setValue:S,register:Z,control:P,errors:C,disabled:D},Y)})})]})},L=e=>{var o,a,i,l;let{modeloID:r,values:d,disabled:u,register:m,errors:x,setValue:h,control:g}=e,{user:b}=(0,n.useContext)(y.V),[j,D]=(0,n.useState)([]),Z=async()=>{let e=await s.hi.post("/cadastros/profissional/getProfissionaisAssinatura",{formularioID:2,modeloID:r});console.log("\uD83D\uDE80 ~ response.data:",e.data),D(e.data.aprova),C(e.data.aprova)},C=e=>{let o=b.profissionalID,a=e.find(e=>e.id===o);a&&a.id>0&&h("fieldsFooter.profissional",a)};return(0,n.useEffect)(()=>{Z()},[]),(0,t.jsx)(p.Z,{children:(0,t.jsx)(f.Z,{children:(0,t.jsxs)(v.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data da conclus\xe3o",name:"fieldsFooter.dataConclusao",type:"date",value:null!==(l=null==d?void 0:d.dataConclusao)&&void 0!==l?l:new Date,disabled:u,register:m,control:g,typeValidation:"dataPassado",daysValidation:365,errors:null==x?void 0:null===(o=x.fieldsFooter)||void 0===o?void 0:o.dataConclusao}),(0,t.jsx)(c.Z,{xs:12,md:2,title:"Hora da conclus\xe3o",name:"fieldsFooter.horaConclusao",type:"time",disabled:u,register:m,control:g,errors:null==x?void 0:null===(a=x.fieldsFooter)||void 0===a?void 0:a.horaConclusao}),(0,t.jsx)(V.Z,{xs:12,md:8,title:"Profissional que aprova",name:"fieldsFooter.profissional",type:"string",options:null!=j?j:[],disabled:u,register:m,setValue:h,control:g,errors:null==x?void 0:null===(i=x.fieldsFooter)||void 0===i?void 0:i.profissional})]})})})};var W=a(41088),X=a(92629),U=a(1503),B=a(54225),G=a(62135);let J=e=>{var o,a;let{index:s,value:i,info:l,papelID:r,produtos:d,handlePreenchimentoFornecedor:u,getValues:m,register:x,control:p,setValue:f,errors:h}=e,[g,b]=(0,n.useState)(null!==(o=i.tipo)&&void 0!==o?o:1),j=e=>{b(e),f("naoConformidade.itens[".concat(s,"].tipo"),e)};return(0,t.jsxs)(t.Fragment,{children:[1==r&&(0,t.jsx)(H.Z,{xs:12,md:4,onClick:u,title:"Fornecedor preenche?",name:"naoConformidade.itens[".concat(s,"].fornecedorPreenche"),value:i.fornecedorPreenche,disabled:l.concluido,register:x,helpText:"Se marcado, o fornecedor deve preencher o plano de a\xe7\xe3o com seu acesso ao sistema."}),(0,t.jsxs)(v.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(E.Z,{xs:12,md:3,title:"Data",name:"naoConformidade.itens[".concat(s,"].data"),type:"date",value:null==i?void 0:i.data,disabled:l.concluido||1!=r,register:x,control:p,typeValidation:"dataPassado",daysValidation:999999999999,errors:null}),(0,t.jsx)(c.Z,{xs:12,md:3,title:"Hora",name:"naoConformidade.itens[".concat(s,"].hora"),disabled:l.concluido||1!=r,type:"time",register:x,control:p,errors:null}),(0,t.jsx)(V.Z,{xs:12,md:6,title:"Profissional preenchimento",name:"naoConformidade.itens[".concat(s,"].profissionalPreenchimento"),disabled:l.concluido||1!=r,type:"string",options:null!==(a=i.profissionaisOptions.preenchimento)&&void 0!==a?a:[],register:x,setValue:f,control:p,errors:null}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:3,children:(0,t.jsxs)(G.Z,{color:"primary",fullWidth:!0,className:"mt-1",disabled:l.concluido||1!=r,children:[(0,t.jsx)(B.Z,{onClick:()=>j(1),variant:1===g?"contained":"outlined",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 px-1",children:[(0,t.jsx)(R.Z,{icon:"ph:plant"}),(0,t.jsx)("p",{className:"capitalize",children:"Produto"})]})}),(0,t.jsx)(B.Z,{onClick:()=>j(2),variant:2===g?"contained":"outlined",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 py-[2px] px-1",children:[(0,t.jsx)(R.Z,{icon:"mdi:truck-fast-outline"}),(0,t.jsx)("p",{className:"capitalize",children:"Transporte"})]})})]})}),(0,t.jsx)(V.Z,{xs:12,md:9,title:"Produto",name:"naoConformidade.itens[".concat(s,"].produto"),type:"string",disabled:1!=g||l.concluido||1!=r,options:null!=d?d:[],register:x,setValue:f,control:p,errors:null}),i.dynamicFields&&i.dynamicFields.length>0&&i.dynamicFields.map((e,o)=>(0,t.jsx)(c.Z,{xs:12,md:12,multiline:!0,rows:4,title:e.nomeCampo,value:e.valor,disabled:l.concluido||1!=r,name:"naoConformidade.itens[".concat(s,"].dynamicFields[").concat(o,"].value"),required:1==e.obrigatorio,register:x,control:p},o))]})]})},Q=e=>{let{index:o,value:a,info:s,papelID:i,register:l,control:r,setValue:d,errors:u}=e,{settings:m}=(0,n.useContext)(w.J6);return(0,t.jsx)(t.Fragment,{children:a&&a.fornecedorPreenche&&(0,t.jsxs)("div",{className:"".concat("dark"==m.mode?"bg-[#353D39]":"bg-[#E2EAE4]"," p-5 rounded-xl border border-[#4A8B57]"),children:[(0,t.jsx)(h.Z,{variant:"subtitle1",color:"primary",sx:{fontWeight:700,pb:5},children:"Preenchimento realizado pelo Fornecedor"}),(0,t.jsxs)(v.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(c.Z,{xs:12,md:12,multiline:!0,rows:4,title:"Observa\xe7\xf5es do Fornecedor",name:"naoConformidade.itens[".concat(o,"].obsFornecedor"),disabled:s.concluido||2!=i,control:r,errors:null}),(0,t.jsx)(E.Z,{xs:12,md:3,title:"Data",name:"naoConformidade.itens[".concat(o,"].dataFornecedor"),type:"date",value:null==a?void 0:a.dataFornecedor,register:l,disabled:s.concluido||2!=i,control:r,typeValidation:"dataPassado",daysValidation:999999999999,errors:null}),(0,t.jsx)(c.Z,{xs:12,md:3,title:"Hora",name:"naoConformidade.itens[".concat(o,"].horaFornecedor"),disabled:s.concluido||2!=i,type:"time",register:l,control:r,errors:null}),(0,t.jsx)(V.Z,{xs:12,md:6,title:"Profissional preenchimento",name:"naoConformidade.itens[".concat(o,"].usuarioFornecedor"),disabled:s.concluido||2!=i,type:"string",options:[],register:l,setValue:d,control:r,errors:null})]})]})})};var K=a(8519),Y=a(41470);let $=e=>{var o;let{index:a,value:n,info:s,papelID:i,register:l,control:r,setValue:d,handleChangeStatus:u,errors:m}=e,x=[{id:1,nome:"Conforme"},{id:2,nome:"N\xe3o Conforme"}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(v.ZP,{container:!0,spacing:4,sx:{paddingTop:2},children:[(0,t.jsx)(c.Z,{xs:12,md:12,multiline:!0,rows:4,title:"Conclus\xe3o",name:"naoConformidade.itens[".concat(a,"].conclusao"),disabled:s.concluido||1!=i,control:r,errors:null}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(Y.Z,{row:!0,name:"naoConformidade.itens[".concat(a,"].status"),defaultValue:null==n?void 0:n.status,onChange:e=>u(a,e.target.value),sx:{mt:0},children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(h.Z,{variant:"subtitle2",sx:{pb:0},children:"Avalia\xe7\xe3o Final:"}),x&&x.map((e,o)=>(0,t.jsx)(O.Z,{value:e.id,label:e.nome,control:(0,t.jsx)(K.Z,{disabled:!1,error:!1,sx:{pr:2}}),disabled:s.concluido||1!=i,fullWidth:!0,sx:{"& .MuiFormControlLabel-label":{fontSize:"0.8rem",color:"text.secondary"},"&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}},o))]})})}),(0,t.jsx)(E.Z,{xs:12,md:3,title:"Data",name:"naoConformidade.itens[".concat(a,"].dataConclusao"),type:"date",value:null==n?void 0:n.dataConclusao,disabled:s.concluido||1!=i,register:l,control:r,typeValidation:"dataPassado",daysValidation:999999999999,errors:null}),(0,t.jsx)(c.Z,{xs:12,md:3,title:"Hora",name:"naoConformidade.itens[".concat(a,"].horaConclusao"),disabled:s.concluido||1!=i,type:"time",register:l,control:r,errors:null}),(0,t.jsx)(V.Z,{xs:12,md:6,title:"Profissional preenchimento",name:"naoConformidade.itens[".concat(a,"].profissionalConclusao"),disabled:s.concluido||1!=i,type:"string",options:null!==(o=n.profissionaisOptions.conclusao)&&void 0!==o?o:[],register:l,setValue:d,control:r,errors:null})]})})};var ee=a(72819),eo=a(24527);let ea=e=>{let{recebimentoMpID:o,values:a,info:i,getValues:l,register:r,control:d,setValue:c,errors:u}=e,{user:m,loggedUnity:x}=(0,n.useContext)(y.V),{settings:g}=(0,n.useContext)(w.J6),[b,j]=(0,n.useState)(!1),[Z,C]=(0,n.useState)([]),[I,S]=(0,n.useState)(!1),F=()=>{j(!b)},N=()=>{if(0==Z.length){P.ZP.error("N\xe3o h\xe1 nenhum modelo de n\xe3o conformidade cadastrado para esta unidade! Por favor cadastre em Configura\xe7\xf5es > Formul\xe1rios.");return}if(1==Z.length){E(Z[0]);return}Z.length>1&&S(!0)},E=e=>{var o,a;console.log("\uD83D\uDE80 ~ model:",e);let t=l("naoConformidade.itens");t.push({parRecebimentoMpNaoConformidadeModeloID:e.parRecebimentoMpNaoConformidadeModeloID,modelo:{id:e.parRecebimentoMpNaoConformidadeModeloID,nome:e.nome},profissionalPreenchimento:null,produto:null,profissionalConclusao:null,data:new Date,hora:(0,D.Xn)(),dataFornecedor:new Date,horaFornecedor:(0,D.Xn)(),dataConclusao:new Date,horaConclusao:(0,D.Xn)(),profissionaisOptions:{preenchimento:null!==(o=e.profissionaisOptions.preenchimento)&&void 0!==o?o:[],conclusao:null!==(a=e.profissionaisOptions.conclusao)&&void 0!==a?a:[]},dynamicFields:e.dynamicFields}),c("naoConformidade.itens",t),j(!b),P.ZP.success("N\xe3o conformidade inserida. Preencha os campos...")},V=(e,o)=>{let a=l("naoConformidade.itens");a[e].status=o,c("naoConformidade.itens",a)},M=async()=>{try{let e=await s.hi.get("/formularios/recebimento-mp/getNaoConformidadeModels/".concat(x.unidadeID));C(e.data)}catch(o){console.log("\uD83D\uDE80 ~ getNcModels ~ error",o)}},k=()=>(0,t.jsx)(v.ZP,{container:!0,spacing:4,children:Z&&Z.length>0&&Z.map((e,o)=>(0,t.jsx)(eo.Z,{xs:12,md:6,icon:"fluent:form-multiple-48-regular",title:e.nome,action:"select",subtitle:"Ciclo de ".concat(e.ciclo," dias"),handleClick(){E(e),S(!1)}},o))});return(0,n.useEffect)(()=>{M()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"".concat("dark"==g.mode?"bg-[#3C2F38]":"bg-[#F8E2E2]"," p-3 rounded-xl  text-center"),children:(0,t.jsx)(h.Z,{color:"error",variant:"subtitle1",sx:{fontWeight:700},children:"Plano de A\xe7\xe3o"})}),l("naoConformidade.itens")&&l("naoConformidade.itens").map((e,o)=>(0,t.jsx)(p.Z,{children:(0,t.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,t.jsx)(h.Z,{variant:"body1",children:e.modelo.nome}),(0,t.jsx)(J,{index:o,value:e,handlePreenchimentoFornecedor:F,getValues:l,info:i,papelID:m.papelID,produtos:a.produtos,register:r,control:d,setValue:c,errors:u},o),(0,t.jsx)(Q,{index:o,value:e,info:i,papelID:m.papelID,register:r,control:d,setValue:c,errors:u},o),(0,t.jsx)($,{index:o,value:e,info:i,papelID:m.papelID,register:r,control:d,setValue:c,handleChangeStatus:V,errors:u},o)]})},o)),!i.concluido&&1==m.papelID&&(0,t.jsx)(v.ZP,{container:!0,spacing:4,children:(0,t.jsx)(v.ZP,{item:!0,xs:12,children:(0,t.jsx)(B.Z,{variant:"outlined",color:"primary",onClick:N,startIcon:(0,t.jsx)(R.Z,{icon:"material-symbols:add-circle-outline-rounded"}),sx:{mt:2},children:"Inserir nova n\xe3o conformidade"})})})]}),(0,t.jsx)(ee.Z,{title:"Modelo de N\xe3o Conformidade",description:"Selecione o modelo de n\xe3o conformidade que deseja inserir. O mesmo pode ser gerenciado em Configura\xe7\xf5es > Formul\xe1rios.",setOpenModal:S,openModal:I,children:(0,t.jsx)(k,{})})]})};var et=a(76904),en=a(1322),es=a(62094),ei=a(934),el=a(91757);let er=e=>{var o;let a;let{id:i,model:b}=e,{menu:N,user:E,loggedUnity:V}=(0,n.useContext)(y.V),[M,k]=(0,n.useState)(!1),[O,z]=(0,n.useState)(!1),[A,H]=(0,n.useState)(!1),[R,_]=(0,n.useState)(!1),[q,B]=(0,n.useState)(!1),[G,J]=(0,n.useState)(!1),[Q,K]=(0,n.useState)(null),[Y,$]=(0,n.useState)(!0),[ee,eo]=(0,n.useState)(null),[er,ed]=(0,n.useState)([]),[ec,eu]=(0,n.useState)([]),[em,ex]=(0,n.useState)(null),{createNewNotification:ep}=(0,n.useContext)(I.u),[ef,eh]=(0,n.useState)(!1),[ev,eg]=(0,n.useState)([]),[eb,ej]=(0,n.useState)([]),[eD,eZ]=(0,n.useState)([]),[eC,ey]=(0,n.useState)(null),[eI,eS]=(0,n.useState)([]),[eP,ew]=(0,n.useState)(null),[eF,eN]=(0,n.useState)(""),[eE,eV]=(0,n.useState)(!1),[eM,ek]=(0,n.useState)(!1),[eO,ez]=(0,n.useState)({status:!1,errors:[]}),[eA,eH]=(0,n.useState)(null),{settings:eR}=(0,n.useContext)(w.J6),{setId:e_}=(0,n.useContext)(C.X),{isLoading:eq,startLoading:eT,stopLoading:eL}=(0,W.Z)(),[eW,eX]=(0,n.useState)(!1),{setReportParameters:eU,sendPdfToServer:eB}=(0,U.Gc)(),[eG,eJ]=(0,n.useState)(!1),[eQ,eK]=(0,n.useState)(!1),[eY,e$]=(0,n.useState)(null),[e0,e1]=(0,n.useState)(null),[e2,e3]=(0,n.useState)({status:!1,message:"Voc\xea n\xe3o tem permiss\xf5es",messageType:"info"}),e9=j(),e6=i&&i>0?"edit":"new",e8="edit"==e6?e9.pathname:(0,D.g_)(e9.pathname),{reset:e4,register:e5,getValues:e7,setValue:oe,control:oo,watch:oa,handleSubmit:ot,clearErrors:on,setError:os,formState:{errors:oi}}=(0,l.cI)(),ol=()=>{e_(ee.modelo.id),e9.push("/configuracoes/formularios/recebimento-mp/")},or=async e=>{let o={status:30,observacao:null==e?void 0:e.obs,auth:{usuarioID:E.usuarioID,papelID:E.papelID,unidadeID:V.unidadeID}};try{B(!0),await s.hi.post("".concat(e8,"/changeFormStatus/").concat(i),o).then(e=>{P.ZP.success(D.OD.successUpdate),B(!1),oD(em,null,null)})}catch(a){console.log(a)}finally{k(!M)}},od={id:1,name:"Reabrir formul\xe1rio",description:"Reabrir formul\xe1rio para preenchimento.",component:(0,t.jsx)(el.Z,{}),disabled:!!G,route:null,type:null,action:or,modal:!0,size:"sm",icon:"heroicons:lock-open",identification:null},oc=[];1==E.papelID&&eF.status>=40&&oc.push(od),1==E.papelID&&(a=!1,N.map(e=>{e.menu.map(e=>{e.submenu&&e.submenu.length>0&&e.submenu.map(e=>{"/configuracoes/formularios"==e.rota&&(a=!0)})})}),a)&&oc.push({id:2,name:"Configura\xe7\xf5es do formul\xe1rio",description:"Alterar as configura\xe7\xf5es do modelo de formul\xe1rio.",route:null,type:null,action:ol,modal:!1,icon:"bi:gear",identification:null});let ou=async()=>{},om=()=>{eT();try{s.hi.post("".concat(e8,"/getData"),{id:null!=i?i:0,type:e6,profissionalID:E.profissionalID,unidadeID:V.unidadeID,modeloID:null!=b?b:0}).then(e=>{var o,a;console.log("getData: ",e.data),eg(e.data.fieldsHeader),ej(e.data.fieldsFooter),eZ(e.data.fields),ed(e.data.produtos),eS(e.data.blocos),eu(e.data.grupoAnexo),eN(e.data.info),eo(e.data.unidade),ey(e.data.link),ew(e.data.ultimaMovimentacao),ob(e.data.blocos),K(e.data.naoConformidade) //! Seta não conformidades
,e4(e.data);let t=D.WR[null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(a=o.info)||void 0===a?void 0:a.status];ex(t),e3({status:1==E.papelID&&e.data.info.status<40,message:e.data.info.status>40?"Esse formul\xe1rio j\xe1 foi conclu\xeddo, n\xe3o \xe9 mais poss\xedvel alterar as informa\xe7\xf5es!":e.data.info.status<40?"Formul\xe1rio aberto para preenchimento!":40==e.data.info.status?"Este formul\xe1rio est\xe1 aguardando aprova\xe7\xe3o!":null,messageType:"info"}),ou()}).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e)})}catch(e){console.log("\uD83D\uDE80 ~ error:",e)}finally{eL()}},ox=!1,op=[],of=(e,o)=>{os(e,{type:"manual",message:"Campo obrigat\xf3rio"}),op.push(o),ox=!0},oh=()=>{on(),e7("fieldsHeader.data")||of("fieldsHeader.data","Data da avalia\xe7\xe3o"),e7("fieldsHeader.hora")||of("fieldsHeader.hora","Hora da avalia\xe7\xe3o"),null==eD||eD.forEach((e,o)=>{let a=e.tabela?"fields[".concat(o,"].").concat(e.tabela):"fields[".concat(o,"].").concat(e.nomeColuna),t=e7(a);1!==e.obrigatorio||t||of(a,null==e?void 0:e.nomeCampo)}),er&&er.length>0&&er.forEach((e,o)=>{e.produtoAnexosDescricao&&e.produtoAnexosDescricao.forEach((a,t)=>{1===a.obrigatorio&&0==a.anexos.length&&(os("produtos[".concat(o,"].produtoAnexosDescricao[").concat(t,"].anexos"),{type:"manual",message:"Campo obrigat\xf3rio"}),op.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==a?void 0:a.nome)),ox=!0)})}),console.log("\uD83D\uDE80 ~ block:",eI),eI.forEach((e,o)=>{e.itens.forEach((e,a)=>{let t=e7("blocos[".concat(o,"].itens[").concat(a,"].resposta"));(null==e?void 0:e.obrigatorio)!==1||t||(os("blocos[".concat(o,"].itens[").concat(a,"].resposta"),{type:"manual",message:"Campo obrigat\xe1rio"}),op.push(null==e?void 0:e.nome),ox=!0),e.respostaConfig&&1==e.respostaConfig.anexo&&e.respostaConfig.anexosSolicitados.length>0&&e.respostaConfig.anexosSolicitados.forEach((t,n)=>{1==t.obrigatorio&&t.anexos&&0==t.anexos.length&&(os("blocos[".concat(o,"].itens[").concat(a,"].respostaConfig.anexosSolicitados[").concat(n,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),op.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==t?void 0:t.nome)),ox=!0)})})}),ec&&ec.length>0&&ec.forEach((e,o)=>{e.itens.forEach((a,t)=>{1===a.obrigatorio&&0==a.anexos.length&&(os("grupoAnexo[".concat(o,"].itens[").concat(t,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),op.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==a?void 0:a.nome)),ox=!0)})}),ez({status:ox,errors:op})},ov=async e=>{if(9===e.length){let o=e.replace(/[^0-9]/g,"");try{let a=await s.hi.get("https://viacep.com.br/ws/".concat(o,"/json/"));a.data.localidade?(eD.forEach(async(e,o)=>{("logradouro"===e.nomeColuna||"bairro"===e.nomeColuna||"cidade"===e.nomeColuna||"estado"===e.nomeColuna)&&(await oe("fields[".concat(o,"].logradouro"),a.data.logradouro),await oe("fields[".concat(o,"].bairro"),a.data.bairro),await oe("fields[".concat(o,"].cidade"),a.data.localidade),await oe("fields[".concat(o,"].estado"),a.data.uf))}),P.ZP.success("Endere\xe7o encontrado!")):P.ZP.error("Endere\xe7o n\xe3o encontrado!")}catch(t){console.error(t)}}},og=e=>{eH(e),oh(),eV(!0)},ob=e=>{let o=!0;e.forEach(e=>{e.itens.forEach(e=>{e.respostaConfig&&1==e.respostaConfig.bloqueiaFormulario&&(o=!1)})}),$(o)},oj=async e=>{eV(!1),e.conclusion=!0,await ot(oZ)(e)},oD=(e,o,a)=>{let t=30==e?"Em preenchimento":40==e?"Conclu\xeddo":50==e?"Reprovado":60==e?"Aprovado parcialmente":70==e?"Aprovado":"Pendente",n={titulo:"Formul\xe1rio de Fornecedor ".concat(t),descricao:"O formul\xe1rio de Fornecedor #".concat(i," est\xe1 ").concat(t,"."),url:"/formularios/fornecedor/",urlID:i,tipoNotificacaoID:6,usuarioGeradorID:E.usuarioID,usuarioID:0,unidadeID:V.unidadeID,papelID:1};if(n&&(ep(n),o)){let s={titulo:"Fornecedor gerado",descricao:"O formul\xe1rio de Fornecedor #".concat(i," est\xe1 ").concat(t," e gerou uma n\xe3o conformidade."),url:"/formularios/fornecedor/nao-conformidade/",urlID:a,tipoNotificacaoID:5,usuarioGeradorID:E.usuarioID,usuarioID:0,unidadeID:V.unidadeID,papelID:1};ep(s)}},oZ=async function(e){var o,a;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===t.conclusion&&(e.concluiForm=!0,e.info.status=null!==(o=t.status)&&void 0!==o?o:eF.status,e.obsConclusao=t.obsConclusao);let n={form:e,auth:{usuarioID:E.usuarioID,profissionalID:null!==(a=E.profissionalID)&&void 0!==a?a:0,papelID:E.papelID,unidadeID:V.unidadeID}};if(console.log("\uD83D\uDE80 ~ onSubmit data:",n),eT(),!0!=i)try{"edit"==e6?(B(!0),await s.hi.post("".concat(e8,"/updateData/").concat(i),n).then(o=>{P.ZP.success(D.OD.successUpdate),B(!1),oD(e.status,e.naoConformidade,null)})):"new"==e6?await s.hi.post("".concat(e8,"/insertData"),n).then(e=>{e_(e.data.recebimentoMpID),e9.push("".concat(e8)),P.ZP.success(D.OD.successNew)}):P.ZP.error(D.OD.error)}catch(l){console.log("errro da fun\xe7\xe3o update/email",l)}finally{eL(),k(!M)}},oC=async(e,o)=>{z(!0);let a=e.target.files;if(a&&a.length>0){var t;let n=new FormData;for(let l=0;l<a.length;l++)n.append("files[]",a[l]);n.append("usuarioID",E.usuarioID),n.append("unidadeID",V.unidadeID),n.append("grupoAnexoItemID",null!==(t=o.grupoAnexoItemID)&&void 0!==t?t:null),await s.hi.post("".concat(e8,"/saveAnexo/").concat(i,"/grupo-anexo/").concat(E.usuarioID,"/").concat(ee.unidadeID),n).then(e=>{z(!1);let o=e7();oZ(o)}).catch(e=>{var o,a,t;z(!1),P.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao atualizar anexo, tente novamente!")})}},oy=e=>{e.preventDefault();let o=e7();oZ(o)};(0,n.useEffect)(()=>{om()},[i,q]),(0,n.useEffect)(()=>{oh()},[eq]);let oI=async e=>{eK(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Z,{show:eq}),(0,t.jsxs)("form",{onSubmit:e=>oy(e),children:[(0,t.jsx)(Z.Z,{btnCancel:!0,btnSave:!eF.concluido,btnSend:1==E.papelID&&eF.status>=30&&!eF.concluido,btnPrint:"edit"==e6,btnDelete:eF.status<40,onclickDelete:()=>eX(!0),actionsData:oc,actions:!0,handleSubmit:()=>ot(oZ),handleSend:og,iconConclusion:"mdi:check-bold",titleConclusion:"Concluir Formul\xe1rio",title:"Recebimento de MP",btnStatus:1==E.papelID&&"edit"==e6,handleBtnStatus:()=>eh(!0),type:e6,status:em}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[em&&(0,t.jsx)(m.Z,{size:"small",skin:"light",color:em.color,label:em.title,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}}),ee&&ee.modelo&&(0,t.jsx)(m.Z,{size:"small",HeaderFiel:!0,skin:"light",label:ee.modelo.nome,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,t.jsxs)(x.Z,{display:"flex",flexDirection:"column",sx:{gap:6},children:[eF&&""!=eF.cabecalhoModelo&&(0,t.jsx)(p.Z,{children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(h.Z,{variant:"subtitle1",children:eF.cabecalhoModelo})})}),ee&&(0,t.jsx)(T,{nameSelected:e0,setNameSelected:e1,columnSelected:eY,setColumnSelected:e$,openModalNew:eQ,setOpenModalNew:eK,newChange:eG,setNewChange:eJ,recebimentoMpID:i,modelo:ee.modelo,values:ev,produtosRecebimento:er,fields:eD,getValues:e7,disabled:!e2.status,register:e5,errors:oi,setValue:oe,control:oo,getAddressByCep:ov}),(0,t.jsx)(r.Z,{setBlocos:eS,setValue:oe,blocos:eI,getValues:e7,register:e5,control:oo,disabled:!e2.status||G,errors:null==oi?void 0:oi.blocos}),ec&&ec.map((e,o)=>(0,t.jsx)(u.Z,{values:{grupo:e,loadingFile:O,indexGrupo:o,handleFileSelect:oC,handleRemove:handleRemoveAnexoGroup,folder:"grupo-anexo",disabled:!e2.status,error:oi}},o)),eF&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(p.Z,{children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(v.ZP,{container:!0,spacing:4,children:(0,t.jsx)(v.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(g.Z,{fullWidth:!0,children:[(0,t.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Observa\xe7\xf5es (campo de uso exclusivo da validadora)"}),(0,t.jsx)(c.Z,{title:"Observa\xe7\xe3o (opcional)",name:"info.obs",multiline:!0,rows:4,value:eF.obs,disabled:!e2.status,control:oo})]})})})})})}),ee&&eb&&!eb.concluded&&(0,t.jsx)(L,{modeloID:ee.modelo.id,values:eb,register:e5,disabled:!1,errors:oi,setValue:oe,control:oo}),eb&&eb.concluded&&(null===(o=eb.conclusion)||void 0===o?void 0:o.profissional)&&(0,t.jsx)(h.Z,{variant:"caption",children:"Conclu\xeddo por ".concat(eb.conclusion.profissional.nome," em ").concat(eb.conclusion.dataFim," ").concat(eb.conclusion.horaFim,".")}),eF.naoConformidade&&(0,t.jsx)(ea,{recebimentoMpID:i,values:Q,info:eF,getValues:e7,register:e5,control:oo,setValue:oe,errors:oi}),(0,t.jsx)(ei.Z,{id:i,parFormularioID:2},M),ef&&(0,t.jsx)(d.Z,{title:"Hist\xf3rico do Formul\xe1rio",text:"Listagem do hist\xf3rico das movimenta\xe7\xf5es do formul\xe1rio ".concat(i," do Recebimento de MP."),id:i,parFormularioID:2,formStatus:eF.status,hasFormPending:G,canChangeStatus:!1,openModal:ef,handleClose:()=>eh(!1),btnCancel:!0,btnConfirm:!0,handleSubmit:!1}),(0,t.jsx)(F.Z,{openModal:eE,handleClose(){eV(!1),oh()},title:"Concluir Formul\xe1rio",text:"Deseja realmente concluir este formul\xe1rio?",info:eF,canChange:!G,register:e5,setValue:oe,getValues:e7,btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",conclusionForm:oj,listErrors:eO,canApprove:Y,hasNaoConformidade:!0,type:"recebimentoMp",unity:ee}),(0,t.jsx)(X.Z,{title:"Excluir Formul\xe1rio",description:"Tem certeza que deseja exluir o formulario?",params:{route:"formularios/recebimento-mp/delete/".concat(i),messageSucceded:"Formul\xe1rio exclu\xeddo com sucesso!",MessageError:"Dado possui pend\xeancia!"},open:eW,handleClose:()=>eX(!1)})]})]}),(0,t.jsx)(en.Z,{title:"transportadorID"==eY?"Novo transportador":"tipoVeiculoID"==eY?"Novo tipo de veiculo":"",size:"md",openModal:eQ,setOpenModal:eK,children:"transportadorID"==eY?(0,t.jsx)(et.Z,{btnClose:!0,handleModalClose:()=>eK(!1),setNewChange:eJ,newChange:eG,outsideID:!0,handleConfirmNew:oI,manualUrl:"/cadastros/transportador"}):"tipoVeiculoID"==eY?(0,t.jsx)(es.Z,{btnClose:!0,handleModalClose:()=>eK(!1),setNewChange:eJ,newChange:eG,outsideID:!0,handleConfirmNew:oI,manualUrl:"/cadastros/tipo-veiculo"}):null})]})};var ed=a(60565),ec=a(30944),eu=a(63067);let em=()=>{let{user:e,loggedUnity:o}=(0,n.useContext)(y.V),a=(0,b.useRouter)(),l=a.pathname,{setTitle:r}=(0,n.useContext)(ed.f),{id:d,setId:c}=(0,n.useContext)(C.X),{startFilter:u,setFilteredDataRecebimentoMP:m,filteredDataRecebimentoMP:x,setDataRecebimentoMP:p}=(0,ec.L0)(),f=async()=>{await s.hi.get("".concat(l,"/getList/").concat(o.unidadeID,"/").concat(e.papelID,"/").concat(e.usuarioID)).then(e=>{m(e.data),p(e.data),r({title:"Recebimento de MP",subtitle:{id:d,count:e.data.length,new:!1}})})};(0,n.useEffect)(()=>{f(),u((0,t.jsx)(eu.default,{}),!1)},[d,c,a.query]);let h=2==e.papelID?[{headerName:"ID",field:"id",size:.1},{headerName:"Data",field:"data",size:.1,type:"date",variant:"naoConformidade"},{headerName:"F\xe1brica",field:"fabrica",size:.2},{headerName:"NF",field:"nf",size:1},{headerName:"Produtos",field:"produtos",size:1},{headerName:"Modelo",field:"modelo",size:.2},{headerName:"Status",field:{name:"status",cor:"cor"},size:.2,type:"statusSteps"}]:[{headerName:"ID",field:"id",size:.1},{headerName:"Data",field:"data",size:.7,type:"date",variant:"naoConformidade"},{headerName:"Fornecedor",field:"fornecedor",size:1},{headerName:"NF",field:"nf",size:.6},{headerName:"Produtos",field:"produtos",size:1},{headerName:"Modelo",field:"modelo",size:1},{headerName:"Status",field:{name:"status",cor:"cor"},size:1,type:"statusSteps"}],v=(0,D.OL)(l,h);return(0,t.jsx)(t.Fragment,{children:x?d&&d>0?(0,t.jsx)(er,{id:d,model:null}):(0,t.jsx)(i.Z,{result:x,columns:v},x):(0,t.jsx)(S.Z,{show:!0})})};var ex=em}},function(e){e.O(0,[4738,4186,1445,1111,5999,172,2187,1515,44,6887,5061,9525,3757,6545,9774,2888,179],function(){return e(e.s=68374)}),_N_E=e.O()}]);