(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1132],{94156:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/formularios/limpeza",function(){return t(46579)}])},92024:function(e,a,t){"use strict";var o=t(85893),s=t(67294),n=t(44731),l=t(62097),i=t(41796),r=t(19550);let c=(0,s.forwardRef)((e,a)=>{let{sx:t,src:s,skin:c,color:d}=e,u=(0,l.Z)(),m=(0,r.Z)(),x=(e,a)=>"light"===e?{...m["".concat(a,"Light")]}:"light-static"===e?{color:m["".concat(a,"Light")].color,backgroundColor:(0,i.$n)(u.palette[a].main,.88)}:{...m["".concat(a,"Filled")]},p={primary:x(c,"primary"),secondary:x(c,"secondary"),success:x(c,"success"),error:x(c,"error"),warning:x(c,"warning"),info:x(c,"info")};return(0,o.jsx)(n.Z,{ref:a,...e,sx:!s&&c&&d?Object.assign(p[d],t):t})});c.defaultProps={skin:"filled",color:"primary"},a.Z=c},93250:function(e,a,t){"use strict";var o=t(85893),s=t(49837),n=t(91359),l=t(69175);let i=e=>{let{result:a,columns:t,btnNew:i=!0,btnPrint:r=!0,btnBack:c,openModal:d,modalLog:u,btnNewModal:m,handleNewModal:x}=e;return(0,o.jsx)(s.Z,{children:(0,o.jsx)(n.Z,{sx:{pt:"0"},children:(0,o.jsx)(l.Z,{rows:a,columns:t,modalLog:u,buttonsHeader:{btnNew:i,btnPrint:r,btnBack:c,openModal:d,btnNewModal:m,handleNewModal:x}})})})};a.Z=i},46905:function(e,a,t){"use strict";var o=t(85893),s=t(87536),n=t(79072),l=t(55343),i=t(67836);let r=e=>{let{xs:a,md:t,title:r,name:c,disabled:d,required:u,form:m,onChange:x}=e;return(0,o.jsx)(n.ZP,{item:!0,xs:a,md:t,children:(0,o.jsx)("div",{children:(0,o.jsx)(l.Z,{fullWidth:!0,children:(0,o.jsx)(s.Qr,{name:c,control:m.control,rules:{required:u},render(e){let{field:a}=e;return(0,o.jsx)(i.Z,{label:r,value:null==a?void 0:a.value,placeholder:r,type:"date",size:"small","aria-describedby":"validation-schema-nome",disabled:d,error:!!m.formState.errors[c],onChange(e){let t=e.target.value;a.onChange(t),x&&x(t)},InputLabelProps:{shrink:!0},inputProps:{min:"1900-01-01",max:"2100-01-01"}})}})})})})};a.Z=r},55148:function(e,a,t){"use strict";var o=t(85893),s=t(79072),n=t(55343),l=t(35966),i=t(67836),r=t(87536),c=t(53934),d=t(30944);let u=e=>{let{xs:a,md:t,title:u,options:m,form:x,name:p,limitTags:f,value:h,required:v,disabled:g,multiple:j,onChange:b,className:Z,keyProps:D,createNew:y,helpText:I,helpTextPosition:C}=e,S=y?[{id:null,name:"-- Novo --"},...null!=m?m:[]]:m,{key:w}=(0,d.L0)();return(0,o.jsx)(s.ZP,{item:!0,xs:a,md:t,sx:{my:1},className:Z,children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(n.Z,{fullWidth:!0,children:(0,o.jsx)(r.Qr,{name:p,control:x.control,rules:{required:v},render(e){var a;let{field:t}=e;return(0,o.jsx)(l.Z,{options:S.map(e=>e.name),value:null!=h?h:null===(a=x.getValues(p))||void 0===a?void 0:a.name,onChange(e,a){let t=S.find(e=>e.name===a);x.setValue(p,null!=t?t:null),b&&b(a)},renderInput(e){var a;return(0,o.jsx)(i.Z,{...e,id:"customSelect",size:"small",label:u,placeholder:u,error:!!x.formState.errors[p],helperText:null===(a=x.formState.errors[p])||void 0===a?void 0:a.message})}},D||w)}})}),I&&(0,o.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,o.jsx)(c.Z,{text:I,position:null!=C?C:"top"})})]})})};a.Z=u},13529:function(e,a,t){"use strict";t.r(a);var o=t(85893),s=t(67294),n=t(46905),l=t(55148),i=t(51570),r=t(30944);let c=()=>{var e,a,t;let{form:c,setNames:d,filterDate:u,SelectFilterByName:m,data:x,setFilteredData:p,handleSearch:f,key:h}=(0,r.L0)(),{commonData:v}=(0,i.Lq)(),g=x,j=async()=>{p(g=await m(g=await m(g=await m(g=await u(g=await f(g)),"status"),"profissional"),"modelo"))};return(0,s.useEffect)(()=>{j()},[h]),(0,s.useEffect)(()=>{d(["dataInicio","dataFim","status","profissional","modelo"])},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Z,{xs:12,md:6,title:"Data inicio da avaliac\xe3o",name:"dataInicio",form:c}),(0,o.jsx)(n.Z,{xs:12,md:6,title:"Data Fim da avalia\xe7\xe3o",name:"dataFim",form:c}),(0,o.jsx)(l.Z,{xs:12,md:6,title:"Status",name:"status",form:c,options:v.status,value:null===(e=c.getValues("status"))||void 0===e?void 0:e.name}),(0,o.jsx)(l.Z,{xs:12,md:6,title:"Profissional",name:"profissional",form:c,options:v.professional,value:null===(a=c.getValues("profissional"))||void 0===a?void 0:a.name}),(0,o.jsx)(l.Z,{xs:12,md:6,title:"Modelo",name:"modelo",value:null===(t=c.getValues("modelo"))||void 0===t?void 0:t.name,form:c,options:v.limpezaModel})]})};a.default=c},46579:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return U}});var o=t(85893),s=t(67294),n=t(60664),l=t(93250),i=t(87536),r=t(99734),c=t(34282),d=t(29308),u=t(7071),m=t(61953),x=t(19604),p=t(49837),f=t(91359),h=t(29630),v=t(79072),g=t(55343),j=t(11163),b=t.n(j),Z=t(71798),D=t(92477),y=t(83830),I=t(40039),C=t(86501),S=t(66136),w=t(14588),P=t(56531),N=t(50287),E=t(84220),z=t(44731);let F=e=>{var a,t,n;let{value:l}=e,{settings:i}=(0,s.useContext)(S.J6);return(0,o.jsx)(p.Z,{style:{height:"100%"},children:(0,o.jsx)(f.Z,{sx:{textAlign:"center"},children:(0,o.jsx)("div",{className:"flex flex-col items-center gap-1",children:(null==l?void 0:l.nome_)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(z.Z,{variant:"rounded",sx:{width:70,height:70},className:"p-1 ".concat("dark"===i.mode?"!bg-[#e0e0e0]":"!bg-[#f5f5f5]"),children:(0,o.jsx)("img",{src:null!==(a=null==l?void 0:l.foto)&&void 0!==a?a:"/imageDefault/factory.svg",alt:"Imagem da logo da f\xe1brica"})})}),(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:null==l?void 0:l.nome_}),(0,o.jsx)(h.Z,{variant:"subtitle2",children:null==l?void 0:l.cnpj_}),l.email?(0,o.jsx)(h.Z,{variant:"subtitle2",children:null==l?void 0:l.email}):(0,o.jsx)(h.Z,{variant:"subtitle2",color:"error",sx:{textTransform:"italic"},children:"E-mail n\xe3o informado"}),(null==l?void 0:l.telefone)&&(0,o.jsx)(h.Z,{variant:"subtitle2",children:null!==(t=null==l?void 0:l.telefone)&&void 0!==t?t:"--"}),(null==l?void 0:l.cidade)&&(0,o.jsx)(h.Z,{variant:"subtitle2",children:null!==(n=null==l?void 0:l.cidade)&&void 0!==n?n:"--"})]}):(0,o.jsx)(h.Z,{variant:"subtitle1",children:"-- Selecione um fornecedor --"})})})})};var k=t(22991);let L=e=>{var a,t;let{form:l,limpezaID:i,modelo:r,values:c,fields:u,disabled:m}=e,{user:x}=(0,s.useContext)(I.V),[h,g]=(0,s.useState)([]),j=async()=>{let e=await n.h.post("/cadastros/profissional/getProfissionaisAssinatura",{formularioID:4,modeloID:r.id});g(e.data.preenche),b(e.data.preenche)},b=e=>{let a=x.profissionalID,t=e.find(e=>e.id===a);t&&t.id>0&&l.setValue("fieldsHeader.profissional",t)};return(0,s.useEffect)(()=>{j()},[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(v.ZP,{container:!0,alignItems:"stretch",spacing:4,children:[(0,o.jsx)(v.ZP,{item:!0,xs:12,md:10,children:(0,o.jsx)(p.Z,{style:{height:"100%"},children:(0,o.jsx)(f.Z,{children:(0,o.jsxs)(v.ZP,{container:!0,spacing:4,children:[(0,o.jsx)(v.ZP,{item:!0,xs:12,sx:{textAlign:"right"},children:(0,o.jsx)(k.Z,{data:null!==(a=null==c?void 0:c.setores)&&void 0!==a?a:[]})}),(0,o.jsx)(N.Z,{xs:12,md:2,title:"Data da avalia\xe7\xe3o",name:"fieldsHeader.data",type:"date",value:null!==(t=null==c?void 0:c.data)&&void 0!==t?t:new Date,disabled:m,typeValidation:"dataPassado",daysValidation:365,form:l}),(0,o.jsx)(d.Z,{xs:12,md:2,title:"Hora da avalia\xe7\xe3o",name:"fieldsHeader.hora",type:"time",disabled:m,form:l}),(0,o.jsx)(E.Z,{xs:12,md:4,title:"Profissional preenchimento",name:"fieldsHeader.profissional",type:"string",options:h,disabled:m,form:l}),(0,o.jsx)(P.Z,{fields:u,values:u,disabled:m,form:l})]})})})}),(0,o.jsx)(v.ZP,{item:!0,xs:12,md:2,children:(0,o.jsx)(F,{value:null})})]})})};var M=t(41088),_=t(92629),V=t(1503),A=t(91757),H=t(934);let T=e=>{var a,t;let l;let{id:j}=e,{menu:P,user:N,loggedUnity:E,hasPermission:z,hasSectorPermission:F}=(0,s.useContext)(I.V),[k,T]=(0,s.useState)(!1),[O,R]=(0,s.useState)(!1),[W,B]=(0,s.useState)(!1),[J,X]=(0,s.useState)(!1),[q,G]=(0,s.useState)(null),[Q,U]=(0,s.useState)([]),[$,K]=(0,s.useState)(null),[Y,ee]=(0,s.useState)(!1),[ea,et]=(0,s.useState)([]),[eo,es]=(0,s.useState)([]),[en,el]=(0,s.useState)([]),[ei,er]=(0,s.useState)(null),[ec,ed]=(0,s.useState)([]),[eu,em]=(0,s.useState)(null),[ex,ep]=(0,s.useState)(""),[ef,eh]=(0,s.useState)(!1),[ev,eg]=(0,s.useState)(!1),[ej,eb]=(0,s.useState)({status:!1,errors:[]}),[eZ,eD]=(0,s.useState)(null),{settings:ey}=(0,s.useContext)(S.J6),{setId:eI}=(0,s.useContext)(y.X),{isLoading:eC,startLoading:eS,stopLoading:ew}=(0,M.Z)(),[eP,eN]=(0,s.useState)(!1),{setReportParameters:eE,sendPdfToServer:ez}=(0,V.Gc)(),[eF,ek]=(0,s.useState)({status:!1,message:"Voc\xea n\xe3o tem permiss\xf5es",messageType:"info"}),eL=b(),eM=j&&j>0?"edit":"new",e_=eL.pathname,eV=(0,i.cI)(),eA=()=>{eI(q.modelo.id),eL.push("/configuracoes/formularios/limpeza/")},eH=async e=>{let a={status:30,observacao:null==e?void 0:e.obs,auth:{usuarioID:N.usuarioID,papelID:N.papelID,unidadeID:E.unidadeID}};R(!0);try{await n.h.post("".concat(e_,"/changeFormStatus/").concat(j),a).then(e=>{C.ZP.success(Z.OD.successUpdate),R(!1),manageNotifications($,null,null)})}catch(t){console.log(t)}finally{T(!k)}},eT={id:1,name:"Reabrir formul\xe1rio",description:"Reabrir formul\xe1rio para preenchimento.",component:(0,o.jsx)(A.Z,{}),disabled:!!J||!z(eL.pathname,"editar"),route:null,type:null,action:eH,modal:!0,size:"sm",icon:"heroicons:lock-open",identification:null},eO=[];ex.status>=40&&eO.push(eT),l=!1,P.map(e=>{e.menu.map(e=>{e.submenu&&e.submenu.length>0&&e.submenu.map(e=>{"/configuracoes/formularios"==e.rota&&(l=!0)})})}),l&&eO.push({id:5,name:"Configura\xe7\xf5es do formul\xe1rio",description:"Alterar as configura\xe7\xf5es do modelo de formul\xe1rio.",route:null,type:null,action:eA,modal:!1,icon:"bi:gear",identification:null});let eR=async()=>{},eW=()=>{eS();try{n.h.post("".concat(e_,"/getData/").concat(j),{type:eM,profissionalID:N.profissionalID,unidadeID:E.unidadeID}).then(e=>{var a,t,o,s;console.log("getData: ",e.data),et(e.data.fieldsHeader),es(e.data.fieldsFooter),el(e.data.fields),ed(e.data.blocos),ep(e.data.info),G(e.data.unidade),em(e.data.ultimaMovimentacao),eV.reset(e.data);let n=Z.WR[null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(t=a.info)||void 0===t?void 0:t.status];K(n),ek({status:!!(1==N.papelID&&e.data.info.status<40&&F(null!==(s=null===(o=e.data.fieldsHeader)||void 0===o?void 0:o.setores)&&void 0!==s?s:[])),message:e.data.info.status>40?"Esse formul\xe1rio j\xe1 foi conclu\xeddo, n\xe3o \xe9 mais poss\xedvel alterar as informa\xe7\xf5es!":e.data.info.status<40?"Formul\xe1rio aberto para preenchimento!":40==e.data.info.status?"Este formul\xe1rio est\xe1 aguardando aprova\xe7\xe3o!":null,messageType:"info"}),eR()}).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e)})}catch(e){console.log("\uD83D\uDE80 ~ error:",e)}finally{ew()}},eB=()=>{eV.clearErrors();let e=!1,a=[];null==en||en.forEach((t,o)=>{let s=t.tabela?"fields[".concat(o,"].").concat(t.tabela):"fields[".concat(o,"].").concat(t.nomeColuna),n=eV.getValues(s);1!==t.obrigatorio||n||(eV.setError(s,{type:"manual",message:"Campo obrigat\xf3rio"}),a.push(null==t?void 0:t.nomeCampo),e=!0)}),ec.forEach((t,o)=>{t.itens.forEach((t,s)=>{let n=eV.getValues("blocos[".concat(o,"].itens[").concat(s,"].resposta"));(null==t?void 0:t.obrigatorio)!==1||n||(eV.setError("blocos[".concat(o,"].itens[").concat(s,"].resposta"),{type:"manual",message:"Campo obrigat\xe1rio"}),a.push(null==t?void 0:t.nome),e=!0),t.respostaConfig&&1==t.respostaConfig.anexo&&t.respostaConfig.anexosSolicitados.length>0&&t.respostaConfig.anexosSolicitados.forEach((n,l)=>{1==n.obrigatorio&&n.anexos&&0==n.anexos.length&&(eV.setError("blocos[".concat(o,"].itens[").concat(s,"].respostaConfig.anexosSolicitados[").concat(l,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),a.push("Anexo: ".concat(null==t?void 0:t.nome," / ").concat(null==n?void 0:n.nome)),e=!0)})})}),eb({status:e,errors:a})},eJ=e=>{eD(e),eB(),eh(!0)},eX=async e=>{eh(!1),e.conclusion=!0,await eV.handleSubmit(eq)(e)},eq=async function(e){var a,t;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===o.conclusion&&(e.concluiForm=!0,e.info.status=null!==(a=o.status)&&void 0!==a?a:ex.status,e.obsConclusao=o.obsConclusao);let s={form:e,auth:{usuarioID:N.usuarioID,profissionalID:null!==(t=N.profissionalID)&&void 0!==t?t:0,papelID:N.papelID,unidadeID:E.unidadeID}};try{"edit"==eM?await n.h.post("".concat(e_,"/updateData/").concat(j),s).then(e=>{C.ZP.success(Z.OD.successUpdate)}):"new"==eM?await n.h.post("".concat((0,Z.g_)(e_),"/insertData"),s).then(e=>{eL.push("".concat((0,Z.g_)(e_))),eI(e.data),C.ZP.success(Z.OD.successNew)}):C.ZP.error(Z.OD.error)}catch(l){console.log("errro da fun\xe7\xe3o update/email",l)}finally{T(!k)}},eG=async(e,a)=>{B(!0);let t=e.target.files;if(t&&t.length>0){var o,s;let l=new FormData;for(let i=0;i<t.length;i++)l.append("files[]",t[i]);l.append("usuarioID",N.usuarioID),l.append("unidadeID",E.unidadeID),l.append("parLimpezaModeloBlocoID",null!==(o=a.parLimpezaModeloBlocoID)&&void 0!==o?o:null),l.append("itemOpcaoAnexoID",null!==(s=a.itemOpcaoAnexoID)&&void 0!==s?s:null),await n.h.post("".concat(e_,"/saveAnexo/").concat(j,"/item/").concat(N.usuarioID,"/").concat(q.unidadeID),l).then(e=>{let a=eV.getValues();eq(a)}).catch(e=>{var a,t,o;C.ZP.error(null!==(o=null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)&&void 0!==o?o:"Erro ao atualizar anexo, tente novamente!!!!")}).finally(()=>{B(!1),T(!k)})}},eQ=async e=>{e&&await n.h.delete("".concat(e_,"/deleteAnexo/").concat(j,"/").concat(e.anexoID,"/").concat(q.unidadeID,"/").concat(N.usuarioID,"/item")).then(e=>{let a=eV.getValues();eq(a)}).catch(e=>{var a,t,o;C.ZP.error(null!==(o=null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)&&void 0!==o?o:"Erro ao remover anexo, tente novamente!")}).finally(()=>{T(!k)})},eU=e=>{e.preventDefault();let a=eV.getValues();eq(a)};return(0,s.useEffect)(()=>{"edit"==eM&&eW()},[j,k]),(0,s.useEffect)(()=>{eB()},[eC]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("form",{onSubmit:e=>eU(e),children:[(0,o.jsx)(D.Z,{btnCancel:!0,btnSave:!ex.concluido,btnSend:ex.status>=30&&!ex.concluido,btnPrint:"edit"==eM,btnDelete:ex.status<40,onclickDelete:()=>eN(!0),actionsData:eO,actions:!0,handleSubmit:()=>eV.handleSubmit(eq),handleSend:eJ,iconConclusion:"mdi:check-bold",titleConclusion:"Concluir",title:"Limpeza",componentSaveReport:null,btnStatus:"edit"==eM,handleBtnStatus:()=>ee(!0),type:eM,status:$}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex gap-2 mb-2",children:[$&&(0,o.jsx)(u.Z,{size:"small",skin:"light",color:$.color,label:$.title,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}}),q&&q.modelo&&(0,o.jsx)(u.Z,{size:"small",skin:"light",label:q.modelo.nome,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,o.jsxs)(m.Z,{display:"flex",flexDirection:"column",sx:{gap:6},children:[eu&&(0,o.jsxs)(x.Z,{severity:"info",children:["\xdaltima movimenta\xe7\xe3o: Profissional ".concat(eu.nome," do(a) ").concat(eu.nomeFantasia," movimentou o formul\xe1rio de ").concat(eu.statusAnterior," para ").concat(eu.statusAtual," em ").concat(eu.dataHora,"."),eu.observacao&&(0,o.jsxs)("p",{children:[(0,o.jsx)("br",{}),'Mensagem: "',eu.observacao,'"']})]}),ex&&""!=ex.cabecalhoModelo&&(0,o.jsx)(p.Z,{children:(0,o.jsx)(f.Z,{children:(0,o.jsx)(h.Z,{variant:"subtitle1",children:ex.cabecalhoModelo})})}),q&&(0,o.jsx)(L,{recebimentoMpID:j,modelo:q.modelo,values:ea,fields:en,disabled:!eF.status,form:eV}),ec&&ec.map((e,a)=>(0,o.jsx)(r.Z,{form:eV,bloco:e,index:a,blockKey:"parLimpezaModeloBlocoID",setBlocos:ed,blocos:ec,disabled:!eF.status,handleFileSelect:eG,handleRemoveAnexoItem:eQ,status:ex.status})),ex&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(p.Z,{children:(0,o.jsx)(f.Z,{children:(0,o.jsx)(v.ZP,{container:!0,spacing:4,children:(0,o.jsx)(v.ZP,{item:!0,xs:12,md:12,children:(0,o.jsxs)(g.Z,{fullWidth:!0,children:[(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Observa\xe7\xf5es"}),(0,o.jsx)(d.Z,{title:"Observa\xe7\xe3o (opcional)",name:"info.obs",multiline:!0,rows:4,value:ex.obs,disabled:!eF.status,form:eV})]})})})})})}),eo&&eo.concluded&&(null===(a=eo.conclusion)||void 0===a?void 0:a.profissional)&&(0,o.jsx)(h.Z,{variant:"caption",children:"Conclu\xeddo por ".concat(eo.conclusion.profissional.nome," em ").concat(eo.conclusion.dataFim," ").concat(eo.conclusion.horaFim,".")}),(0,o.jsx)(H.Z,{id:j,parFormularioID:4},k),Y&&(0,o.jsx)(c.Z,{title:"Hist\xf3rico do Formul\xe1rio",text:"Listagem do hist\xf3rico das movimenta\xe7\xf5es do formul\xe1rio ".concat(j," de Limpeza."),id:j,parFormularioID:4,formStatus:ex.status,hasFormPending:J,canChangeStatus:!1,openModal:Y,handleClose:()=>ee(!1),btnCancel:!0,btnConfirm:!0,handleSubmit:!1}),(0,o.jsx)(w.Z,{openModal:ef,handleClose(){eh(!1),eB()},title:"Concluir Limpeza e Higieniza\xe7\xe3o",text:"Deseja realmente concluir este formul\xe1rio?",info:ex,canChange:!J,btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",conclusionForm:eX,listErrors:ej,canApprove:!0,type:"limpeza",unity:q,values:eo,control:eV.control,formularioID:4,modeloID:null==q?void 0:null===(t=q.modelo)||void 0===t?void 0:t.id,form:eV}),(0,o.jsx)(_.Z,{title:"Excluir Formul\xe1rio",description:"Tem certeza que deseja exluir o formulario?",params:{route:"formularios/limpeza/delete/".concat(j),messageSucceded:"Formul\xe1rio exclu\xeddo com sucesso!",MessageError:"Dado possui pend\xeancia!"},open:eP,handleClose:()=>eN(!1)})]})]})]})})};var O=t(60565),R=t(47842),W=t(30944),B=t(13529),J=t(45670),X=t(8769),q=t(55050),G=t(18661);let Q=()=>{let{user:e,loggedUnity:a}=(0,s.useContext)(I.V),t=(0,j.useRouter)(),i=t.pathname,{setTitle:r}=(0,s.useContext)(O.f),{id:c}=(0,s.useContext)(y.X),{startFilter:d,setFilteredData:u,filteredData:x,setData:p}=(0,W.L0)(),f=async()=>{await n.h.get("".concat(i,"/getList/").concat(a.unidadeID,"/").concat(e.papelID,"/").concat(e.usuarioID)).then(e=>{u(e.data),p(e.data),r({icon:"carbon:clean",title:"Limpeza e Higieniza\xe7\xe3o",subtitle:{id:c,count:e.data.length,new:!1}})})};(0,s.useEffect)(()=>{f(),d((0,o.jsx)(B.default,{}))},[c]);let h=(0,Z.OL)(i,[{headerName:"ID",field:"id",size:.1},{headerName:"Data",field:"data",size:.1,type:"date"},{headerName:"Modelo",field:"modelo",size:.2},{headerName:"Status",field:{name:"status",cor:"cor"},size:.2,type:"statusSteps"}]),[v,g]=(0,s.useState)("1"),b=(e,a)=>{g(a)};return(0,o.jsx)(o.Fragment,{children:x?c&&c>0?(0,o.jsx)(T,{id:c}):(0,o.jsxs)(J.ZP,{value:v,children:[(0,o.jsx)(m.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,o.jsxs)(X.Z,{onChange:b,"aria-label":"lab API tabs example",children:[(0,o.jsx)(G.Z,{label:"Limpeza e Higieniza\xe7\xe3o",value:"1"}),(0,o.jsx)(G.Z,{label:"N\xe3o Conformidade",value:"2"})]})}),(0,o.jsx)(q.Z,{value:"1",children:(0,o.jsx)(l.Z,{result:x,columns:h})}),(0,o.jsx)(q.Z,{value:"2",children:"N\xe3o conformidade..."})]}):(0,o.jsx)(R.Z,{show:!0})})};var U=Q},69175:function(e,a,t){"use strict";t.d(a,{Z:function(){return I}});var o=t(85893),s=t(67294),n=t(18104),l=t(75680),i=t(78082),r=t(83830),c=t(1890),d=t(60664),u=t(11163),m=t(77745),x=t(29630),p=t(95398),f=t(79072),h=t(21609),v=t(80562),g=t(40039),j=t(66136),b=t(92024);let Z=e=>{let{open:a,handleClose:t,row:n}=e,l=(0,u.useRouter)(),[i,r]=(0,s.useState)(null),{loggedUnity:Z}=(0,s.useContext)(g.V),D=l.pathname,{settings:y}=(0,s.useContext)(j.J6),I=y.mode,C=async()=>{let e=await d.h.get("".concat(D,"/getData/").concat(Z.unidadeID,"/").concat(n.id));r(e.data)};return(0,s.useEffect)(()=>{n&&C()},[n]),n&&i&&(0,o.jsxs)(c.Z,{open:a,onClose:t,scroll:"paper",maxWidth:"md",fullWidth:!0,children:[(0,o.jsxs)(m.Z,{id:"customized-dialog-title",sx:{textAlign:"center"},children:[(0,o.jsx)(x.Z,{variant:"h5",component:"span",children:n.nome}),(0,o.jsx)(x.Z,{variant:"body2",children:"Este log #".concat(n.id," gerou um total de ").concat(i.length," ").concat(1==i.length?"script":"scripts")}),(0,o.jsx)(v.Z,{"aria-label":"close",onClick:t,sx:{top:10,right:10,position:"absolute",color:"grey.500"},children:(0,o.jsx)(h.Z,{icon:"mdi:close"})})]}),(0,o.jsxs)(p.Z,{sx:{p:10,mt:8},children:[(0,o.jsxs)(f.ZP,{container:!0,spacing:8,children:[(0,o.jsxs)(f.ZP,{item:!0,md:4,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(h.Z,{icon:"fluent-mdl2:date-time-mirrored",className:"text-5xl"}),(0,o.jsx)("span",{children:n.dataHora})]}),(0,o.jsxs)(f.ZP,{item:!0,md:4,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(h.Z,{icon:"majesticons:user-line",className:"text-5xl"}),(0,o.jsx)("span",{children:n.usuario})]}),(0,o.jsxs)(f.ZP,{item:!0,md:4,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(h.Z,{icon:"material-symbols-light:bring-your-own-ip",className:"text-5xl"}),(0,o.jsx)("span",{children:n.ip})]})]}),(0,o.jsx)("div",{className:"flex flex-col gap-4 mt-8",children:i.map(e=>(0,o.jsxs)("div",{className:"border ".concat("dark"==I?"border-white/20":"border-black/20","   rounded-xl p-4 space-y-4 h-auto"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)(b.Z,{skin:"light",color:"insert"==e.operacao?"success":"update"==e.operacao?"warning":"delete"==e.operacao?"error":(e.operacao,"info"),variant:"rounded",sx:{mr:3,width:48,height:48},children:(0,o.jsx)(h.Z,{icon:"insert"==e.operacao?"dashicons:insert":"update"==e.operacao?"akar-icons:edit":"delete"==e.operacao?"mingcute:delete-line":"login"==e.operacao?"ic:round-login":"email"==e.operacao?"mynaui:send":"ic:round-logout"})}),(0,o.jsx)(x.Z,{sx:{color:"text.secondary",marginTop:"-4px"},children:"insert"==e.operacao?"Inclus\xe3o":"update"==e.operacao?"Altera\xe7\xe3o":"delete"==e.operacao?"Exclus\xe3o":"login"==e.operacao?"Login efetuado":"email"==e.operacao?"Envio de E-mail":"Logout efetuado"})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"flex flex-col justify-end ",children:[(0,o.jsx)(x.Z,{variant:"caption",sx:{color:"text.disabled",textAlign:"right"},children:"Tabela"}),(0,o.jsx)(x.Z,{sx:{color:"text.secondary",marginTop:"-4px"},children:e.tabela})]})})]}),(0,o.jsx)("div",{className:"".concat("dark"===I?"bg-[#212b36]":"bg-[#f7f7f9]"," p-2 rounded-lg"),children:(0,o.jsx)("pre",{children:function(e,a){try{let t=JSON.parse(e),s=JSON.stringify(t,null,2);return s=s.replace(/(\"alterado\": true)/g,'<span style="background-color: #ce9728; padding: 2px 1px; border-radius: 4px">$1</span>'),(0,o.jsx)("pre",{dangerouslySetInnerHTML:{__html:s}})}catch(n){return e}}(e.alteracao,e.operacao)})})]}))}),(0,o.jsx)("div",{})]})]})};var D=t(30944);let y=e=>{let{rows:a,columns:t,buttonsHeader:c,modalLog:d}=e,{pageSize:u,setPageSize:m,data:x}=(0,D.L0)(),{setId:p}=(0,s.useContext)(r.X),[f,h]=(0,s.useState)(null),[v,g]=(0,s.useState)(!1);function j(e){let a=e.split("/");return"".concat(a[2],"-").concat(a[1],"-").concat(a[0])}x.slice().sort((e,a)=>"Inativo"===e.status&&"Inativo"!==a.status?1:"Inativo"!==e.status&&"Inativo"===a.status?-1:0),t.map(e=>{"date"===e.type&&(e.sortComparator=(e,a)=>{let t=j(e),o=j(a);return t.localeCompare(o)})});let b=e=>{d?(h(e),g(!0)):p(e.id)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n._,{localeText:l.F.components.MuiDataGrid.defaultProps.localeText,autoHeight:!0,columns:t,pageSize:u,rowsPerPageOptions:[10,20,30,40,50,100],components:{Toolbar:i.Z},rows:a,onCellClick(e,a){b(e.row)},onPageSizeChange:e=>m(e),sx:{"& .MuiDataGrid-cell":{cursor:"pointer",overflow:"scroll"}},componentsProps:{toolbar:{buttonsHeader:c,rows:a}},className:"min-h-[85vh]"}),(0,o.jsx)(Z,{open:v,handleClose:()=>g(!1),row:f})]})};var I=y}},function(e){e.O(0,[4738,4186,1445,1111,5999,5206,2187,4818,4297,2477,8428,8934,5268,9774,2888,179],function(){return e(e.s=94156)}),_N_E=e.O()}]);