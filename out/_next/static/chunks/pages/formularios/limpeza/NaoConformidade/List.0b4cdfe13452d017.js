(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1379],{97085:function(e,l,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/formularios/limpeza/NaoConformidade/List",function(){return o(15217)}])},84220:function(e,l,o){"use strict";var i=o(85893),n=o(79072),t=o(55343),a=o(35966),r=o(67836),s=o(9041),d=o(61953),c=o(17575),m=o(80562),u=o(70918),p=o(53934),x=o(62097),f=o(51514),h=o(67294),v=o(21609),j=o(83830),g=o(11163);let Z=e=>{let{xs:l,md:o,title:Z,options:b,name:N,limitTags:z,required:y,disabled:C,multiple:I,onChange:P,className:_,createNew:w,helpText:S,alertRequired:M,helpTextPosition:k,opacity:T,link:E,form:L}=e,{setValue:O,getValues:q,setError:A,clearErrors:D,formState:{errors:X}}=L,R=(0,x.Z)(),{settings:F}=(0,f.r)(),{setId:V}=(0,h.useContext)(j.X),B=(0,g.useRouter)(),[W,G]=(0,h.useState)(""),H=w?[{nome:"-- Novo --"},...null!=b?b:[]]:b,J=I?H.filter(e=>{var l;return!(null===(l=q(N))||void 0===l?void 0:l.some(l=>l.nome===e.nome))}):H,K=(e,l)=>{if(l&&"-- Novo --"===e.target.innerText)w();else{if(I){let o=Array.from(new Set(l.map(e=>e.nome))).map(e=>l.find(l=>l.nome===e));O(N,o),P&&P(o)}else O(N,l),P&&P(l);y&&(!l||I&&0===l.length)?A(N,{type:"required",message:"".concat(Z," \xe9 obrigat\xf3rio")}):D(N)}},Q=()=>{1===H.length&&(O(N,H[0]),P&&P(H[0]))},U=()=>{y&&!q(N)?A(N,{type:"required",message:"".concat(Z," \xe9 obrigat\xf3rio")}):D(N)},Y=()=>{if(E){var e;V(null===(e=q(N))||void 0===e?void 0:e.id),B.push(E)}};return(0,h.useEffect)(()=>{Q(),U()},[]),(0,i.jsx)(n.ZP,{item:!0,xs:l,md:o,sx:{my:1},className:_,children:(0,i.jsx)(t.Z,{fullWidth:!0,children:(0,i.jsx)(a.Z,{multiple:I,limitTags:z,size:"small",options:J,getOptionLabel:e=>(null==e?void 0:e.nome)||"",value:I?q(N)||[]:w||1!==J.length?q(N)||null:J[0],inputValue:W,onInputChange(e,l){G(l)},disabled:C,onChange:K,renderInput(e){var l,o,n,t;return(0,i.jsx)(r.Z,{...e,label:Z,placeholder:Z,sx:{opacity:T?.4:1,"& .MuiInputBase-input":{padding:"4px 14px !important"},...(y||M)&&(I?!(null===(l=q(N))||void 0===l?void 0:l.id)||(null===(o=q(N))||void 0===o?void 0:o.length)===0:!(null===(n=q(N))||void 0===n?void 0:n.id))&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:R.palette.error.main},"&:hover fieldset":{borderColor:R.palette.error.main},"&.Mui-focused fieldset":{borderColor:R.palette.error.main}},"& .MuiInputLabel-root":{color:R.palette.error.main},"& .MuiInputLabel-root.Mui-focused":{color:R.palette.error.main}}},InputProps:{...e.InputProps,endAdornment:(0,i.jsxs)(i.Fragment,{children:[e.InputProps.endAdornment,(0,i.jsx)(s.Z,{position:"end",children:(0,i.jsxs)(d.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[S&&(0,i.jsx)(p.Z,{text:S,position:null!=k?k:"top"}),E&&(null===(t=q(N))||void 0===t?void 0:t.id)>0&&(0,i.jsx)(c.Z,{title:"Acessar cadastro",placement:"top",children:(0,i.jsx)(m.Z,{onClick:Y,sx:{color:R.palette.secondary.main},className:"opacity-70",children:(0,i.jsx)(v.Z,{icon:"heroicons-outline:external-link",fontSize:16})})})]})})]})}})},PaperComponent(e){let{children:l}=e;return(0,i.jsx)(u.Z,{sx:{"& ul":{border:"dark"===F.mode?"1px solid rgba(".concat(R.palette.customColors.main,", 0.32)"):"null",borderRadius:"8px"}},children:l})},noOptionsText:"Sem op\xe7\xf5es"})})})};l.Z=Z},12073:function(e,l,o){"use strict";var i=o(85893),n=o(79072),t=o(21609),a=o(7071);let r=e=>{var l,o;let{data:r}=e;if(r)return(0,i.jsxs)(n.ZP,{container:!0,spacing:4,children:[(0,i.jsxs)(n.ZP,{item:!0,xs:12,md:3,children:[(0,i.jsx)("label",{className:"opacity-60",children:"Per\xedodo da limpeza"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(t.Z,{icon:"tabler:calendar-check"}),(0,i.jsx)("p",{children:"".concat(r.limpeza.dataInicio," a ").concat(r.limpeza.dataFim)})]})]}),(0,i.jsxs)(n.ZP,{item:!0,xs:12,md:4,children:[(0,i.jsx)("label",{className:"opacity-60",children:"Setor"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(t.Z,{icon:"fluent-mdl2:map-pin-12"}),(0,i.jsx)("p",{children:r.limpeza.setor})]})]}),(0,i.jsxs)(n.ZP,{item:!0,xs:12,md:3,children:[(0,i.jsx)("label",{className:"opacity-60",children:"Modelo"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,i.jsx)(t.Z,{icon:"clarity:form-line"}),(0,i.jsx)("p",{children:r.limpeza.modelo})]})]}),(0,i.jsxs)(n.ZP,{item:!0,xs:12,md:2,children:[(0,i.jsx)("label",{className:"opacity-60",children:"Limpeza"}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)(a.Z,{skin:"light",label:null===(l=r.limpeza.status)||void 0===l?void 0:l.label,color:null===(o=r.limpeza.status)||void 0===o?void 0:o.color,sx:{height:28,fontSize:"0.75rem"}})})]})]})};l.Z=r},51239:function(e,l,o){"use strict";var i=o(85893),n=o(79072),t=o(12073),a=o(67294),r=o(60664),s=o(40039),d=o(84220);let c=e=>{let{form:l,type:o,data:c}=e,{loggedUnity:m}=(0,a.useContext)(s.V),[u,p]=(0,a.useState)(null),[x,f]=(0,a.useState)(null),h=async()=>{try{let e=await r.h.post("/formularios/limpeza/nao-conformidade/getModels",{unidadeID:m.unidadeID});p(e.data)}catch(l){console.log(l)}},v=async()=>{try{let e=await r.h.post("/formularios/limpeza/nao-conformidade/getLimpezaNC",{unidadeID:m.unidadeID});f(e.data)}catch(l){console.log(l)}};return(0,a.useEffect)(()=>{h(),v()},[c]),(0,i.jsxs)("div",{className:"flex flex-col gap-8",children:["form"===o&&(0,i.jsx)(t.Z,{data:c}),(0,i.jsxs)(n.ZP,{container:!0,spacing:4,children:["list"===o&&(0,i.jsx)(d.Z,{xs:12,md:6,title:"Limpeza",name:"new.limpeza",required:!0,options:null!=x?x:[],helpText:"Selecione a limpeza e higieniza\xe7\xe3o para lan\xe7ar uma nova n\xe3o conformidade",form:l}),u&&(0,i.jsx)(d.Z,{xs:12,md:"form"===o?12:6,title:"Modelo de formul\xe1rio",name:"new.modelo",required:!0,options:null!=u?u:[],value:(null==c?void 0:c.modelo)||(null==u?void 0:u.length)===1?u[0]:{nome:""},helpText:"Selecione um modelo de formul\xe1rio para o preenchimento desta n\xe3o conformidade para este Recebimento de MP",form:l})]})]})};l.Z=c},41088:function(e,l,o){"use strict";var i=o(67294),n=o(83830);let t=()=>{let{isLoading:e,setIsLoading:l}=(0,i.useContext)(n.X),o=()=>{l(!0)},t=()=>{setTimeout(()=>{l(!1)},500)};return{isLoading:e,startLoading:o,stopLoading:t}};l.Z=t}},function(e){e.O(0,[4738,172,3005,5217,9774,2888,179],function(){return e(e.s=97085)}),_N_E=e.O()}]);