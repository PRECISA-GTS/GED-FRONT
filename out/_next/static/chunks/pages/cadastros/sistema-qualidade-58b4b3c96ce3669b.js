(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4931],{55771:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cadastros/sistema-qualidade",function(){return n(34690)}])},84217:function(e,t,n){"use strict";var s=n(85893),a=n(11163),c=n.n(a),o=n(67294),i=n(60664),l=n(49837),u=n(91359),r=n(79072),d=n(87536),h=n(86501),m=n(45061),f=n(86887),x=n(46749),p=n(47842),w=n(60565),Z=n(83830),D=n(29308),j=n(67569),b=n(41088),g=n(40039);let _=e=>{var t,n;let{id:a}=e,[_,v]=(0,o.useState)(!1),[C,N]=(0,o.useState)(null),y=c(),P=a&&a>0?"edit":"new",S=y.pathname,{title:E}=(0,o.useContext)(w.f),{setId:I}=(0,o.useContext)(Z.X),{user:O,loggedUnity:k}=(0,o.useContext)(g.V),{startLoading:z,stopLoading:T}=(0,b.Z)(),{trigger:X,handleSubmit:q,reset:L,control:F,formState:{errors:M},register:R}=(0,d.cI)(),A=async e=>{let t={...e,usuarioID:O.usuarioID,unidadeID:k.unidadeID};z();try{"new"===P?await i.h.post("".concat((0,x.g_)(S),"/new/insertData"),t).then(e=>{y.push("".concat((0,x.g_)(S))),I(e.data),h.ZP.success(x.OD.successNew)}):"edit"===P&&(await i.h.post("".concat(S,"/updateData/").concat(a),t),h.ZP.success(x.OD.successUpdate))}catch(n){n.response&&409===n.response.status?h.ZP.error(x.OD.errorRepeated):console.log(n)}finally{T()}},B=async()=>{try{await i.h.delete("".concat(S,"/").concat(a,"/").concat(O.usuarioID,"/").concat(k.unidadeID)),I(null),v(!1),h.ZP.success(x.OD.successDelete)}catch(e){e.response&&409===e.response.status?(h.ZP.error(x.OD.pendingDelete),v(!1)):console.log(e)}},H=async()=>{"new"==P&&N({fields:{nome:"",status:1}});try{let e="new"===P?"".concat(S,"/new/getData"):"".concat(S,"/getData/").concat(a);await i.h.post(e,{id:a}).then(e=>{N(e.data),L(e.data)})}catch(t){console.log(t)}};return(0,o.useEffect)(()=>{H(),"new"===P&&setTimeout(()=>{X()},300)},[a]),(0,s.jsxs)(s.Fragment,{children:[!C&&(0,s.jsx)(p.Z,{}),C&&(0,s.jsxs)("form",{onSubmit:q(A),children:[(0,s.jsx)(f.Z,{btnCancel:!0,btnSave:!0,btnNew:!0,handleSubmit:()=>q(A),btnDelete:"edit"===P,onclickDelete:()=>v(!0),type:P}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(u.Z,{children:(0,s.jsxs)(r.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(D.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:F,errors:null==M?void 0:null===(t=M.fields)||void 0===t?void 0:t.nome}),(0,s.jsx)(j.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==C?void 0:null===(n=C.fields)||void 0===n?void 0:n.status,typePage:P,register:R})]})})})]}),(0,s.jsx)(m.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+E.title,openModal:_,handleClose:()=>v(!1),handleSubmit:B,btnCancel:!0,btnConfirm:!0})]})};t.Z=_},93250:function(e,t,n){"use strict";var s=n(85893),a=n(49837),c=n(91359),o=n(69175);let i=e=>{let{result:t,columns:n,btnNew:i=!0,btnPrint:l=!0,btnBack:u,openModal:r,modalLog:d}=e;return(0,s.jsx)(a.Z,{children:(0,s.jsx)(c.Z,{sx:{pt:"0"},children:(0,s.jsx)(o.Z,{rows:t,columns:n,modalLog:d,buttonsHeader:{btnNew:i,btnPrint:l,btnBack:u,openModal:r}})})})};t.Z=i},34690:function(e,t,n){"use strict";n.r(t);var s=n(85893),a=n(67294),c=n(60664),o=n(93250),i=n(84217),l=n(60565),u=n(83830),r=n(47842),d=n(11163),h=n(46749),m=n(30944);let f=()=>{let e=(0,d.useRouter)(),t=e.pathname,{setTitle:n}=(0,a.useContext)(l.f),{id:f}=(0,a.useContext)(u.X),{setComponentFilters:x,form:p,setDataFilters:w,filteredData:Z,setFilteredData:D,setData:j,setSearchText:b}=(0,m.L0)(),g=async()=>{await c.h.get(t).then(e=>{D(e.data),j(e.data),n({title:"Sistema de Qualidade",subtitle:{id:f,count:e.data.length,new:!1}})})};(0,a.useEffect)(()=>{g(),p.reset(),x(null),w({}),b("")},[f]);let _=(0,h.OL)(t,[{title:"ID",field:"id",size:.1},{title:"Nome",field:"nome",size:.8},{headerName:"Status",field:{name:"status",cor:"cor"},size:.1}]);return(0,s.jsx)(s.Fragment,{children:Z?f&&f>0?(0,s.jsx)(i.Z,{id:f}):(0,s.jsx)(o.Z,{result:Z,columns:_}):(0,s.jsx)(r.Z,{})})};t.default=f}},function(e){e.O(0,[4738,8371,5061,9525,9774,2888,179],function(){return e(e.s=55771)}),_N_E=e.O()}]);