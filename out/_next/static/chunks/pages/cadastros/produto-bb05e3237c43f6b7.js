(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9413],{59742:function(e,t,a){"use strict";a.d(t,{Z:function(){return C}});var o=a(63366),s=a(87462),n=a(67294),r=a(86010),i=a(94780),l=a(29630),d=a(78884),c=a(67074),u=a(1588),m=a(34867);function x(e){return(0,m.Z)("MuiCardHeader",e)}let v=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var p=a(85893);let h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],f=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},x,t)},Z=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,s.Z)({[`& .${v.title}`]:t.title,[`& .${v.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),g=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),y=n.forwardRef(function(e,t){let a=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:n,avatar:i,className:c,component:u="div",disableTypography:m=!1,subheader:x,subheaderTypographyProps:v,title:y,titleTypographyProps:C}=a,D=(0,o.Z)(a,h),w=(0,s.Z)({},a,{component:u,disableTypography:m}),N=f(w),P=y;null==P||P.type===l.Z||m||(P=(0,p.jsx)(l.Z,(0,s.Z)({variant:i?"body2":"h5",className:N.title,component:"span",display:"block"},C,{children:P})));let S=x;return null==S||S.type===l.Z||m||(S=(0,p.jsx)(l.Z,(0,s.Z)({variant:i?"body2":"body1",className:N.subheader,color:"text.secondary",component:"span",display:"block"},v,{children:S}))),(0,p.jsxs)(Z,(0,s.Z)({className:(0,r.Z)(N.root,c),as:u,ref:t,ownerState:w},D,{children:[i&&(0,p.jsx)(j,{className:N.avatar,ownerState:w,children:i}),(0,p.jsxs)(b,{className:N.content,ownerState:w,children:[P,S]}),n&&(0,p.jsx)(g,{className:N.action,ownerState:w,children:n})]}))});var C=y},27476:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cadastros/produto",function(){return a(65137)}])},69291:function(e,t,a){"use strict";a.d(t,{Z:function(){return E}});var o=a(85893),s=a(11163),n=a.n(s),r=a(67294),i=a(60565),l=a(83830),d=a(60664),c=a(49837),u=a(91359),m=a(79072),x=a(59742),v=a(54225),p=a(87536),h=a(86501),f=a(47842),Z=a(45061),j=a(86887),g=a(64165),b=a(29308),y=a(84220),C=a(67569),D=a(40039),w=a(21609),N=a(88475),P=a(44373);let S=e=>{let{getValues:t,removeAnexo:a,setValue:s,control:n,register:i,errors:l,type:c}=e,[u,m]=(0,r.useState)([]),x=async()=>{let e=await d.h.post("/cadastros/produto/getFormularios");console.log("--> ",e.data),m(e.data)};return(0,r.useEffect)(()=>{x()},[]),t("anexos")&&t("anexos").map((e,d)=>{var m,x,v,p,h,f;return(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(b.Z,{md:6,title:"Nome",name:"anexos[".concat(d,"].nome"),required:!0,control:n,errors:null==l?void 0:null===(m=l.anexos)||void 0===m?void 0:null===(x=m[d])||void 0===x?void 0:x.nome}),(0,o.jsx)(y.Z,{xs:12,md:3,title:"Formul\xe1rio",name:"anexos[".concat(d,"].formulario"),value:e.formulario,required:!0,options:null!=u?u:[],register:i,setValue:s,control:n,errors:null==l?void 0:null===(v=l.anexos)||void 0===v?void 0:null===(p=v[d])||void 0===p?void 0:p.formulario,helpText:"Formul\xe1rio em que ser\xe1 solicitado esse anexo para este produto"}),(0,o.jsx)(C.Z,{xs:1,md:1,title:"Obrigat\xf3rio",name:"anexos[".concat(d,"].obrigatorio"),value:1==e.obrigatorio,typePage:c,register:i}),(0,o.jsx)(C.Z,{xs:1,md:1,title:"Ativo",name:"anexos[".concat(d,"].status"),value:1==e.obrigatorio,typePage:c,register:i}),(0,o.jsx)(N.Z,{xs:4,md:1,title:"Remover",index:d,removeItem:a,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"}),(0,o.jsx)(b.Z,{xs:11,md:12,multiline:!0,items:4,title:"Descri\xe7\xe3o (opcional)",name:"anexos[".concat(d,"].descricao"),control:n,errors:null==l?void 0:null===(h=l.anexos)||void 0===h?void 0:null===(f=h[d])||void 0===f?void 0:f.descricao}),d<t("anexos").length-1&&(0,o.jsx)(P.Z,{})]},d)})};var I=a(41088);let M=e=>{var t,a,s,N;let{id:P,btnClose:M,handleConfirmNew:E,handleModalClose:_,newChange:R,manualUrl:T,outsideID:F}=e,[V,k]=(0,r.useState)(!1),[q,A]=(0,r.useState)(null),O=n(),z=P&&P>0?"edit":"new",H=O.pathname,{title:L}=(0,r.useContext)(i.f),{setId:U}=(0,r.useContext)(l.X),{loggedUnity:X,user:Q}=(0,r.useContext)(D.V),[B,W]=(0,r.useState)([]),[$,G]=(0,r.useState)(!1),{startLoading:J,stopLoading:K}=(0,I.Z)(),{trigger:Y,handleSubmit:ee,setValue:et,reset:ea,control:eo,getValues:es,formState:{errors:en},register:er}=(0,p.cI)({mode:"onChange"}),ei=async e=>{J();let t={...e,unidadeID:X.unidadeID,usuarioID:Q.usuarioID,removedItems:B};console.log(t);try{"new"===z?await d.h.post("cadastros/produto/new/insertData",t).then(e=>{E?E(e.data,"produtos"):(O.push("".concat((0,g.g_)(H))),U(e.data.id)),h.ZP.success(g.OD.successNew)}):"edit"===z&&(await d.h.post("".concat(H,"/updateData/").concat(P),t),h.ZP.success(g.OD.successUpdate))}catch(a){a.response&&409===a.response.status?h.ZP.error(g.OD.errorRepeated):console.log(a)}finally{K()}},el=async()=>{try{await d.h.delete("".concat(H,"/").concat(P,"/").concat(Q.usuarioID,"/").concat(X.unidadeID)),U(null),k(!1),h.ZP.success(g.OD.successDelete)}catch(e){e.response&&409===e.response.status?(h.ZP.error(g.OD.pendingDelete),k(!1)):console.log(e)}},ed=async()=>{try{let e="new"===z?"cadastros/produto/new/getData/".concat(X.unidadeID):"".concat(H,"/getData/").concat(P,"/").concat(X.unidadeID);await d.h.post(e).then(e=>{A(e.data),ea(e.data)})}catch(t){console.log(t)}},ec=(e,t)=>{e.produtoAnexoID&&W([...B,e.produtoAnexoID]);let a=es("anexos").filter((e,a)=>a!==t);et("anexos",a),G(!$)},eu=()=>{let e=[...es("anexos"),{nome:"",obrigatorio:1,status:1,descricao:"",observacao:""}];et("anexos",e),G(!$)};return(0,r.useEffect)(()=>{ed(),setTimeout(()=>{Y()},300)},[P]),(0,r.useEffect)(()=>{R&&ee(ei)()},[R]),(0,o.jsxs)(o.Fragment,{children:[!q&&(0,o.jsx)(f.Z,{}),q&&(0,o.jsxs)("form",{onSubmit:ee(ei),className:"space-y-3",children:[(0,o.jsx)(j.Z,{btnCancel:!0,btnNew:!E,btnSave:!0,btnClose:M,manualUrl:T,handleModalClose:_,handleSubmit:()=>ee(ei),btnDelete:"edit"===z,onclickDelete:()=>k(!0),type:z,outsideID:F}),(0,o.jsx)(c.Z,{children:(0,o.jsx)(u.Z,{children:(0,o.jsxs)(m.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(b.Z,{xs:11,md:5,title:"Nome",name:"fields.nome",required:!0,control:eo,errors:null==en?void 0:null===(t=en.fields)||void 0===t?void 0:t.nome}),(0,o.jsx)(y.Z,{xs:12,md:3,title:"Unidade de medida",name:"unidadeMedida.fields",value:null==q?void 0:q.unidadeMedida.fields,required:!0,options:q.unidadeMedida.options,register:er,setValue:et,control:eo,errors:null==en?void 0:null===(a=en.unidadeMedida)||void 0===a?void 0:a.fields,helpText:"Selecione a unidade de medida"}),(0,o.jsx)(y.Z,{xs:12,md:3,title:"Classificação",name:"classificacao.fields",value:null==q?void 0:null===(s=q.classificacao)||void 0===s?void 0:s.fields,options:q.classificacao.options,register:er,setValue:et,control:eo,errors:null==en?void 0:null===(N=en.classificacao)||void 0===N?void 0:N.fields,helpText:"Selecione a classificação"}),(0,o.jsx)(C.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:q.fields.status,typePage:z,register:er})]})})}),(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(x.Z,{title:"Anexos"}),(0,o.jsx)(u.Z,{children:(0,o.jsxs)(m.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(S,{getValues:es,removeAnexo:ec,setValue:et,control:eo,register:er,errors:en,type:z},$),(0,o.jsx)(m.ZP,{item:!0,xs:12,children:(0,o.jsx)(v.Z,{variant:"outlined",color:"primary",sx:{mt:1},startIcon:(0,o.jsx)(w.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){eu()},children:"Inserir Anexo"})})]})})]})]}),(0,o.jsx)(Z.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+L.title,openModal:V,handleClose:()=>k(!1),handleSubmit:el,btnCancel:!0,btnConfirm:!0})]})};var E=M},93250:function(e,t,a){"use strict";var o=a(85893),s=a(49837),n=a(91359),r=a(69175);let i=e=>{let{result:t,columns:a,btnNew:i=!0,btnPrint:l=!0,btnBack:d,openModal:c,modalLog:u}=e;return(0,o.jsx)(s.Z,{children:(0,o.jsx)(n.Z,{sx:{pt:"0"},children:(0,o.jsx)(r.Z,{rows:t,columns:a,modalLog:u,buttonsHeader:{btnNew:i,btnPrint:l,btnBack:d,openModal:c}})})})};t.Z=i},46905:function(e,t,a){"use strict";var o=a(85893),s=a(87536),n=a(79072),r=a(55343),i=a(67836);let l=e=>{let{xs:t,md:a,title:l,name:d,disabled:c,required:u,form:m,onChange:x}=e;return(0,o.jsx)(n.ZP,{item:!0,xs:t,md:a,children:(0,o.jsx)("div",{children:(0,o.jsx)(r.Z,{fullWidth:!0,children:(0,o.jsx)(s.Qr,{name:d,control:m.control,rules:{required:u},render(e){let{field:t}=e;return(0,o.jsx)(i.Z,{label:l,value:null==t?void 0:t.value,placeholder:l,type:"date",size:"small","aria-describedby":"validation-schema-nome",disabled:c,error:!!m.formState.errors[d],onChange(e){let a=e.target.value;t.onChange(a),x&&x(a)},InputLabelProps:{shrink:!0},inputProps:{min:"1900-01-01",max:"2100-01-01"}})}})})})})};t.Z=l},55148:function(e,t,a){"use strict";var o=a(85893),s=a(79072),n=a(55343),r=a(35966),i=a(67836),l=a(87536),d=a(53934),c=a(30944);let u=e=>{let{xs:t,md:a,title:u,options:m,form:x,name:v,limitTags:p,value:h,required:f,disabled:Z,multiple:j,onChange:g,className:b,keyProps:y,createNew:C,helpText:D,helpTextPosition:w}=e,N=C?[{id:null,name:"-- Novo --"},...null!=m?m:[]]:m,{key:P}=(0,c.L0)();return(0,o.jsx)(s.ZP,{item:!0,xs:t,md:a,sx:{my:1},className:b,children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(n.Z,{fullWidth:!0,children:(0,o.jsx)(l.Qr,{name:v,control:x.control,rules:{required:f},render(e){var t;let{field:a}=e;return(0,o.jsx)(r.Z,{options:N.map(e=>e.name),value:null!=h?h:null===(t=x.getValues(v))||void 0===t?void 0:t.name,onChange(e,t){let a=N.find(e=>e.name===t);x.setValue(v,null!=a?a:null),g&&g(t)},renderInput(e){var t;return(0,o.jsx)(i.Z,{...e,id:"customSelect",size:"small",label:u,placeholder:u,error:!!x.formState.errors[v],helperText:null===(t=x.formState.errors[v])||void 0===t?void 0:t.message})}},y||P)}})}),D&&(0,o.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,o.jsx)(d.Z,{text:D,position:null!=w?w:"top"})})]})})};t.Z=u},60434:function(e,t,a){"use strict";a.r(t);var o=a(85893),s=a(67294),n=a(46905),r=a(55148),i=a(51570),l=a(30944);let d=()=>{var e,t;let{form:a,setNames:d,filterDate:c,SelectFilterByName:u,data:m,setFilteredData:x,handleSearch:v,key:p,searchText:h}=(0,l.L0)(),{commonData:f}=(0,i.Lq)(),Z=m,j=async()=>{x(Z=await v(Z))};return(0,s.useEffect)(()=>{j()},[p]),(0,s.useEffect)(()=>{d([])},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Z,{xs:12,md:6,title:"Data inicio da avaliac\xe3o",name:"dataInicio",form:a}),(0,o.jsx)(n.Z,{xs:12,md:6,title:"Data Fim da avalia\xe7\xe3o",name:"dataFim",form:a}),(0,o.jsx)(r.Z,{xs:12,md:6,title:"Quem preencheu",name:"quemPreenche",value:null===(e=a.getValues("quemPreenche"))||void 0===e?void 0:e.name,form:a,options:[{id:"1",name:"F\xe1brica"},{id:"2",name:"Fornecedor"}]}),(0,o.jsx)(r.Z,{xs:12,md:6,title:"Status",name:"status",form:a,options:f.status,value:null===(t=a.getValues("status"))||void 0===t?void 0:t.name})]})};t.default=d},65137:function(e,t,a){"use strict";a.r(t);var o=a(85893),s=a(67294),n=a(60664),r=a(69291),i=a(93250),l=a(60565),d=a(83830),c=a(47842),u=a(11163),m=a(64165),x=a(40039),v=a(30944),p=a(60434);let h=()=>{let e=(0,u.useRouter)(),t=e.pathname,{setTitle:a}=(0,s.useContext)(l.f),{loggedUnity:h}=(0,s.useContext)(x.V),{id:f}=(0,s.useContext)(d.X),{filteredData:Z,setFilteredData:j,setData:g,startFilter:b}=(0,v.L0)(),y=async()=>{await n.h.get("".concat(t,"/").concat(h.unidadeID)).then(e=>{j(e.data),g(e.data),a({title:"Produto",subtitle:{id:f,count:e.data.length,new:!1}})})};(0,s.useEffect)(()=>{y(),b((0,o.jsx)(p.default,{}))},[f]);let C=(0,m.OL)(t,[{headerName:"ID",field:"id",size:.1},{headerName:"Nome",field:"nome",size:.4},{headerName:"Classifica\xe7\xe3o",field:"classificacao",size:.4},{headerName:"Unidade de medida",field:"unidadeMedida",size:.2},{headerName:"Status",field:{name:"status",cor:"cor"},size:.1}]);return(0,o.jsx)(o.Fragment,{children:Z?f&&f>0?(0,o.jsx)(r.Z,{id:f}):(0,o.jsx)(i.Z,{result:Z,columns:C}):(0,o.jsx)(c.Z,{})})};t.default=h}},function(e){e.O(0,[4738,8371,6887,5061,9525,9774,2888,179],function(){return e(e.s=27476)}),_N_E=e.O()}]);