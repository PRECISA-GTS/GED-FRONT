(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5757],{91359:function(e,t,o){"use strict";o.d(t,{Z:function(){return h}});var a=o(87462),r=o(63366),n=o(67294),s=o(86010),i=o(94780),l=o(67074),d=o(78884),c=o(1588),u=o(34867);function x(e){return(0,u.Z)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var m=o(85893);let v=["className","component"],p=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},x,t)},f=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Z=n.forwardRef(function(e,t){let o=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:n,component:i="div"}=o,l=(0,r.Z)(o,v),c=(0,a.Z)({},o,{component:i}),u=p(c);return(0,m.jsx)(f,(0,a.Z)({as:i,className:(0,s.Z)(u.root,n),ownerState:c,ref:t},l))});var h=Z},59742:function(e,t,o){"use strict";o.d(t,{Z:function(){return C}});var a=o(63366),r=o(87462),n=o(67294),s=o(86010),i=o(94780),l=o(29630),d=o(78884),c=o(67074),u=o(1588),x=o(34867);function m(e){return(0,x.Z)("MuiCardHeader",e)}let v=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var p=o(85893);let f=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Z=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,t)},h=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,r.Z)({[`& .${v.title}`]:t.title,[`& .${v.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),j=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),y=n.forwardRef(function(e,t){let o=(0,d.Z)({props:e,name:"MuiCardHeader"}),{action:n,avatar:i,className:c,component:u="div",disableTypography:x=!1,subheader:m,subheaderTypographyProps:v,title:y,titleTypographyProps:C}=o,w=(0,a.Z)(o,f),D=(0,r.Z)({},o,{component:u,disableTypography:x}),N=Z(D),P=y;null==P||P.type===l.Z||x||(P=(0,p.jsx)(l.Z,(0,r.Z)({variant:i?"body2":"h5",className:N.title,component:"span",display:"block"},C,{children:P})));let M=m;return null==M||M.type===l.Z||x||(M=(0,p.jsx)(l.Z,(0,r.Z)({variant:i?"body2":"body1",className:N.subheader,color:"text.secondary",component:"span",display:"block"},v,{children:M}))),(0,p.jsxs)(h,(0,r.Z)({className:(0,s.Z)(N.root,c),as:u,ref:t,ownerState:D},w,{children:[i&&(0,p.jsx)(g,{className:N.avatar,ownerState:D,children:i}),(0,p.jsxs)(b,{className:N.content,ownerState:D,children:[P,M]}),n&&(0,p.jsx)(j,{className:N.action,ownerState:D,children:n})]}))});var C=y},49837:function(e,t,o){"use strict";o.d(t,{Z:function(){return g}});var a=o(87462),r=o(63366),n=o(67294),s=o(86010),i=o(94780),l=o(67074),d=o(78884),c=o(70918),u=o(1588),x=o(34867);function m(e){return(0,x.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var v=o(85893);let p=["className","raised"],f=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},m,t)},Z=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),h=n.forwardRef(function(e,t){let o=(0,d.Z)({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=o,l=(0,r.Z)(o,p),c=(0,a.Z)({},o,{raised:i}),u=f(c);return(0,v.jsx)(Z,(0,a.Z)({className:(0,s.Z)(u.root,n),elevation:i?8:void 0,ref:t,ownerState:c},l))});var g=h},62386:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cadastros/produto/novo",function(){return o(90260)}])},69291:function(e,t,o){"use strict";o.d(t,{Z:function(){return I}});var a=o(85893),r=o(11163),n=o.n(r),s=o(67294),i=o(60565),l=o(83830),d=o(60664),c=o(49837),u=o(91359),x=o(79072),m=o(59742),v=o(54225),p=o(87536),f=o(86501),Z=o(47842),h=o(45061),g=o(86887),j=o(23197),b=o(29308),y=o(84220),C=o(67569),w=o(40039),D=o(21609),N=o(88475),P=o(44373);let M=e=>{let{getValues:t,removeAnexo:o,setValue:r,control:n,register:i,errors:l,type:c}=e,[u,x]=(0,s.useState)([]),m=async()=>{let e=await d.h.post("/cadastros/produto/getFormularios");console.log("--> ",e.data),x(e.data)};return(0,s.useEffect)(()=>{m()},[]),t("anexos")&&t("anexos").map((e,d)=>{var x,m,v,p,f,Z;return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(b.Z,{md:6,title:"Nome",name:"anexos[".concat(d,"].nome"),required:!0,control:n,errors:null==l?void 0:null===(x=l.anexos)||void 0===x?void 0:null===(m=x[d])||void 0===m?void 0:m.nome}),(0,a.jsx)(y.Z,{xs:12,md:3,title:"Formul\xe1rio",name:"anexos[".concat(d,"].formulario"),value:e.formulario,required:!0,options:null!=u?u:[],register:i,setValue:r,control:n,errors:null==l?void 0:null===(v=l.anexos)||void 0===v?void 0:null===(p=v[d])||void 0===p?void 0:p.formulario,helpText:"Formul\xe1rio em que ser\xe1 solicitado esse anexo para este produto"}),(0,a.jsx)(C.Z,{xs:1,md:1,title:"Obrigat\xf3rio",name:"anexos[".concat(d,"].obrigatorio"),value:1==e.obrigatorio,typePage:c,register:i}),(0,a.jsx)(C.Z,{xs:1,md:1,title:"Ativo",name:"anexos[".concat(d,"].status"),value:1==e.obrigatorio,typePage:c,register:i}),(0,a.jsx)(N.Z,{xs:4,md:1,title:"Remover",index:d,removeItem:o,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"}),(0,a.jsx)(b.Z,{xs:11,md:12,multiline:!0,items:4,title:"Descri\xe7\xe3o (opcional)",name:"anexos[".concat(d,"].descricao"),control:n,errors:null==l?void 0:null===(f=l.anexos)||void 0===f?void 0:null===(Z=f[d])||void 0===Z?void 0:Z.descricao}),d<t("anexos").length-1&&(0,a.jsx)(P.Z,{})]},d)})};var S=o(41088);let R=e=>{var t,o,r;let{id:N,btnClose:P,handleConfirmNew:R,handleModalClose:I,newChange:_,manualUrl:E,outsideID:T}=e,[A,k]=(0,s.useState)(!1),[O,q]=(0,s.useState)(null),H=n(),V=N&&N>0?"edit":"new",F=H.pathname,{title:U}=(0,s.useContext)(i.f),{setId:X}=(0,s.useContext)(l.X),{loggedUnity:z,user:B}=(0,s.useContext)(w.V),[$,G]=(0,s.useState)([]),[J,K]=(0,s.useState)(!1),{startLoading:L,stopLoading:Q}=(0,S.Z)(),{trigger:W,handleSubmit:Y,setValue:ee,reset:et,control:eo,getValues:ea,formState:{errors:er},register:en}=(0,p.cI)({mode:"onChange"}),es=async e=>{L();let t={...e,unidadeID:z.unidadeID,usuarioID:B.usuarioID,removedItems:$};console.log(t);try{"new"===V?await d.h.post("cadastros/produto/new/insertData",t).then(e=>{R?R(e.data,"produtos"):(H.push("".concat((0,j.g_)(F))),X(e.data.id)),f.ZP.success(j.OD.successNew)}):"edit"===V&&(await d.h.post("".concat(F,"/updateData/").concat(N),t),f.ZP.success(j.OD.successUpdate))}catch(o){o.response&&409===o.response.status?f.ZP.error(j.OD.errorRepeated):console.log(o)}finally{Q()}},ei=async()=>{try{await d.h.delete("".concat(F,"/").concat(N,"/").concat(B.usuarioID,"/").concat(z.unidadeID)),X(null),k(!1),f.ZP.success(j.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(j.OD.pendingDelete),k(!1)):console.log(e)}},el=async()=>{try{let e="new"===V?"cadastros/produto/new/getData/".concat(z.unidadeID):"".concat(F,"/getData/").concat(N,"/").concat(z.unidadeID);await d.h.post(e).then(e=>{q(e.data),et(e.data)})}catch(t){console.log(t)}},ed=(e,t)=>{e.produtoAnexoID&&G([...$,e.produtoAnexoID]);let o=ea("anexos").filter((e,o)=>o!==t);ee("anexos",o),K(!J)},ec=()=>{let e=[...ea("anexos"),{nome:"",obrigatorio:1,status:1,descricao:"",observacao:""}];ee("anexos",e),K(!J)};return(0,s.useEffect)(()=>{el(),setTimeout(()=>{W()},300)},[N]),(0,s.useEffect)(()=>{_&&Y(es)()},[_]),(0,a.jsxs)(a.Fragment,{children:[!O&&(0,a.jsx)(Z.Z,{}),O&&(0,a.jsxs)("form",{onSubmit:Y(es),className:"space-y-3",children:[(0,a.jsx)(g.Z,{btnCancel:!0,btnNew:!R,btnSave:!0,btnClose:P,manualUrl:E,handleModalClose:I,handleSubmit:()=>Y(es),btnDelete:"edit"===V,onclickDelete:()=>k(!0),type:V,outsideID:T}),(0,a.jsx)(c.Z,{children:(0,a.jsx)(u.Z,{children:(0,a.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,a.jsx)(b.Z,{xs:11,md:5,title:"Nome",name:"fields.nome",required:!0,control:eo,errors:null==er?void 0:null===(t=er.fields)||void 0===t?void 0:t.nome}),(0,a.jsx)(y.Z,{xs:12,md:3,title:"Unidade de medida",name:"unidadeMedida.fields",value:null==O?void 0:O.unidadeMedida.fields,required:!0,options:O.unidadeMedida.options,register:en,setValue:ee,control:eo,errors:null==er?void 0:null===(o=er.unidadeMedida)||void 0===o?void 0:o.fields,helpText:"Selecione a unidade de medida"}),(0,a.jsx)(y.Z,{xs:12,md:3,title:"Classificação",name:"classificacao.fields",value:null==O?void 0:O.classificacao.fields,required:!0,options:O.classificacao.options,register:en,setValue:ee,control:eo,errors:null==er?void 0:null===(r=er.classificacao)||void 0===r?void 0:r.fields,helpText:"Selecione a classificação"}),(0,a.jsx)(C.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:O.fields.status,typePage:V,register:en})]})})}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(m.Z,{title:"Anexos"}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,a.jsx)(M,{getValues:ea,removeAnexo:ed,setValue:ee,control:eo,register:en,errors:er,type:V},J),(0,a.jsx)(x.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{variant:"outlined",color:"primary",sx:{mt:1},startIcon:(0,a.jsx)(D.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ec()},children:"Inserir Anexo"})})]})})]})]}),(0,a.jsx)(h.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+U.title,openModal:A,handleClose:()=>k(!1),handleSubmit:ei,btnCancel:!0,btnConfirm:!0})]})};var I=R},47842:function(e,t,o){"use strict";var a=o(85893),r=o(70754);let n=e=>{let{show:t,title:o,customTextProps:n,...s}=e;return t&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center rounded-lg z-50",children:(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2 ",children:[(0,a.jsx)(r.Z,{color:"primary",...s}),(0,a.jsx)("p",{className:"opacity-80 text-sm ".concat(n),children:null!=o?o:"Carregando..."})]})})};t.Z=n},90260:function(e,t,o){"use strict";o.r(t);var a=o(85893),r=o(60565),n=o(67294),s=o(69291);let i=()=>{let{setTitle:e}=(0,n.useContext)(r.f);return(0,n.useEffect)(()=>{e({title:"Produto",subtitle:{id:null,count:null,new:!0}})},[]),(0,a.jsx)(s.Z,{})};i.acl={action:"read",subject:"acl-page"},t.default=i}},function(e){e.O(0,[6887,5061,9774,2888,179],function(){return e(e.s=62386)}),_N_E=e.O()}]);