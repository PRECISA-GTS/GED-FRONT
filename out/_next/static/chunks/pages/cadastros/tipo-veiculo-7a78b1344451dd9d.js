(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3207],{3732:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cadastros/tipo-veiculo",function(){return s(15554)}])},62094:function(e,t,s){"use strict";var n=s(85893),a=s(11163),o=s.n(a),c=s(67294),l=s(60664),i=s(49837),u=s(91359),r=s(79072),d=s(87536),h=s(86501),x=s(45061),f=s(46749),m=s(86887),p=s(47842),w=s(60565),Z=s(83830),D=s(29308),j=s(67569),b=s(41088),g=s(40039);let v=e=>{var t;let{id:s,btnClose:a,handleModalClose:v,setNewChange:_,newChange:C,outsideID:N,handleConfirmNew:y,manualUrl:P}=e,[I,S]=(0,c.useState)(!1),[E,O]=(0,c.useState)(null),{setId:k}=(0,c.useContext)(Z.X),T=o(),z=s&&s>0?"edit":"new",X=T.pathname,{title:M}=(0,c.useContext)(w.f),{startLoading:q,stopLoading:F}=(0,b.Z)(),{user:L,loggedUnity:R}=(0,c.useContext)(g.V),{trigger:U,handleSubmit:V,reset:A,control:B,formState:{errors:H},register:G}=(0,d.cI)(),J=async e=>{let t={...e,usuarioID:L.usuarioID,unidadeID:R.unidadeID};q();try{"new"===z?await l.h.post("cadastros/tipo-veiculo/new/insertData",t).then(e=>{N?(k(N),y(e.data.value)):(T.push("".concat((0,f.g_)(X))),k(e.data.id)),h.ZP.success(f.OD.successNew)}):"edit"===z&&(await l.h.post("".concat(X,"/updateData/").concat(s),t),h.ZP.success(f.OD.successUpdate))}catch(n){n.response&&409===n.response.status?h.ZP.error(f.OD.errorRepeated):console.log(n)}finally{F()}},K=async()=>{try{await l.h.delete("".concat(X,"/").concat(s,"/").concat(L.usuarioID,"/").concat(R.unidadeID)),k(null),S(!1),h.ZP.success(f.OD.successDelete)}catch(e){e.response&&409===e.response.status?(h.ZP.error(f.OD.pendingDelete),S(!1)):console.log(e)}},Q=async()=>{"new"==z&&O({fields:{nome:"",status:1}});try{let e="new"===z?"".concat((0,f.g_)(X),"/new/getData"):"".concat(X,"/getData/").concat(s);await l.h.post(e,{id:s}).then(e=>{O(e.data),A(e.data)})}catch(t){console.log(t)}};return(0,c.useEffect)(()=>{Q(),"new"===z&&setTimeout(()=>{U()},300)},[s]),(0,n.jsxs)(n.Fragment,{children:[!E&&(0,n.jsx)(p.Z,{}),E&&(0,n.jsxs)("form",{onSubmit:V(J),children:[(0,n.jsx)(m.Z,{btnClose:!0,handleModalClose:v,btnCancel:!0,btnSave:!0,btnNew:!N,handleSubmit:()=>V(J),btnDelete:"edit"===z,onclickDelete:()=>S(!0),type:z,manualUrl:P,outsideID:N}),(0,n.jsx)(i.Z,{children:(0,n.jsx)(u.Z,{children:(0,n.jsxs)(r.ZP,{container:!0,spacing:5,children:[(0,n.jsx)(D.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:B,errors:null==H?void 0:null===(t=H.fields)||void 0===t?void 0:t.nome}),(0,n.jsx)(j.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==E?void 0:E.fields.status,typePage:z,register:G})]})})})]}),(0,n.jsx)(x.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+M.title,openModal:I,handleClose:()=>S(!1),handleSubmit:K,btnCancel:!0,btnConfirm:!0})]})};t.Z=v},93250:function(e,t,s){"use strict";var n=s(85893),a=s(49837),o=s(91359),c=s(69175);let l=e=>{let{result:t,columns:s,btnNew:l=!0,btnPrint:i=!0,btnBack:u,openModal:r,modalLog:d}=e;return(0,n.jsx)(a.Z,{children:(0,n.jsx)(o.Z,{sx:{pt:"0"},children:(0,n.jsx)(c.Z,{rows:t,columns:s,modalLog:d,buttonsHeader:{btnNew:l,btnPrint:i,btnBack:u,openModal:r}})})})};t.Z=l},15554:function(e,t,s){"use strict";s.r(t);var n=s(85893),a=s(67294),o=s(60664),c=s(93250),l=s(62094),i=s(60565),u=s(83830),r=s(47842),d=s(11163),h=s(46749);let x=()=>{let[e,t]=(0,a.useState)(null),s=(0,d.useRouter)(),x=s.pathname,{setTitle:f}=(0,a.useContext)(i.f),{id:m}=(0,a.useContext)(u.X),p=async()=>{await o.h.get(x).then(e=>{t(e.data),f({title:"Tipo de Ve\xedculo",subtitle:{id:m,count:e.data.length,new:!1}})})};(0,a.useEffect)(()=>{p()},[m]);let w=(0,h.OL)(x,[{title:"ID",field:"id",size:.1},{title:"Nome",field:"nome",size:.8},{headerName:"Status",field:{name:"status",cor:"cor"},size:.1}]);return(0,n.jsx)(n.Fragment,{children:e?m&&m>0?(0,n.jsx)(l.Z,{id:m}):(0,n.jsx)(c.Z,{result:e,columns:w}):(0,n.jsx)(r.Z,{})})};t.default=x}},function(e){e.O(0,[3778,5061,9525,9774,2888,179],function(){return e(e.s=3732)}),_N_E=e.O()}]);