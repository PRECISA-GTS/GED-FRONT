(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3737],{91359:function(e,t,a){"use strict";a.d(t,{Z:function(){return C}});var o=a(87462),n=a(63366),s=a(67294),r=a(86010),c=a(94780),u=a(67074),i=a(78884),l=a(1588),d=a(34867);function f(e){return(0,d.Z)("MuiCardContent",e)}(0,l.Z)("MuiCardContent",["root"]);var Z=a(85893);let p=["className","component"],m=e=>{let{classes:t}=e;return(0,c.Z)({root:["root"]},f,t)},h=(0,u.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),v=s.forwardRef(function(e,t){let a=(0,i.Z)({props:e,name:"MuiCardContent"}),{className:s,component:c="div"}=a,u=(0,n.Z)(a,p),l=(0,o.Z)({},a,{component:c}),d=m(l);return(0,Z.jsx)(h,(0,o.Z)({as:c,className:(0,r.Z)(d.root,s),ownerState:l,ref:t},u))});var C=v},49837:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var o=a(87462),n=a(63366),s=a(67294),r=a(86010),c=a(94780),u=a(67074),i=a(78884),l=a(70918),d=a(1588),f=a(34867);function Z(e){return(0,f.Z)("MuiCard",e)}(0,d.Z)("MuiCard",["root"]);var p=a(85893);let m=["className","raised"],h=e=>{let{classes:t}=e;return(0,c.Z)({root:["root"]},Z,t)},v=(0,u.ZP)(l.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),C=s.forwardRef(function(e,t){let a=(0,i.Z)({props:e,name:"MuiCard"}),{className:s,raised:c=!1}=a,u=(0,n.Z)(a,m),l=(0,o.Z)({},a,{raised:c}),d=h(l);return(0,p.jsx)(v,(0,o.Z)({className:(0,r.Z)(d.root,s),elevation:c?8:void 0,ref:t,ownerState:l},u))});var w=C},70602:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cadastros/classificacao-produto/novo",function(){return a(62180)}])},88771:function(e,t,a){"use strict";var o=a(85893),n=a(11163),s=a.n(n),r=a(67294),c=a(60565),u=a(83830),i=a(60664),l=a(49837),d=a(91359),f=a(79072),Z=a(87536),p=a(86501),m=a(47842),h=a(45061),v=a(86887),C=a(23197),w=a(29308),x=a(67569),D=a(40039),g=a(41088);let j=e=>{var t;let{id:a,btnClose:n,handleConfirmNew:j,handleModalClose:b,newChange:N,manualUrl:_,outsideID:P}=e,[y,E]=(0,r.useState)(!1),[M,S]=(0,r.useState)(null),I=s(),O=a&&a>0?"edit":"new",R=I.pathname,{title:k}=(0,r.useContext)(c.f),{setId:T}=(0,r.useContext)(u.X),{loggedUnity:X,user:q}=(0,r.useContext)(D.V),[U,z]=(0,r.useState)([]),{startLoading:A,stopLoading:B}=(0,g.Z)(),{trigger:F,handleSubmit:V,reset:G,control:H,formState:{errors:J},register:K}=(0,Z.cI)(),L=async e=>{A();let t={...e,unidadeID:X.unidadeID,usuarioID:q.usuarioID,removedItems:U};console.log(t);try{"new"===O?await i.h.post("cadastros/classificacao-produto/new/insertData",t).then(e=>{j?j(e.data,"classificacao-produto"):(I.push("".concat((0,C.g_)(R))),T(e.data.id)),p.ZP.success(C.OD.successNew)}):"edit"===O&&(await i.h.post("".concat(R,"/updateData/").concat(a),t),p.ZP.success(C.OD.successUpdate))}catch(o){o.response&&409===o.response.status?p.ZP.error(C.OD.errorRepeated):console.log(o)}finally{B()}},Q=async()=>{try{await i.h.delete("".concat(R,"/").concat(a,"/").concat(q.usuarioID,"/").concat(X.unidadeID)),T(null),E(!1),p.ZP.success(C.OD.successDelete)}catch(e){e.response&&409===e.response.status?(p.ZP.error(C.OD.pendingDelete),E(!1)):console.log(e)}},W=async()=>{try{let e="new"===O?"cadastros/produto/new/getData":"".concat(R,"/getData/").concat(a);await i.h.post(e).then(e=>{console.log("\uD83D\uDE80 ~ getData da classifica\xe7\xe3o:",e.data),S(e.data),G(e.data)})}catch(t){console.log(t)}};return(0,r.useEffect)(()=>{W(),"new"===O&&setTimeout(()=>{F()},300)},[a]),(0,r.useEffect)(()=>{N&&V(L)()},[N]),(0,o.jsxs)(o.Fragment,{children:[!M&&(0,o.jsx)(m.Z,{}),M&&(0,o.jsxs)("form",{onSubmit:V(L),className:"space-y-3",children:[(0,o.jsx)(v.Z,{btnCancel:!0,btnNew:!j,btnSave:!0,btnClose:n,manualUrl:_,handleModalClose:b,handleSubmit:()=>V(L),btnDelete:"edit"===O,onclickDelete:()=>E(!0),type:O,outsideID:P}),(0,o.jsx)(l.Z,{children:(0,o.jsx)(d.Z,{children:(0,o.jsxs)(f.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(w.Z,{md:11,title:"Nome",name:"fields.nome",required:!0,control:H,errors:null==J?void 0:null===(t=J.fields)||void 0===t?void 0:t.nome}),(0,o.jsx)(x.Z,{md:1,title:"Ativo",name:"fields.status",value:M.fields.status,typePage:O,register:K})]})})})]}),(0,o.jsx)(h.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+k.title,openModal:y,handleClose:()=>E(!1),handleSubmit:Q,btnCancel:!0,btnConfirm:!0})]})};t.Z=j},62180:function(e,t,a){"use strict";a.r(t);var o=a(85893),n=a(60565),s=a(67294),r=a(88771);let c=()=>{let{setTitle:e}=(0,s.useContext)(n.f);return(0,s.useEffect)(()=>{e({title:"Classifica\xe7\xe3o de Produtos",subtitle:{id:null,count:null,new:!0}})},[]),(0,o.jsx)(r.Z,{})};c.acl={action:"read",subject:"acl-page"},t.default=c}},function(e){e.O(0,[4186,1445,1111,5999,2187,7105,6887,5061,9774,2888,179],function(){return e(e.s=70602)}),_N_E=e.O()}]);