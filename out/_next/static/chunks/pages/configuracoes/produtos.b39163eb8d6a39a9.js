(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{49857:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/produtos",function(){return a(82557)}])},82557:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(85893),n=a(67294),o=a(60664),i=a(49837),r=a(91359),d=a(18104),c=a(75680),u=a(78082),l=a(30944);let h=e=>{let{rows:t,columns:a,buttonsHeader:n,selectedRows:o,setSelectedRows:i,hasChange:r,setHasChange:h}=e,{handleSearch:m,pageSize:x,setPageSize:f,searchText:p,filteredData:g,setData:w,data:b}=(0,l.L0)();return w(t),(0,s.jsx)(d._,{localeText:c.F.components.MuiDataGrid.defaultProps.localeText,checkboxSelection:!0,autoHeight:!0,columns:a,pageSize:x,rowsPerPageOptions:[10,20,30,40,50,100],components:{Toolbar:u.Z},rows:p?g:b,onCellClick(e,t){i(t=>-1===t.indexOf(e.id)?[...t,e.id]:t.filter(t=>t!==e.id)),h(!0)},onPageSizeChange:e=>f(e),selectionModel:o,onSelectionModelChange(e){i(e),h(!0)},sx:{"& .MuiDataGrid-cell":{cursor:"pointer",overflow:"scroll"}},componentsProps:{toolbar:{value:p,clearSearch:()=>m(""),onChange:e=>m(e.target.value),buttonsHeader:n,hasChange:r}}})},m=e=>{let{result:t,columns:a,btnNew:n=!0,btnPrint:o=!0,btnSave:d=!0,handleSave:c,selectedRows:u,setSelectedRows:l,hasChange:m,setHasChange:x,openModal:f}=e;return(0,s.jsx)(i.Z,{children:(0,s.jsx)(r.Z,{sx:{pt:"0"},children:(0,s.jsx)(h,{rows:t,columns:a,buttonsHeader:{btnNew:n,btnPrint:o,btnSave:d,handleSave:c,openModal:f},selectedRows:u,setSelectedRows:l,hasChange:m,setHasChange:x})})})};var x=a(46124),f=a(60565),p=a(83830),g=a(40039),w=a(47842),b=a(11163),C=a(71798),S=a(19604),v=a(86501);let N=()=>{let[e,t]=(0,n.useState)(null),a=(0,b.useRouter)(),i=a.pathname,{setTitle:r}=(0,n.useContext)(f.f),{user:d,loggedUnity:c}=(0,n.useContext)(g.V),{id:u}=(0,n.useContext)(p.X),l=async()=>{await o.h.post(i,{unidadeID:c.unidadeID}).then(e=>{t(e.data),r({icon:"ph:plant",title:"Produtos",subtitle:{id:u,count:e.data.length,new:!1}})})},h=async()=>{await o.h.post("".concat(i,"/updateData"),{unidadeID:c.unidadeID,usuarioID:d.usuarioID,products:j}).then(e=>{P(!1),v.Am.success("Dados atualizados com sucesso!"),l()})};(0,n.useEffect)(()=>{l()},[u]);let N=()=>e?e.filter(e=>1===e.checked).map(e=>e.id):[],[j,D]=(0,n.useState)(N()),[_,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{e&&D(N())},[e]);let z=(0,C.OL)(i,[{headerName:"ID",field:"id",size:.1},{headerName:"ID MP",field:"idMinisterio",size:.1},{headerName:"Nome",field:"nome",size:.6},{headerName:"Descri\xe7\xe3o",field:"descricao",size:.2},{headerName:"Categoria",field:"categoria",size:.2},{headerName:"Status",field:{name:"status",cor:"cor"},size:.1}]);return(0,s.jsx)(s.Fragment,{children:e?u&&u>0?(0,s.jsx)(x.Z,{id:u}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z,{severity:"info",sx:{mb:2},children:"Somente os produtos marcados ficar\xe3o dispon\xedveis para uso nesta unidade."}),(0,s.jsx)(S.Z,{severity:"warning",sx:{mb:2},children:"Produtos j\xe1 vinculados em outros registros o sistema n\xe3o permitir\xe1 desmarcar."}),(0,s.jsx)(m,{result:e,columns:z,btnNew:!1,btnPrint:!1,btnSave:!0,handleSave:h,selectedRows:j,setSelectedRows:D,hasChange:_,setHasChange:P})]}):(0,s.jsx)(w.Z,{})})};N.acl={action:"read",subject:"acl-page"};var j=N}},function(e){e.O(0,[4738,5206,5698,8428,6124,9774,2888,179],function(){return e(e.s=49857)}),_N_E=e.O()}]);