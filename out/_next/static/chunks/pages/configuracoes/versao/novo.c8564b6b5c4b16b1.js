(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3123],{91359:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var n=s(87462),o=s(63366),r=s(67294),a=s(86010),i=s(94780),l=s(67074),c=s(78884),d=s(1588),u=s(34867);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var x=s(85893);let f=["className","component"],v=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},m,t)},p=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Z=r.forwardRef(function(e,t){let s=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=s,l=(0,o.Z)(s,f),d=(0,n.Z)({},s,{component:i}),u=v(d);return(0,x.jsx)(p,(0,n.Z)({as:i,className:(0,a.Z)(u.root,r),ownerState:d,ref:t},l))});var h=Z},49837:function(e,t,s){"use strict";s.d(t,{Z:function(){return j}});var n=s(87462),o=s(63366),r=s(67294),a=s(86010),i=s(94780),l=s(67074),c=s(78884),d=s(70918),u=s(1588),m=s(34867);function x(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var f=s(85893);let v=["className","raised"],p=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},x,t)},Z=(0,l.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),h=r.forwardRef(function(e,t){let s=(0,c.Z)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=s,l=(0,o.Z)(s,v),d=(0,n.Z)({},s,{raised:i}),u=p(d);return(0,f.jsx)(Z,(0,n.Z)({className:(0,a.Z)(u.root,r),elevation:i?8:void 0,ref:t,ownerState:d},l))});var j=h},47574:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/versao/novo",function(){return s(87498)}])},25576:function(e,t,s){"use strict";var n=s(85893),o=s(11163),r=s.n(o),a=s(67294),i=s(60664),l=s(49837),c=s(91359),d=s(79072),u=s(80562),m=s(54225),x=s(87536),f=s(86501),v=s(45061),p=s(92477),Z=s(71798),h=s(60565),j=s(83830),D=s(40039),C=s(29308),w=s(50287),g=s(41088),N=s(21609);let b=e=>{var t,s;let{id:o}=e,[b,I]=(0,a.useState)(!1),[P,_]=(0,a.useState)(null),{setId:k}=(0,a.useContext)(j.X),y=r(),S=o&&o>0?"edit":"new",E=y.pathname,{title:M}=(0,a.useContext)(h.f),{loggedUnity:O,user:R}=(0,a.useContext)(D.V),{startLoading:q,stopLoading:T}=(0,g.Z)(),{trigger:z,handleSubmit:X,reset:F,control:V,formState:{errors:A},register:B}=(0,x.cI)({mode:"onChange"}),L=async e=>{let t={...e,usuarioID:R.usuarioID,unidadeID:O.unidadeID};try{"new"===S?await i.h.post("configuracoes/versao/new/insertData",t).then(e=>{y.push("".concat((0,Z.g_)(E))),k(e.data.id),f.ZP.success(Z.OD.successNew)}):"edit"===S&&(await i.h.post("".concat(E,"/updateData/").concat(o),t),f.ZP.success(Z.OD.successUpdate))}catch(s){s.response&&409===s.response.status?f.ZP.error(Z.OD.errorRepeated):console.log(s)}finally{T()}},U=async()=>{try{await i.h.delete("".concat(E,"/").concat(o,"/").concat(R.usuarioID,"/").concat(O.unidadeID)),k(null),I(!1),f.ZP.success(Z.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(Z.OD.pendingDelete),I(!1)):console.log(e)}},G=async()=>{try{if("edit"===S)await i.h.post("".concat(E,"/getData/").concat(o),{id:o}).then(e=>{_(e.data),F(e.data)});else{let e=new Date().toISOString().substring(0,10);_({fields:{nome:"",data:e,items:[]}}),F({...P,fields:{...P.fields,data:e}})}}catch(t){console.log(t)}};(0,a.useEffect)(()=>{G(),J({versaoItemID:null,descricao:"",link:""}),setTimeout(()=>{z()},300)},[o]);let{fields:H,append:J,remove:K}=(0,x.Dq)({control:V,name:"fields.items"}),Q=e=>{if(1===H.length){f.ZP.error("A vers\xe3o deve conter pelo menos um item!");return}K(e)};return(0,n.jsxs)(n.Fragment,{children:[P&&(0,n.jsxs)("form",{onSubmit:X(L),children:[(0,n.jsx)(p.Z,{btnCancel:!0,btnNew:!0,btnSave:!0,handleSubmit:()=>X(L),btnDelete:"edit"===S,onclickDelete:()=>I(!0),type:S}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(c.Z,{children:(0,n.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,n.jsx)(C.Z,{xs:12,md:8,title:"Nome",name:"fields.nome",required:!0,control:V,errors:null==A?void 0:null===(t=A.fields)||void 0===t?void 0:t.nome}),(0,n.jsx)(w.Z,{xs:12,md:4,title:"Data",name:"fields.data",value:null==P?void 0:P.fields.data,register:B,control:V,errors:null==A?void 0:null===(s=A.fields)||void 0===s?void 0:s.data}),(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsxs)("div",{className:"flex items-center gap-2 pb-1 pt-2",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(N.Z,{icon:"ph:code-bold",className:"text-3xl"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,n.jsx)("p",{className:"text-xl",children:"Itens da vers\xe3o"}),(0,n.jsx)("p",{className:"opacity-50",children:"Descreva abaixo as implementa\xe7\xf5es, corre\xe7\xf5es e melhorias realizadas, opcionalmente \xe9 poss\xedvel inserir links para uma melhor demonstra\xe7\xe3o. Estas descri\xe7\xf5es ficar\xe3o dispon\xedveis para todos os clientes."})]})]})}),H.map((e,t)=>{var s,o,r;return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"fields.items[".concat(t,"].versaoItemID"),value:e.versaoItemID}),(0,n.jsx)(C.Z,{xs:12,md:8,title:"Descri\xe7\xe3o",name:"fields.items[".concat(t,"].descricao"),required:!0,control:V,errors:null==A?void 0:null===(s=A.fields)||void 0===s?void 0:null===(o=s.items)||void 0===o?void 0:null===(r=o[t])||void 0===r?void 0:r.descricao}),(0,n.jsx)(C.Z,{xs:12,md:3,title:"Link (opcional)",name:"fields.items[".concat(t,"].link"),control:V}),(0,n.jsx)(d.ZP,{item:!0,xs:12,md:1,className:"flex items-center",children:(0,n.jsx)(u.Z,{color:"error",size:"small",onClick:()=>Q(t),children:(0,n.jsx)(N.Z,{icon:"tabler:trash-filled"})})})]},e.id)}),(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{variant:"outlined",color:"primary",onClick:()=>J({descricao:"",link:""}),startIcon:(0,n.jsx)(N.Z,{icon:"material-symbols:add-circle-outline-rounded"}),children:"Inserir Item"})})]})})})]}),(0,n.jsx)(v.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+M.title,openModal:b,handleClose:()=>I(!1),handleSubmit:U,btnCancel:!0,btnConfirm:!0})]})};t.Z=b},87498:function(e,t,s){"use strict";s.r(t);var n=s(85893),o=s(60565),r=s(67294),a=s(25576);let i=()=>{let{setTitle:e}=(0,r.useContext)(o.f);return(0,r.useEffect)(()=>{e({title:"Vers\xe3o",subtitle:{id:null,count:null,new:!0}})},[]),(0,n.jsx)(a.Z,{})};t.default=i}},function(e){e.O(0,[2477,8934,9774,2888,179],function(){return e(e.s=47574)}),_N_E=e.O()}]);