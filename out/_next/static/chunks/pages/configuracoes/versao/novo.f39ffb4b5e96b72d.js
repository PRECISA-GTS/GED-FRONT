(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3123],{91359:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var n=s(87462),a=s(63366),o=s(67294),r=s(86010),i=s(94780),l=s(67074),c=s(78884),d=s(1588),u=s(34867);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var x=s(85893);let f=["className","component"],p=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},m,t)},Z=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=o.forwardRef(function(e,t){let s=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:o,component:i="div"}=s,l=(0,a.Z)(s,f),d=(0,n.Z)({},s,{component:i}),u=p(d);return(0,x.jsx)(Z,(0,n.Z)({as:i,className:(0,r.Z)(u.root,o),ownerState:d,ref:t},l))});var v=h},49837:function(e,t,s){"use strict";s.d(t,{Z:function(){return j}});var n=s(87462),a=s(63366),o=s(67294),r=s(86010),i=s(94780),l=s(67074),c=s(78884),d=s(70918),u=s(1588),m=s(34867);function x(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var f=s(85893);let p=["className","raised"],Z=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},x,t)},h=(0,l.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),v=o.forwardRef(function(e,t){let s=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:i=!1}=s,l=(0,a.Z)(s,p),d=(0,n.Z)({},s,{raised:i}),u=Z(d);return(0,f.jsx)(h,(0,n.Z)({className:(0,r.Z)(u.root,o),elevation:i?8:void 0,ref:t,ownerState:d},l))});var j=v},47574:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/versao/novo",function(){return s(87498)}])},25576:function(e,t,s){"use strict";var n=s(85893),a=s(11163),o=s.n(a),r=s(67294),i=s(60664),l=s(49837),c=s(91359),d=s(79072),u=s(80562),m=s(54225),x=s(87536),f=s(86501),p=s(45061),Z=s(92477),h=s(71798),v=s(60565),j=s(83830),D=s(40039),C=s(29308),w=s(50287),g=s(41088),b=s(21609);let N=e=>{let{id:t}=e,[s,a]=(0,r.useState)(!1),[N,I]=(0,r.useState)(null),{setId:P}=(0,r.useContext)(j.X),_=o(),k=t&&t>0?"edit":"new",y=_.pathname,{title:S}=(0,r.useContext)(v.f),{loggedUnity:E,user:M}=(0,r.useContext)(D.V),{startLoading:O,stopLoading:R}=(0,g.Z)(),q=(0,x.cI)({mode:"onChange"}),T=async e=>{let s={...e,usuarioID:M.usuarioID,unidadeID:E.unidadeID};try{"new"===k?await i.h.post("configuracoes/versao/new/insertData",s).then(e=>{_.push("".concat((0,h.g_)(y))),P(e.data.id),f.ZP.success(h.OD.successNew)}):"edit"===k&&(await i.h.post("".concat(y,"/updateData/").concat(t),s),f.ZP.success(h.OD.successUpdate))}catch(n){n.response&&409===n.response.status?f.ZP.error(h.OD.errorRepeated):console.log(n)}finally{R()}},z=async()=>{try{await i.h.delete("".concat(y,"/").concat(t,"/").concat(M.usuarioID,"/").concat(E.unidadeID)),P(null),a(!1),f.ZP.success(h.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(h.OD.pendingDelete),a(!1)):console.log(e)}},X=async()=>{try{if("edit"===k)await i.h.post("".concat(y,"/getData/").concat(t),{id:t}).then(e=>{I(e.data),q.reset(e.data)});else{let e=new Date().toISOString().substring(0,10);I({fields:{nome:"",data:e,items:[]}}),q.reset({...N,fields:{...N.fields,data:e}})}}catch(s){console.log(s)}};(0,r.useEffect)(()=>{X(),V({versaoItemID:null,descricao:"",link:""}),setTimeout(()=>{q.trigger()},300)},[t]);let{fields:F,append:V,remove:A}=(0,x.Dq)({control:q.control,name:"fields.items"}),B=e=>{if(1===F.length){f.ZP.error("A vers\xe3o deve conter pelo menos um item!");return}A(e)};return(0,n.jsxs)(n.Fragment,{children:[N&&(0,n.jsxs)("form",{onSubmit:q.handleSubmit(T),children:[(0,n.jsx)(Z.Z,{btnCancel:!0,btnNew:!0,btnSave:!0,handleSubmit:()=>q.handleSubmit(T),btnDelete:"edit"===k,onclickDelete:()=>a(!0),type:k}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(c.Z,{children:(0,n.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,n.jsx)(C.Z,{xs:12,md:8,title:"Nome",name:"fields.nome",required:!0,form:q}),(0,n.jsx)(w.Z,{xs:12,md:4,title:"Data",name:"fields.data",value:null==N?void 0:N.fields.data,form:q}),(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsxs)("div",{className:"flex items-center gap-2 pb-1 pt-2",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(b.Z,{icon:"ph:code-bold",className:"text-3xl"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,n.jsx)("p",{className:"text-xl",children:"Itens da vers\xe3o"}),(0,n.jsx)("p",{className:"opacity-50",children:"Descreva abaixo as implementa\xe7\xf5es, corre\xe7\xf5es e melhorias realizadas, opcionalmente \xe9 poss\xedvel inserir links para uma melhor demonstra\xe7\xe3o. Estas descri\xe7\xf5es ficar\xe3o dispon\xedveis para todos os clientes."})]})]})}),F.map((e,t)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"fields.items[".concat(t,"].versaoItemID"),value:e.versaoItemID}),(0,n.jsx)(C.Z,{xs:12,md:8,title:"Descri\xe7\xe3o",name:"fields.items[".concat(t,"].descricao"),required:!0,form:q}),(0,n.jsx)(C.Z,{xs:12,md:3,title:"Link (opcional)",name:"fields.items[".concat(t,"].link"),form:q}),(0,n.jsx)(d.ZP,{item:!0,xs:12,md:1,className:"flex items-center",children:(0,n.jsx)(u.Z,{color:"error",size:"small",onClick:()=>B(t),children:(0,n.jsx)(b.Z,{icon:"tabler:trash-filled"})})})]},e.id)),(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{variant:"outlined",color:"primary",onClick:()=>V({descricao:"",link:""}),startIcon:(0,n.jsx)(b.Z,{icon:"material-symbols:add-circle-outline-rounded"}),children:"Inserir Item"})})]})})})]}),(0,n.jsx)(p.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+S.title,openModal:s,handleClose:()=>a(!1),handleSubmit:z,btnCancel:!0,btnConfirm:!0})]})};t.Z=N},87498:function(e,t,s){"use strict";s.r(t);var n=s(85893),a=s(60565),o=s(67294),r=s(25576);let i=()=>{let{setTitle:e}=(0,o.useContext)(a.f);return(0,o.useEffect)(()=>{e({title:"Vers\xe3o",subtitle:{id:null,count:null,new:!0}})},[]),(0,n.jsx)(r.Z,{})};t.default=i}},function(e){e.O(0,[2477,8934,9774,2888,179],function(){return e(e.s=47574)}),_N_E=e.O()}]);