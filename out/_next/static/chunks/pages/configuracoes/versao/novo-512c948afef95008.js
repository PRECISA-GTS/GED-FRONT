(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3123],{91359:function(e,t,a){"use strict";a.d(t,{Z:function(){return Z}});var r=a(87462),n=a(63366),o=a(67294),s=a(86010),l=a(94780),i=a(67074),d=a(78884),c=a(1588),u=a(34867);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var x=a(85893);let f=["className","component"],p=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"]},m,t)},v=(0,i.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=o.forwardRef(function(e,t){let a=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:o,component:l="div"}=a,i=(0,n.Z)(a,f),c=(0,r.Z)({},a,{component:l}),u=p(c);return(0,x.jsx)(v,(0,r.Z)({as:l,className:(0,s.Z)(u.root,o),ownerState:c,ref:t},i))});var Z=h},49837:function(e,t,a){"use strict";a.d(t,{Z:function(){return D}});var r=a(87462),n=a(63366),o=a(67294),s=a(86010),l=a(94780),i=a(67074),d=a(78884),c=a(70918),u=a(1588),m=a(34867);function x(e){return(0,m.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var f=a(85893);let p=["className","raised"],v=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"]},x,t)},h=(0,i.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Z=o.forwardRef(function(e,t){let a=(0,d.Z)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=a,i=(0,n.Z)(a,p),c=(0,r.Z)({},a,{raised:l}),u=v(c);return(0,f.jsx)(h,(0,r.Z)({className:(0,s.Z)(u.root,o),elevation:l?8:void 0,ref:t,ownerState:c},i))});var D=Z},47574:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/versao/novo",function(){return a(87498)}])},25576:function(e,t,a){"use strict";var r=a(85893),n=a(11163),o=a.n(n),s=a(67294),l=a(60664),i=a(49837),d=a(91359),c=a(79072),u=a(80562),m=a(54225),x=a(87536),f=a(86501),p=a(45061),v=a(86887),h=a(64165),Z=a(60565),D=a(83830),g=a(40039),j=a(29308),C=a(50287),w=a(41088),b=a(21609);let I=e=>{var t,a;let{id:n}=e,[I,S]=(0,s.useState)(!1),[N,P]=(0,s.useState)(null),{setId:M}=(0,s.useContext)(D.X),y=o(),T=n&&n>0?"edit":"new",k=y.pathname,{title:_}=(0,s.useContext)(Z.f),{loggedUnity:O,user:E}=(0,s.useContext)(g.V),{startLoading:F,stopLoading:R}=(0,w.Z)(),{trigger:q,handleSubmit:A,reset:z,control:L,formState:{errors:U},register:V}=(0,x.cI)({mode:"onChange"}),X=async e=>{let t={...e,usuarioID:E.usuarioID,unidadeID:O.unidadeID};try{"new"===T?await l.h.post("configuracoes/versao/new/insertData",t).then(e=>{y.push("".concat((0,h.g_)(k))),M(e.data.id),f.ZP.success(h.OD.successNew)}):"edit"===T&&(await l.h.post("".concat(k,"/updateData/").concat(n),t),f.ZP.success(h.OD.successUpdate))}catch(a){a.response&&409===a.response.status?f.ZP.error(h.OD.errorRepeated):console.log(a)}finally{R()}},Y=async()=>{try{await l.h.delete("".concat(k,"/").concat(n,"/").concat(E.usuarioID,"/").concat(O.unidadeID)),M(null),S(!1),f.ZP.success(h.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(h.OD.pendingDelete),S(!1)):console.log(e)}},W=async()=>{try{if("edit"===T)await l.h.post("".concat(k,"/getData/").concat(n),{id:n}).then(e=>{P(e.data),z(e.data)});else{let e=new Date().toISOString().substring(0,10);P({fields:{nome:"",data:e,items:[]}}),z({...N,fields:{...N.fields,data:e}})}}catch(t){console.log(t)}};(0,s.useEffect)(()=>{W(),H({versaoItemID:null,descricao:"",link:""}),setTimeout(()=>{q()},300)},[n]);let{fields:B,append:H,remove:Q}=(0,x.Dq)({control:L,name:"fields.items"}),G=e=>{if(1===B.length){f.ZP.error("A vers\xe3o deve conter pelo menos um item!");return}Q(e)};return(0,r.jsxs)(r.Fragment,{children:[N&&(0,r.jsxs)("form",{onSubmit:A(X),children:[(0,r.jsx)(v.Z,{btnCancel:!0,btnNew:!0,btnSave:!0,handleSubmit:()=>A(X),btnDelete:"edit"===T,onclickDelete:()=>S(!0),type:T}),(0,r.jsx)(i.Z,{children:(0,r.jsx)(d.Z,{children:(0,r.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,r.jsx)(j.Z,{xs:12,md:8,title:"Nome",name:"fields.nome",required:!0,control:L,errors:null==U?void 0:null===(t=U.fields)||void 0===t?void 0:t.nome}),(0,r.jsx)(C.Z,{xs:12,md:4,title:"Data",name:"fields.data",value:null==N?void 0:N.fields.data,register:V,control:L,errors:null==U?void 0:null===(a=U.fields)||void 0===a?void 0:a.data}),(0,r.jsx)(c.ZP,{item:!0,xs:12,children:(0,r.jsxs)("div",{className:"flex items-center gap-2 pb-1 pt-2",children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(b.Z,{icon:"ph:code-bold",className:"text-3xl"})}),(0,r.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,r.jsx)("p",{className:"text-xl",children:"Itens da vers\xe3o"}),(0,r.jsx)("p",{className:"opacity-50",children:"Descreva abaixo as implementa\xe7\xf5es, corre\xe7\xf5es e melhorias realizadas, opcionalmente \xe9 poss\xedvel inserir links para uma melhor demonstra\xe7\xe3o. Estas descri\xe7\xf5es ficar\xe3o dispon\xedveis para todos os clientes."})]})]})}),B.map((e,t)=>{var a,n,o;return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("input",{type:"hidden",name:"fields.items[".concat(t,"].versaoItemID"),value:e.versaoItemID}),(0,r.jsx)(j.Z,{xs:12,md:8,title:"Descri\xe7\xe3o",name:"fields.items[".concat(t,"].descricao"),required:!0,control:L,errors:null==U?void 0:null===(a=U.fields)||void 0===a?void 0:null===(n=a.items)||void 0===n?void 0:null===(o=n[t])||void 0===o?void 0:o.descricao}),(0,r.jsx)(j.Z,{xs:12,md:3,title:"Link (opcional)",name:"fields.items[".concat(t,"].link"),control:L}),(0,r.jsx)(c.ZP,{item:!0,xs:12,md:1,className:"flex items-center",children:(0,r.jsx)(u.Z,{color:"error",size:"small",onClick:()=>G(t),children:(0,r.jsx)(b.Z,{icon:"tabler:trash-filled"})})})]},e.id)}),(0,r.jsx)(c.ZP,{item:!0,xs:12,children:(0,r.jsx)(m.Z,{variant:"outlined",color:"primary",onClick:()=>H({descricao:"",link:""}),startIcon:(0,r.jsx)(b.Z,{icon:"material-symbols:add-circle-outline-rounded"}),children:"Inserir Item"})})]})})})]}),(0,r.jsx)(p.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+_.title,openModal:I,handleClose:()=>S(!1),handleSubmit:Y,btnCancel:!0,btnConfirm:!0})]})};t.Z=I},50287:function(e,t,a){"use strict";var r=a(85893),n=a(79072),o=a(55343),s=a(67836),l=a(87536),i=a(62097),d=a(67294),c=a(64165);let u=e=>{let{xs:t,md:a,title:u,required:m,disabled:x,type:f,value:p,name:v,typeValidation:h,errors:Z,alertRequired:D,control:g}=e,j=(0,i.Z)(),[C,w]=(0,d.useState)({}),[b,I]=(0,d.useState)(null);(0,d.useEffect)(()=>{h&&p&&N(h,v,p)},[h,p,v]);let S=e=>{let t=new Date(e+"T00:00:00"),a=t.getUTCDate().toString().padStart(2,"0"),r=(t.getUTCMonth()+1).toString().padStart(2,"0"),n=t.getUTCFullYear();return"".concat(n,"-").concat(r,"-").concat(a)},N=(e,t,a,r)=>{let n=new Date(a+"T00:00:00"),o=(0,c.HD)(e,n,r);w(e=>({...e,[t]:o}))},P=e=>{let t=new Date,a=new Date(e+"T00:00:00");return"dataAtual"===h&&a.toDateString()!==t.toDateString()?(I("A data deve ser a data atual"),!1):"dataPassado"===h&&a>=t?(I("A data deve ser do passado"),!1):"dataFutura"===h&&a<=t?(I("A data deve ser do futuro"),!1):(I(null),!0)};return(0,r.jsx)(n.ZP,{item:!0,xs:t,md:a,sx:{my:1},children:(0,r.jsx)(o.Z,{fullWidth:!0,children:(0,r.jsx)(l.Qr,{name:v,control:g,rules:{required:m},render(e){let{field:t}=e;return(0,r.jsx)(s.Z,{type:null!=f?f:"date",size:"small",label:u,disabled:!!x,defaultValue:p?S(p):"",error:!!Z||!!b,helperText:b,onChange(e){let a=e.target.value;P(a)&&(t.onChange(a),h&&N(h,v,a))},variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{min:"dataFutura"===h?new Date().toISOString().split("T")[0]:void 0,max:"dataPassado"===h?new Date().toISOString().split("T")[0]:new Date(new Date().setFullYear(new Date().getFullYear()+50)).toISOString().split("T")[0]},sx:{...D&&!(null==t?void 0:t.value)&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:j.palette.error.main},"&:hover fieldset":{borderColor:j.palette.error.main},"&.Mui-focused fieldset":{borderColor:j.palette.error.main}},"& .MuiInputLabel-root":{color:j.palette.error.main},"& .MuiInputLabel-root.Mui-focused":{color:j.palette.error.main}}}})}})})})};t.Z=u},87498:function(e,t,a){"use strict";a.r(t);var r=a(85893),n=a(60565),o=a(67294),s=a(25576);let l=()=>{let{setTitle:e}=(0,o.useContext)(n.f);return(0,o.useEffect)(()=>{e({title:"Vers\xe3o",subtitle:{id:null,count:null,new:!0}})},[]),(0,r.jsx)(s.Z,{})};t.default=l}},function(e){e.O(0,[6887,5061,9774,2888,179],function(){return e(e.s=47574)}),_N_E=e.O()}]);