"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2477],{16247:function(e,n,o){var t=o(85893),l=o(54225),i=o(73812),a=o(86378),s=o(21609),r=o(72819),c=o(67294),d=o(60664);let m=e=>{let{anchorEl:n,open:o,handleClose:m,handleClick:u,actionsData:p}=e,[x,h]=(0,c.useState)(!1),[b,f]=(0,c.useState)(null),j=e=>{if(e.status>=50){let n="".concat(d.Y,"uploads/").concat(e.unidadeID,"/").concat(e.module,"/relatorio/original/").concat(e.usuarioID,"-").concat(e.id,"-").concat(e.module,".pdf");window.open(n,"_blank")}else window.open("/relatorio/".concat(e.route),"_blank")};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(l.Z,{type:"button",onClick:u,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,t.jsx)(s.Z,{icon:"octicon:chevron-down-12"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"A\xe7\xf5es"})]}),(0,t.jsx)(i.Z,{id:"basic-menu",anchorEl:n,open:o,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:null==p?void 0:p.map(e=>(0,t.jsxs)(a.Z,{onClick(){m()},disabled:!!e.disabled,style:{textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[e.identification?(0,t.jsxs)("span",{style:{padding:"0 7px"},children:[(0,t.jsx)("span",{children:e.identification})," -"]}):(0,t.jsx)(s.Z,{icon:e.icon}),"report"==e.type?(0,t.jsx)("a",{onClick:()=>j(e),children:e.name}):(0,t.jsx)("p",{onClick:e.modal?()=>{h(!0),f(e)}:e.action,children:e.name})]},e.id))}),b&&(0,t.jsx)(r.Z,{title:b.name,handleConclusion:b.action,size:b.size,setOpenModal:h,openModal:x,fullHeight:b.fullHeight,clone:!0,children:b.component})]})};n.Z=m},92477:function(e,n,o){o.d(n,{Z:function(){return z}});var t=o(85893),l=o(11163),i=o.n(l),a=o(67294),s=o(21609),r=o(71798),c=o(40039),d=o(83830);o(7071);var m=o(61225),u=o(16247),p=o(54225),x=o(41664),h=o.n(x),b=o(41088),f=o(82555);let j=e=>{let{btnSend:n,btnSave:o,btnNew:l,btnNext:r,disabled:d,disabledSend:m,disabledSubmit:u,handleSubmit:x,handleSend:j,iconConclusion:v,titleConclusion:g,btnNewModal:Z,handleNewModal:y}=e,C=i(),{isLoading:N}=(0,b.Z)(),{data:k}=(0,f.O)(),{hasPermission:w}=(0,a.useContext)(c.V);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l&&w(C.pathname,"inserir")&&(0,t.jsx)(h(),{href:"".concat(C.pathname,"/novo"),children:(0,t.jsxs)(p.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,t.jsx)(s.Z,{icon:"ic:outline-plus"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Novo"})]})}),Z&&w(C.pathname,"inserir")&&(0,t.jsxs)(p.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},onClick:y,children:[(0,t.jsx)(s.Z,{icon:"ic:outline-plus"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Novo"})]}),n&&k&&w(C.pathname,"editar")&&(0,t.jsxs)(p.Z,{onClick:j,type:"button",variant:"contained",size:"medium",color:"primary",readOnly:!0,disabled:d||m,sx:{display:"flex",gap:2},children:[(0,t.jsx)(s.Z,{icon:null!=v?v:"carbon:send-filled"}),(0,t.jsx)("span",{className:"hidden sm:block",children:g})]}),o&&w(C.pathname,"editar")&&(0,t.jsxs)(p.Z,{onClick:x,type:"submit",variant:"contained",size:"medium",disabled:d||u,sx:{display:"flex",gap:2},children:[(0,t.jsx)(s.Z,{icon:"mdi:check-bold"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Salvar"})]}),r&&(0,t.jsxs)(p.Z,{onClick:x,type:"submit",variant:"outlined",size:"medium",color:N?"secondary":"primary",disabled:d||N,children:[(0,t.jsx)(s.Z,{icon:"grommet-icons:form-next-link"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Avan\xe7ar"})]})]})};var v=o(17575);let g=e=>{let{routes:n,currentUrl:o,btnCancel:l,btnDelete:i,btnStatus:r,btnClose:d,handleModalClose:m,handleBtnStatus:u,status:x,setId:h,router:b,type:f,onclickDelete:j}=e,{hasPermission:g}=(0,a.useContext)(c.V),Z="".concat(b.pathname).concat(b.query.aba?"?aba=".concat(b.query.aba):""),y=e=>e.includes("/novo")?e.replace("/novo",""):e;return(0,t.jsxs)("div",{className:"flex gap-2",children:[l&&!d&&g(b.pathname,"ler")&&(0,t.jsx)(v.Z,{title:"Voltar p\xe1gina",placement:"top",children:(0,t.jsx)(p.Z,{onClick(){h(null),b.push(y(Z))},type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,t.jsx)(s.Z,{icon:"grommet-icons:form-previous-link"})})}),i&&g(b.pathname,"excluir")&&(0,t.jsx)(v.Z,{title:"Excluir formul\xe1rio",placement:"top",children:(0,t.jsx)(p.Z,{type:"button",onClick:j,variant:"outlined",color:"error",size:"medium",sx:{display:"flex",gap:2},children:(0,t.jsx)(s.Z,{icon:"solar:trash-bin-minimalistic-2-outline"})})}),d&&(0,t.jsx)(p.Z,{type:"button",onClick:m,variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:(0,t.jsx)("span",{className:"hidden sm:block",children:"Fechar"})})]})};var Z=o(66136),y=o(73812),C=o(86378),N=o(72819),k=o(60664);let w=e=>{let{anchorEl:n,open:o,handleClose:l,handleClick:i,actionsData:r}=e,[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),x=e=>{if(e.status>=50){let n="".concat(k.Y,"uploads/").concat(e.unidadeID,"/").concat(e.module,"/relatorio/original/").concat(e.usuarioID,"-").concat(e.id,"-").concat(e.module,".pdf");window.open(n,"_blank")}else window.open("/relatorio/".concat(e.route),"_blank")};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(p.Z,{type:"button",onClick:i,variant:"outlined",color:"warning",size:"medium",sx:{display:"flex",alignItems:"end",gap:2},children:[(0,t.jsx)(s.Z,{icon:"octicon:chevron-down-12"}),(0,t.jsx)("span",{className:"hidden sm:block",children:"N\xe3o Conformidade"})]}),(0,t.jsx)(y.Z,{id:"basic-menu",anchorEl:n,open:o,onClose:l,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:r&&r.length>0&&(null==r?void 0:r.map(e=>e?(0,t.jsxs)(C.Z,{onClick(){l()},disabled:!!e.disabled,sx:{textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(null==e?void 0:e.identification)?(0,t.jsxs)("span",{style:{padding:"0 7px"},children:[(0,t.jsx)("span",{children:e.identification})," -"]}):(0,t.jsx)(s.Z,{icon:e.icon,className:e.iconClass}),"report"==e.type?(0,t.jsx)("a",{onClick:()=>x(e),children:e.name}):(0,t.jsx)("p",{onClick:e.modal?()=>{d(!0),u(e)}:e.action,children:e.name})]},e.id):null))}),m&&(0,t.jsx)(N.Z,{title:m.name,handleConclusion:m.action,size:m.size,setOpenModal:d,openModal:c,fullHeight:m.fullHeight,children:m.component})]})};var M=o(78432),S=o(87536);let P=e=>{let{id:n,btnCancel:o,btnSave:l,btnSend:p,btnNext:x,btnStatus:h,handleSubmit:f,manualUrl:v,btnNew:y,btnClose:C,handleModalClose:N,disabledSubmit:P,handleSend:z,componentSaveReport:I,iconConclusion:D,titleConclusion:R,disabledSend:E,handleBtnStatus:O,onclickDelete:_,btnDelete:V,btnPrint:A,disabledPrint:L,disabled:T,actions:F,actionsData:q,type:B,module:H,status:U,partialRoute:X,outsideID:Y,btnNewModal:J,handleNewModal:Q,actionsNC:W}=e,G=i(),{routes:K,user:$}=(0,a.useContext)(c.V),{setId:ee,setModelID:en,setRecebimentoMpID:eo}=(0,a.useContext)(d.X),[et,el]=(0,a.useState)(!1),[ei,ea]=(0,a.useState)(null),[es,er]=(0,a.useState)(null),{isLoading:ec}=(0,b.Z)(),{settings:ed}=(0,a.useContext)(Z.J6),[em,eu]=(0,a.useState)(null),ep=(0,S.cI)({mode:"onChange"}),ex=(0,m.Z)("(min-width:640px)"),eh=Boolean(ei),eb=Boolean(es),ef=e=>{ea(e.currentTarget)},ej=e=>{er(e.currentTarget)},ev=()=>{ea(null)},eg=()=>{er(null)},eZ="new"===B&&X?(0,r.g_)((0,r.g_)(G.pathname)):"new"===B||X?(0,r.g_)(G.pathname):G.pathname;Object.keys(G.query).length>0&&(eZ+="?".concat(new URLSearchParams(G.query).toString())),s.Z,s.Z,s.Z;//! NÃ£o Conformidades
let ey=()=>{if("recebimentoMp"===H){let e=ep.getValues("new");eo(n),en(e.modelo.id),G.push("/formularios/recebimento-mp/novo/?aba=nao-conformidade")}},eC=(e,n)=>{ee(e),G.push(n)},eN=async()=>{try{let e=null;"recebimentoMp"===H&&(e={endpoint:"formularios/recebimento-mp/nao-conformidade/getNCRecebimentoMp",route:"/formularios/recebimento-mp/?aba=nao-conformidade",componentNewNC:(0,t.jsx)(M.Z,{type:"form",data:null,form:ep})});let o=await k.h.post(e.endpoint,{id:n}),l={icon:"icons8:plus",name:"Nova N\xe3o Conformidade",modal:!0,component:e.componentNewNC,action:ey,size:"sm",disabled:!1},i=o.data.map(n=>{if(1===$.papelID||n.fornecedorPreenche)return{icon:"typcn:warning-outline",name:n.nome,iconClass:"text-yellow-600",action:()=>eC(n.id,e.route),disabled:!1}}),a=1===$.papelID?[l,...i]:i;eu(a)}catch(s){console.log(s)}};return(0,a.useEffect)(()=>{let e=()=>{el(!1),window.scrollY>0?el(!0):el(!1)};return eN(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"sticky ".concat(Y?"-top-[4.5rem] px-4 bg-transparent":"top-[4.5rem]","  pb-2 mb-2 z-50 ").concat("dark"==ed.mode?"bg-[#161c24]":"bg-[#F7F7F9]"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full ",style:{zIndex:1e3},children:[(0,t.jsx)(g,{routes:K,currentUrl:eZ,btnCancel:o,btnDelete:V,btnStatus:h,btnClose:C,handleModalClose:N,status:U,handleBtnStatus:O,onclickDelete:_,setId:ee,router:G,type:B}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[W&&em&&(0,t.jsx)(w,{anchorEl:es,open:eb,handleClose:eg,handleClick:ej,disabled:T,disabledPrint:L,btnPrint:A,actionsData:em,matches:ex}),F&&(0,t.jsx)(u.Z,{anchorEl:ei,open:eh,handleClose:ev,handleClick:ef,disabled:T,disabledPrint:L,btnPrint:A,actionsData:q,matches:ex}),(0,t.jsx)(j,{btnSave:l,btnNew:y,btnSend:p,btnNext:x,manualUrl:v,routes:K,currentUrl:eZ,handleSubmit:f,disabled:T,disabledSend:E,disabledSubmit:P,handleSend:z,iconConclusion:D,titleConclusion:R,btnNewModal:J,handleNewModal:Q})]})]})})})};var z=P},84220:function(e,n,o){var t=o(85893),l=o(79072),i=o(55343),a=o(35966),s=o(67836),r=o(70918),c=o(87536),d=o(53934),m=o(62097),u=o(51514);let p=e=>{var n,o;let{form:p,xs:x,md:h,title:b,options:f,name:j,limitTags:v,value:g,required:Z,disabled:y,multiple:C,onChange:N,className:k,createNew:w,helpText:M,alertRequired:S,helpTextPosition:P,opacity:z}=e,I=(0,m.Z)(),{settings:D}=(0,u.r)(),R=w?[{nome:"-- Novo --"},...null!=f?f:[]]:f,E=j.split(".").reduce((e,n)=>null==e?void 0:e[n],null==p?void 0:null===(n=p.formState)||void 0===n?void 0:n.errors),O=Boolean(E);return(0,t.jsx)(l.ZP,{item:!0,xs:x,md:h,sx:{my:1},className:k,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.Z,{fullWidth:!0,children:(0,t.jsx)(c.Qr,{name:j,control:p.control,defaultValue:g,rules:{required:Z},render(e){let{field:n}=e;return(0,t.jsx)(a.Z,{...n,multiple:C,limitTags:v,size:"small",options:R,getOptionLabel:e=>null==e?void 0:e.nome,value:C&&n.value&&n.value.length>0?n.value.map(e=>f.find(n=>n.id===e.id)):null!==(o=n.value)&&void 0!==o?o:{nome:""},disabled:y,onChange(e,n){n&&"-- Novo --"==e.target.innerText?w():(N&&N(n),p.setValue(j,n),n?p.clearErrors(j):p.setError(j,{type:"required",message:"".concat(b," \xe9 obrigat\xf3rio")}))},renderInput:e=>(0,t.jsx)(s.Z,{...e,label:b,placeholder:b,error:O,sx:{opacity:z?.4:1,"& .MuiInputBase-input":{padding:"4px 14px !important"},...S&&!(null==n?void 0:n.value)&&{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:I.palette.error.main},"&:hover fieldset":{borderColor:I.palette.error.main},"&.Mui-focused fieldset":{borderColor:I.palette.error.main}},"& .MuiInputLabel-root":{color:I.palette.error.main},"& .MuiInputLabel-root.Mui-focused":{color:I.palette.error.main}}}}),PaperComponent(e){let{children:n}=e;return(0,t.jsx)(r.Z,{sx:{"& ul":{border:"dark"==D.mode?"1px solid rgba(".concat(I.palette.customColors.main,", 0.32)"):"null",borderRadius:"8px"}},children:n})},noOptionsText:"Sem op\xe7\xf5es"})}})}),M&&(0,t.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,t.jsx)(d.Z,{text:M,position:null!=P?P:"top"})})]})})};n.Z=p},78432:function(e,n,o){var t=o(85893),l=o(79072),i=o(18194),a=o(67294),s=o(60664),r=o(40039),c=o(84220);let d=e=>{let{form:n,type:o,data:d}=e,{loggedUnity:m}=(0,a.useContext)(r.V),[u,p]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),b=async()=>{try{let e=await s.h.post("/formularios/recebimento-mp/nao-conformidade/getModels",{unidadeID:m.unidadeID});p(e.data)}catch(n){console.log(n)}},f=async()=>{try{let e=await s.h.post("/formularios/recebimento-mp/nao-conformidade/getRecebimentoMPNC",{unidadeID:m.unidadeID});h(e.data)}catch(n){console.log(n)}};return(0,a.useEffect)(()=>{b(),f()},[d]),(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:["form"===o&&(0,t.jsx)(i.Z,{data:d}),(0,t.jsxs)(l.ZP,{container:!0,spacing:4,children:["list"===o&&(0,t.jsx)(c.Z,{xs:12,md:6,title:"Recebimento de MP",name:"new.recebimento",options:null!=x?x:[],helpText:"Selecione o Recebimento de MP para lan\xe7ar uma nova n\xe3o conformidade",form:n}),u&&(0,t.jsx)(c.Z,{xs:12,md:"form"===o?12:6,title:"Modelo de formul\xe1rio",name:"new.modelo",options:null!=u?u:[],value:(null==d?void 0:d.modelo)||(null==u?void 0:u.length)===1?u[0]:{nome:""},helpText:"Selecione um modelo de formul\xe1rio para o preenchimento desta n\xe3o conformidade para este Recebimento de MP",form:n})]})]})};n.Z=d},18194:function(e,n,o){var t=o(85893),l=o(79072),i=o(17575),a=o(11163),s=o(67294),r=o(21609),c=o(7071),d=o(40039),m=o(83830);let u=e=>{var n;let{data:o}=e;if(!o)return;let u=(0,a.useRouter)(),{user:p}=(0,s.useContext)(d.V),{setId:x}=(0,s.useContext)(m.X),h=()=>{x(o.recebimento.id),u.push("/formularios/recebimento-mp/")};return(0,t.jsxs)(l.ZP,{container:!0,spacing:4,children:[(0,t.jsxs)(l.ZP,{item:!0,xs:12,md:4,children:[(0,t.jsx)("label",{className:"opacity-60",children:"Fornecedor"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Z,{icon:"mdi:truck-fast-outline"}),(0,t.jsx)("p",{children:o.recebimento.fornecedor})]})]}),(0,t.jsxs)(l.ZP,{item:!0,xs:12,md:3,children:[(0,t.jsx)("label",{className:"opacity-60",children:"Data e hora do recebimento"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Z,{icon:"tabler:calendar-check"}),(0,t.jsx)("p",{children:"".concat(o.recebimento.dataRecebimentoMp," ").concat(o.recebimento.horaRecebimentoMp)})]})]}),(0,t.jsxs)(l.ZP,{item:!0,xs:12,md:3,children:[(0,t.jsx)("label",{className:"opacity-60",children:"NF"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,t.jsx)(r.Z,{icon:"ion:document-text-outline"}),(0,t.jsx)("p",{children:null!==(n=o.recebimento.nfRecebimentoMp)&&void 0!==n?n:"--"})]})]}),(0,t.jsxs)(l.ZP,{item:!0,xs:12,md:2,children:[(0,t.jsx)("label",{className:"opacity-60",children:"Recebimento"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Z,{skin:"light",label:o.recebimento.status.label,color:o.recebimento.status.color,sx:{height:28,fontSize:"0.75rem"}}),(2!=p.papelID||o.fornecedorAcessaRecebimento)&&(0,t.jsx)(i.Z,{title:"Acessar Recebimento de MP",placement:"top",children:(0,t.jsx)("div",{className:"cursor-pointer",children:(0,t.jsx)(r.Z,{icon:"ci:external-link",onClick:h})})})]})]})]})};n.Z=u},41088:function(e,n,o){var t=o(67294),l=o(83830);let i=()=>{let{isLoading:e,setIsLoading:n}=(0,t.useContext)(l.X),o=()=>{n(!0)},i=()=>{setTimeout(()=>{n(!1)},500)};return{isLoading:e,startLoading:o,stopLoading:i}};n.Z=i}}]);